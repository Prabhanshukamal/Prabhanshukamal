var QR=Object.defineProperty;var p1=h=>{throw TypeError(h)};var ZR=(h,t,e)=>t in h?QR(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var At=(h,t,e)=>ZR(h,typeof t!="symbol"?t+"":t,e),Lb=(h,t,e)=>t.has(h)||p1("Cannot "+e);var c=(h,t,e)=>(Lb(h,t,"read from private field"),e?e.call(h):t.get(h)),x=(h,t,e)=>t.has(h)?p1("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,e),S=(h,t,e,s)=>(Lb(h,t,"write to private field"),s?s.call(h,e):t.set(h,e),e),T=(h,t,e)=>(Lb(h,t,"access private method"),e);var Xi=(h,t,e,s)=>({set _(a){S(h,t,a,e)},get _(){return c(h,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();var Ob={exports:{}},Ed={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m1;function JR(){if(m1)return Ed;m1=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,a,l){var o=null;if(l!==void 0&&(o=""+l),a.key!==void 0&&(o=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:h,type:s,key:o,ref:a!==void 0?a:null,props:l}}return Ed.Fragment=t,Ed.jsx=e,Ed.jsxs=e,Ed}var y1;function tM(){return y1||(y1=1,Ob.exports=JR()),Ob.exports}var J=tM(),Nb={exports:{}},Gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v1;function eM(){if(v1)return Gt;v1=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),o=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function b(z){return z===null||typeof z!="object"?null:(z=v&&z[v]||z["@@iterator"],typeof z=="function"?z:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,_={};function C(z,et,lt){this.props=z,this.context=et,this.refs=_,this.updater=lt||A}C.prototype.isReactComponent={},C.prototype.setState=function(z,et){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,et,"setState")},C.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function R(){}R.prototype=C.prototype;function L(z,et,lt){this.props=z,this.context=et,this.refs=_,this.updater=lt||A}var O=L.prototype=new R;O.constructor=L,E(O,C.prototype),O.isPureReactComponent=!0;var P=Array.isArray,M={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function U(z,et,lt,rt,ot,Ot){return lt=Ot.ref,{$$typeof:h,type:z,key:et,ref:lt!==void 0?lt:null,props:Ot}}function $(z,et){return U(z.type,et,void 0,void 0,void 0,z.props)}function G(z){return typeof z=="object"&&z!==null&&z.$$typeof===h}function Z(z){var et={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(lt){return et[lt]})}var it=/\/+/g;function Mt(z,et){return typeof z=="object"&&z!==null&&z.key!=null?Z(""+z.key):et.toString(36)}function Rt(){}function ht(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(Rt,Rt):(z.status="pending",z.then(function(et){z.status==="pending"&&(z.status="fulfilled",z.value=et)},function(et){z.status==="pending"&&(z.status="rejected",z.reason=et)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function St(z,et,lt,rt,ot){var Ot=typeof z;(Ot==="undefined"||Ot==="boolean")&&(z=null);var Dt=!1;if(z===null)Dt=!0;else switch(Ot){case"bigint":case"string":case"number":Dt=!0;break;case"object":switch(z.$$typeof){case h:case t:Dt=!0;break;case m:return Dt=z._init,St(Dt(z._payload),et,lt,rt,ot)}}if(Dt)return ot=ot(z),Dt=rt===""?"."+Mt(z,0):rt,P(ot)?(lt="",Dt!=null&&(lt=Dt.replace(it,"$&/")+"/"),St(ot,et,lt,"",function(Xt){return Xt})):ot!=null&&(G(ot)&&(ot=$(ot,lt+(ot.key==null||z&&z.key===ot.key?"":(""+ot.key).replace(it,"$&/")+"/")+Dt)),et.push(ot)),1;Dt=0;var qt=rt===""?".":rt+":";if(P(z))for(var ie=0;ie<z.length;ie++)rt=z[ie],Ot=qt+Mt(rt,ie),Dt+=St(rt,et,lt,Ot,ot);else if(ie=b(z),typeof ie=="function")for(z=ie.call(z),ie=0;!(rt=z.next()).done;)rt=rt.value,Ot=qt+Mt(rt,ie++),Dt+=St(rt,et,lt,Ot,ot);else if(Ot==="object"){if(typeof z.then=="function")return St(ht(z),et,lt,rt,ot);throw et=String(z),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.")}return Dt}function Y(z,et,lt){if(z==null)return z;var rt=[],ot=0;return St(z,rt,"","",function(Ot){return et.call(lt,Ot,ot++)}),rt}function nt(z){if(z._status===-1){var et=z._result;et=et(),et.then(function(lt){(z._status===0||z._status===-1)&&(z._status=1,z._result=lt)},function(lt){(z._status===0||z._status===-1)&&(z._status=2,z._result=lt)}),z._status===-1&&(z._status=0,z._result=et)}if(z._status===1)return z._result.default;throw z._result}var dt=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var et=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(et))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function Pt(){}return Gt.Children={map:Y,forEach:function(z,et,lt){Y(z,function(){et.apply(this,arguments)},lt)},count:function(z){var et=0;return Y(z,function(){et++}),et},toArray:function(z){return Y(z,function(et){return et})||[]},only:function(z){if(!G(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Gt.Component=C,Gt.Fragment=e,Gt.Profiler=a,Gt.PureComponent=L,Gt.StrictMode=s,Gt.Suspense=f,Gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Gt.act=function(){throw Error("act(...) is not supported in production builds of React.")},Gt.cache=function(z){return function(){return z.apply(null,arguments)}},Gt.cloneElement=function(z,et,lt){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var rt=E({},z.props),ot=z.key,Ot=void 0;if(et!=null)for(Dt in et.ref!==void 0&&(Ot=void 0),et.key!==void 0&&(ot=""+et.key),et)!k.call(et,Dt)||Dt==="key"||Dt==="__self"||Dt==="__source"||Dt==="ref"&&et.ref===void 0||(rt[Dt]=et[Dt]);var Dt=arguments.length-2;if(Dt===1)rt.children=lt;else if(1<Dt){for(var qt=Array(Dt),ie=0;ie<Dt;ie++)qt[ie]=arguments[ie+2];rt.children=qt}return U(z.type,ot,void 0,void 0,Ot,rt)},Gt.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:l,_context:z},z},Gt.createElement=function(z,et,lt){var rt,ot={},Ot=null;if(et!=null)for(rt in et.key!==void 0&&(Ot=""+et.key),et)k.call(et,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(ot[rt]=et[rt]);var Dt=arguments.length-2;if(Dt===1)ot.children=lt;else if(1<Dt){for(var qt=Array(Dt),ie=0;ie<Dt;ie++)qt[ie]=arguments[ie+2];ot.children=qt}if(z&&z.defaultProps)for(rt in Dt=z.defaultProps,Dt)ot[rt]===void 0&&(ot[rt]=Dt[rt]);return U(z,Ot,void 0,void 0,null,ot)},Gt.createRef=function(){return{current:null}},Gt.forwardRef=function(z){return{$$typeof:d,render:z}},Gt.isValidElement=G,Gt.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:nt}},Gt.memo=function(z,et){return{$$typeof:g,type:z,compare:et===void 0?null:et}},Gt.startTransition=function(z){var et=M.T,lt={};M.T=lt;try{var rt=z(),ot=M.S;ot!==null&&ot(lt,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(Pt,dt)}catch(Ot){dt(Ot)}finally{M.T=et}},Gt.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Gt.use=function(z){return M.H.use(z)},Gt.useActionState=function(z,et,lt){return M.H.useActionState(z,et,lt)},Gt.useCallback=function(z,et){return M.H.useCallback(z,et)},Gt.useContext=function(z){return M.H.useContext(z)},Gt.useDebugValue=function(){},Gt.useDeferredValue=function(z,et){return M.H.useDeferredValue(z,et)},Gt.useEffect=function(z,et){return M.H.useEffect(z,et)},Gt.useId=function(){return M.H.useId()},Gt.useImperativeHandle=function(z,et,lt){return M.H.useImperativeHandle(z,et,lt)},Gt.useInsertionEffect=function(z,et){return M.H.useInsertionEffect(z,et)},Gt.useLayoutEffect=function(z,et){return M.H.useLayoutEffect(z,et)},Gt.useMemo=function(z,et){return M.H.useMemo(z,et)},Gt.useOptimistic=function(z,et){return M.H.useOptimistic(z,et)},Gt.useReducer=function(z,et,lt){return M.H.useReducer(z,et,lt)},Gt.useRef=function(z){return M.H.useRef(z)},Gt.useState=function(z){return M.H.useState(z)},Gt.useSyncExternalStore=function(z,et,lt){return M.H.useSyncExternalStore(z,et,lt)},Gt.useTransition=function(){return M.H.useTransition()},Gt.version="19.0.0",Gt}var b1;function AA(){return b1||(b1=1,Nb.exports=eM()),Nb.exports}var q=AA(),kb={exports:{}},_d={},Pb={exports:{}},zb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A1;function iM(){return A1||(A1=1,function(h){function t(Y,nt){var dt=Y.length;Y.push(nt);t:for(;0<dt;){var Pt=dt-1>>>1,z=Y[Pt];if(0<a(z,nt))Y[Pt]=nt,Y[dt]=z,dt=Pt;else break t}}function e(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var nt=Y[0],dt=Y.pop();if(dt!==nt){Y[0]=dt;t:for(var Pt=0,z=Y.length,et=z>>>1;Pt<et;){var lt=2*(Pt+1)-1,rt=Y[lt],ot=lt+1,Ot=Y[ot];if(0>a(rt,dt))ot<z&&0>a(Ot,rt)?(Y[Pt]=Ot,Y[ot]=dt,Pt=ot):(Y[Pt]=rt,Y[lt]=dt,Pt=lt);else if(ot<z&&0>a(Ot,dt))Y[Pt]=Ot,Y[ot]=dt,Pt=ot;else break t}}return nt}function a(Y,nt){var dt=Y.sortIndex-nt.sortIndex;return dt!==0?dt:Y.id-nt.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;h.unstable_now=function(){return l.now()}}else{var o=Date,d=o.now();h.unstable_now=function(){return o.now()-d}}var f=[],g=[],m=1,v=null,b=3,A=!1,E=!1,_=!1,C=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function O(Y){for(var nt=e(g);nt!==null;){if(nt.callback===null)s(g);else if(nt.startTime<=Y)s(g),nt.sortIndex=nt.expirationTime,t(f,nt);else break;nt=e(g)}}function P(Y){if(_=!1,O(Y),!E)if(e(f)!==null)E=!0,ht();else{var nt=e(g);nt!==null&&St(P,nt.startTime-Y)}}var M=!1,k=-1,U=5,$=-1;function G(){return!(h.unstable_now()-$<U)}function Z(){if(M){var Y=h.unstable_now();$=Y;var nt=!0;try{t:{E=!1,_&&(_=!1,R(k),k=-1),A=!0;var dt=b;try{e:{for(O(Y),v=e(f);v!==null&&!(v.expirationTime>Y&&G());){var Pt=v.callback;if(typeof Pt=="function"){v.callback=null,b=v.priorityLevel;var z=Pt(v.expirationTime<=Y);if(Y=h.unstable_now(),typeof z=="function"){v.callback=z,O(Y),nt=!0;break e}v===e(f)&&s(f),O(Y)}else s(f);v=e(f)}if(v!==null)nt=!0;else{var et=e(g);et!==null&&St(P,et.startTime-Y),nt=!1}}break t}finally{v=null,b=dt,A=!1}nt=void 0}}finally{nt?it():M=!1}}}var it;if(typeof L=="function")it=function(){L(Z)};else if(typeof MessageChannel<"u"){var Mt=new MessageChannel,Rt=Mt.port2;Mt.port1.onmessage=Z,it=function(){Rt.postMessage(null)}}else it=function(){C(Z,0)};function ht(){M||(M=!0,it())}function St(Y,nt){k=C(function(){Y(h.unstable_now())},nt)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(Y){Y.callback=null},h.unstable_continueExecution=function(){E||A||(E=!0,ht())},h.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<Y?Math.floor(1e3/Y):5},h.unstable_getCurrentPriorityLevel=function(){return b},h.unstable_getFirstCallbackNode=function(){return e(f)},h.unstable_next=function(Y){switch(b){case 1:case 2:case 3:var nt=3;break;default:nt=b}var dt=b;b=nt;try{return Y()}finally{b=dt}},h.unstable_pauseExecution=function(){},h.unstable_requestPaint=function(){},h.unstable_runWithPriority=function(Y,nt){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var dt=b;b=Y;try{return nt()}finally{b=dt}},h.unstable_scheduleCallback=function(Y,nt,dt){var Pt=h.unstable_now();switch(typeof dt=="object"&&dt!==null?(dt=dt.delay,dt=typeof dt=="number"&&0<dt?Pt+dt:Pt):dt=Pt,Y){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=dt+z,Y={id:m++,callback:nt,priorityLevel:Y,startTime:dt,expirationTime:z,sortIndex:-1},dt>Pt?(Y.sortIndex=dt,t(g,Y),e(f)===null&&Y===e(g)&&(_?(R(k),k=-1):_=!0,St(P,dt-Pt))):(Y.sortIndex=z,t(f,Y),E||A||(E=!0,ht())),Y},h.unstable_shouldYield=G,h.unstable_wrapCallback=function(Y){var nt=b;return function(){var dt=b;b=nt;try{return Y.apply(this,arguments)}finally{b=dt}}}}(zb)),zb}var S1;function nM(){return S1||(S1=1,Pb.exports=iM()),Pb.exports}var Fb={exports:{}},Fi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1;function sM(){if(w1)return Fi;w1=1;var h=AA();function t(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)g+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,g,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:f,containerInfo:g,implementation:m}}var o=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Fi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Fi.createPortal=function(f,g){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return l(f,g,null,m)},Fi.flushSync=function(f){var g=o.T,m=s.p;try{if(o.T=null,s.p=2,f)return f()}finally{o.T=g,s.p=m,s.d.f()}},Fi.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(f,g))},Fi.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},Fi.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var m=g.as,v=d(m,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;m==="style"?s.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:A}):m==="script"&&s.d.X(f,{crossOrigin:v,integrity:b,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Fi.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var m=d(g.as,g.crossOrigin);s.d.M(f,{crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(f)},Fi.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var m=g.as,v=d(m,g.crossOrigin);s.d.L(f,m,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Fi.preloadModule=function(f,g){if(typeof f=="string")if(g){var m=d(g.as,g.crossOrigin);s.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(f)},Fi.requestFormReset=function(f){s.d.r(f)},Fi.unstable_batchedUpdates=function(f,g){return f(g)},Fi.useFormState=function(f,g,m){return o.H.useFormState(f,g,m)},Fi.useFormStatus=function(){return o.H.useHostTransitionStatus()},Fi.version="19.0.0",Fi}var E1;function b_(){if(E1)return Fb.exports;E1=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),Fb.exports=sM(),Fb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _1;function aM(){if(_1)return _d;_1=1;var h=nM(),t=AA(),e=b_();function s(i){var n="https://react.dev/errors/"+i;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+i+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var l=Symbol.for("react.element"),o=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),A=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),O=Symbol.for("react.offscreen"),P=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function k(i){return i===null||typeof i!="object"?null:(i=M&&i[M]||i["@@iterator"],typeof i=="function"?i:null)}var U=Symbol.for("react.client.reference");function $(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===U?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case f:return"Fragment";case d:return"Portal";case m:return"Profiler";case g:return"StrictMode";case _:return"Suspense";case C:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case A:return(i.displayName||"Context")+".Provider";case b:return(i._context.displayName||"Context")+".Consumer";case E:var n=i.render;return i=i.displayName,i||(i=n.displayName||n.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return n=i.displayName||null,n!==null?n:$(i.type)||"Memo";case L:n=i._payload,i=i._init;try{return $(i(n))}catch{}}return null}var G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=Object.assign,it,Mt;function Rt(i){if(it===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);it=n&&n[1]||"",Mt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+it+i+Mt}var ht=!1;function St(i,n){if(!i||ht)return"";ht=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(n){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(W){var X=W}Reflect.construct(i,[],st)}else{try{st.call()}catch(W){X=W}i.call(st.prototype)}}else{try{throw Error()}catch(W){X=W}(st=i())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(W){if(W&&X&&typeof W.stack=="string")return[W.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),w=y[0],D=y[1];if(w&&D){var N=w.split(`
`),B=D.split(`
`);for(p=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;p<B.length&&!B[p].includes("DetermineComponentFrameRoot");)p++;if(u===N.length||p===B.length)for(u=N.length-1,p=B.length-1;1<=u&&0<=p&&N[u]!==B[p];)p--;for(;1<=u&&0<=p;u--,p--)if(N[u]!==B[p]){if(u!==1||p!==1)do if(u--,p--,0>p||N[u]!==B[p]){var Q=`
`+N[u].replace(" at new "," at ");return i.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",i.displayName)),Q}while(1<=u&&0<=p);break}}}finally{ht=!1,Error.prepareStackTrace=r}return(r=i?i.displayName||i.name:"")?Rt(r):""}function Y(i){switch(i.tag){case 26:case 27:case 5:return Rt(i.type);case 16:return Rt("Lazy");case 13:return Rt("Suspense");case 19:return Rt("SuspenseList");case 0:case 15:return i=St(i.type,!1),i;case 11:return i=St(i.type.render,!1),i;case 1:return i=St(i.type,!0),i;default:return""}}function nt(i){try{var n="";do n+=Y(i),i=i.return;while(i);return n}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function dt(i){var n=i,r=i;if(i.alternate)for(;n.return;)n=n.return;else{i=n;do n=i,(n.flags&4098)!==0&&(r=n.return),i=n.return;while(i)}return n.tag===3?r:null}function Pt(i){if(i.tag===13){var n=i.memoizedState;if(n===null&&(i=i.alternate,i!==null&&(n=i.memoizedState)),n!==null)return n.dehydrated}return null}function z(i){if(dt(i)!==i)throw Error(s(188))}function et(i){var n=i.alternate;if(!n){if(n=dt(i),n===null)throw Error(s(188));return n!==i?null:i}for(var r=i,u=n;;){var p=r.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){r=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===r)return z(p),i;if(y===u)return z(p),n;y=y.sibling}throw Error(s(188))}if(r.return!==u.return)r=p,u=y;else{for(var w=!1,D=p.child;D;){if(D===r){w=!0,r=p,u=y;break}if(D===u){w=!0,u=p,r=y;break}D=D.sibling}if(!w){for(D=y.child;D;){if(D===r){w=!0,r=y,u=p;break}if(D===u){w=!0,u=y,r=p;break}D=D.sibling}if(!w)throw Error(s(189))}}if(r.alternate!==u)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?i:n}function lt(i){var n=i.tag;if(n===5||n===26||n===27||n===6)return i;for(i=i.child;i!==null;){if(n=lt(i),n!==null)return n;i=i.sibling}return null}var rt=Array.isArray,ot=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ot={pending:!1,data:null,method:null,action:null},Dt=[],qt=-1;function ie(i){return{current:i}}function Xt(i){0>qt||(i.current=Dt[qt],Dt[qt]=null,qt--)}function Wt(i,n){qt++,Dt[qt]=i.current,i.current=n}var Ai=ie(null),en=ie(null),ei=ie(null),mr=ie(null);function xu(i,n){switch(Wt(ei,n),Wt(en,i),Wt(Ai,null),i=n.nodeType,i){case 9:case 11:n=(n=n.documentElement)&&(n=n.namespaceURI)?qE(n):0;break;default:if(i=i===8?n.parentNode:n,n=i.tagName,i=i.namespaceURI)i=qE(i),n=VE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Xt(Ai),Wt(Ai,n)}function ha(){Xt(Ai),Xt(en),Xt(ei)}function Ch(i){i.memoizedState!==null&&Wt(mr,i);var n=Ai.current,r=VE(n,i.type);n!==r&&(Wt(en,i),Wt(Ai,r))}function Tu(i){en.current===i&&(Xt(Ai),Xt(en)),mr.current===i&&(Xt(mr),vd._currentValue=Ot)}var Rh=Object.prototype.hasOwnProperty,Mh=h.unstable_scheduleCallback,ds=h.unstable_cancelCallback,Nl=h.unstable_shouldYield,Fg=h.unstable_requestPaint,nn=h.unstable_now,Fs=h.unstable_getCurrentPriorityLevel,Fn=h.unstable_ImmediatePriority,Dh=h.unstable_UserBlockingPriority,yr=h.unstable_NormalPriority,Ty=h.unstable_LowPriority,fs=h.unstable_IdlePriority,Hg=h.log,Bg=h.unstable_setDisableYieldValue,vr=null,qi=null;function Ug(i){if(qi&&typeof qi.onCommitFiberRoot=="function")try{qi.onCommitFiberRoot(vr,i,void 0,(i.current.flags&128)===128)}catch{}}function fn(i){if(typeof Hg=="function"&&Bg(i),qi&&typeof qi.setStrictMode=="function")try{qi.setStrictMode(vr,i)}catch{}}var Pi=Math.clz32?Math.clz32:Ig,Lh=Math.log,Cy=Math.LN2;function Ig(i){return i>>>=0,i===0?32:31-(Lh(i)/Cy|0)|0}var Cu=128,kl=4194304;function Hn(i){var n=i&42;if(n!==0)return n;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function da(i,n){var r=i.pendingLanes;if(r===0)return 0;var u=0,p=i.suspendedLanes,y=i.pingedLanes,w=i.warmLanes;i=i.finishedLanes!==0;var D=r&134217727;return D!==0?(r=D&~p,r!==0?u=Hn(r):(y&=D,y!==0?u=Hn(y):i||(w=D&~w,w!==0&&(u=Hn(w))))):(D=r&~p,D!==0?u=Hn(D):y!==0?u=Hn(y):i||(w=r&~w,w!==0&&(u=Hn(w)))),u===0?0:n!==0&&n!==u&&(n&p)===0&&(p=u&-u,w=n&-n,p>=w||p===32&&(w&4194176)!==0)?n:u}function Pl(i,n){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&n)===0}function Ry(i,n){switch(i){case 1:case 2:case 4:case 8:return n+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F(){var i=Cu;return Cu<<=1,(Cu&4194176)===0&&(Cu=128),i}function j(){var i=kl;return kl<<=1,(kl&62914560)===0&&(kl=4194304),i}function K(i){for(var n=[],r=0;31>r;r++)n.push(i);return n}function at(i,n){i.pendingLanes|=n,n!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function ct(i,n,r,u,p,y){var w=i.pendingLanes;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=r,i.entangledLanes&=r,i.errorRecoveryDisabledLanes&=r,i.shellSuspendCounter=0;var D=i.entanglements,N=i.expirationTimes,B=i.hiddenUpdates;for(r=w&~r;0<r;){var Q=31-Pi(r),st=1<<Q;D[Q]=0,N[Q]=-1;var X=B[Q];if(X!==null)for(B[Q]=null,Q=0;Q<X.length;Q++){var W=X[Q];W!==null&&(W.lane&=-536870913)}r&=~st}u!==0&&zt(i,u,0),y!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=y&~(w&~n))}function zt(i,n,r){i.pendingLanes|=n,i.suspendedLanes&=~n;var u=31-Pi(n);i.entangledLanes|=n,i.entanglements[u]=i.entanglements[u]|1073741824|r&4194218}function Lt(i,n){var r=i.entangledLanes|=n;for(i=i.entanglements;r;){var u=31-Pi(r),p=1<<u;p&n|i[u]&n&&(i[u]|=n),r&=~p}}function Et(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Tt(){var i=ot.p;return i!==0?i:(i=window.event,i===void 0?32:u1(i.type))}function ft(i,n){var r=ot.p;try{return ot.p=i,n()}finally{ot.p=r}}var yt=Math.random().toString(36).slice(2),vt="__reactFiber$"+yt,Ht="__reactProps$"+yt,he="__reactContainer$"+yt,Ye="__reactEvents$"+yt,ze="__reactListeners$"+yt,xe="__reactHandles$"+yt,Fe="__reactResources$"+yt,Bn="__reactMarker$"+yt;function fa(i){delete i[vt],delete i[Ht],delete i[Ye],delete i[ze],delete i[xe]}function Si(i){var n=i[vt];if(n)return n;for(var r=i.parentNode;r;){if(n=r[he]||r[vt]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(i=$E(i);i!==null;){if(r=i[vt])return r;i=$E(i)}return n}i=r,r=i.parentNode}return null}function wi(i){if(i=i[vt]||i[he]){var n=i.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return i}return null}function ga(i){var n=i.tag;if(n===5||n===26||n===27||n===6)return i.stateNode;throw Error(s(33))}function Un(i){var n=i[Fe];return n||(n=i[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ae(i){i[Bn]=!0}var zl=new Set,Fl={};function ne(i,n){Le(i,n),Le(i+"Capture",n)}function Le(i,n){for(Fl[i]=n,i=0;i<n.length;i++)zl.add(n[i])}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oe={},pa={};function jg(i){return Rh.call(pa,i)?!0:Rh.call(Oe,i)?!1:Hl.test(i)?pa[i]=!0:(Oe[i]=!0,!1)}function Ru(i,n,r){if(jg(n))if(r===null)i.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":i.removeAttribute(n);return;case"boolean":var u=n.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(n);return}}i.setAttribute(n,""+r)}}function Gg(i,n,r){if(r===null)i.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(n);return}i.setAttribute(n,""+r)}}function ma(i,n,r,u){if(u===null)i.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttributeNS(n,r,""+u)}}function In(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function XA(i){var n=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function YT(i){var n=XA(i)?"checked":"value",r=Object.getOwnPropertyDescriptor(i.constructor.prototype,n),u=""+i[n];if(!i.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var p=r.get,y=r.set;return Object.defineProperty(i,n,{configurable:!0,get:function(){return p.call(this)},set:function(w){u=""+w,y.call(this,w)}}),Object.defineProperty(i,n,{enumerable:r.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){i._valueTracker=null,delete i[n]}}}}function qg(i){i._valueTracker||(i._valueTracker=YT(i))}function $A(i){if(!i)return!1;var n=i._valueTracker;if(!n)return!0;var r=n.getValue(),u="";return i&&(u=XA(i)?i.checked?"true":"false":i.value),i=u,i!==r?(n.setValue(i),!0):!1}function Vg(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var XT=/[\n"\\]/g;function jn(i){return i.replace(XT,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function My(i,n,r,u,p,y,w,D){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),n!=null?w==="number"?(n===0&&i.value===""||i.value!=n)&&(i.value=""+In(n)):i.value!==""+In(n)&&(i.value=""+In(n)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),n!=null?Dy(i,w,In(n)):r!=null?Dy(i,w,In(r)):u!=null&&i.removeAttribute("value"),p==null&&y!=null&&(i.defaultChecked=!!y),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.name=""+In(D):i.removeAttribute("name")}function KA(i,n,r,u,p,y,w,D){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),n!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||n!=null))return;r=r!=null?""+In(r):"",n=n!=null?""+In(n):r,D||n===i.value||(i.value=n),i.defaultValue=n}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=D?i.checked:!!u,i.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w)}function Dy(i,n,r){n==="number"&&Vg(i.ownerDocument)===i||i.defaultValue===""+r||(i.defaultValue=""+r)}function Mu(i,n,r,u){if(i=i.options,n){n={};for(var p=0;p<r.length;p++)n["$"+r[p]]=!0;for(r=0;r<i.length;r++)p=n.hasOwnProperty("$"+i[r].value),i[r].selected!==p&&(i[r].selected=p),p&&u&&(i[r].defaultSelected=!0)}else{for(r=""+In(r),n=null,p=0;p<i.length;p++){if(i[p].value===r){i[p].selected=!0,u&&(i[p].defaultSelected=!0);return}n!==null||i[p].disabled||(n=i[p])}n!==null&&(n.selected=!0)}}function WA(i,n,r){if(n!=null&&(n=""+In(n),n!==i.value&&(i.value=n),r==null)){i.defaultValue!==n&&(i.defaultValue=n);return}i.defaultValue=r!=null?""+In(r):""}function QA(i,n,r,u){if(n==null){if(u!=null){if(r!=null)throw Error(s(92));if(rt(u)){if(1<u.length)throw Error(s(93));u=u[0]}r=u}r==null&&(r=""),n=r}r=In(n),i.defaultValue=r,u=i.textContent,u===r&&u!==""&&u!==null&&(i.value=u)}function Du(i,n){if(n){var r=i.firstChild;if(r&&r===i.lastChild&&r.nodeType===3){r.nodeValue=n;return}}i.textContent=n}var $T=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ZA(i,n,r){var u=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?i.setProperty(n,""):n==="float"?i.cssFloat="":i[n]="":u?i.setProperty(n,r):typeof r!="number"||r===0||$T.has(n)?n==="float"?i.cssFloat=r:i[n]=(""+r).trim():i[n]=r+"px"}function JA(i,n,r){if(n!=null&&typeof n!="object")throw Error(s(62));if(i=i.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||n!=null&&n.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var p in n)u=n[p],n.hasOwnProperty(p)&&r[p]!==u&&ZA(i,p,u)}else for(var y in n)n.hasOwnProperty(y)&&ZA(i,y,n[y])}function Ly(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var KT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),WT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yg(i){return WT.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Oy=null;function Ny(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Lu=null,Ou=null;function tS(i){var n=wi(i);if(n&&(i=n.stateNode)){var r=i[Ht]||null;t:switch(i=n.stateNode,n.type){case"input":if(My(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=i;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+jn(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var u=r[n];if(u!==i&&u.form===i.form){var p=u[Ht]||null;if(!p)throw Error(s(90));My(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(n=0;n<r.length;n++)u=r[n],u.form===i.form&&$A(u)}break t;case"textarea":WA(i,r.value,r.defaultValue);break t;case"select":n=r.value,n!=null&&Mu(i,!!r.multiple,n,!1)}}}var ky=!1;function eS(i,n,r){if(ky)return i(n,r);ky=!0;try{var u=i(n);return u}finally{if(ky=!1,(Lu!==null||Ou!==null)&&(Mp(),Lu&&(n=Lu,i=Ou,Ou=Lu=null,tS(n),i)))for(n=0;n<i.length;n++)tS(i[n])}}function Oh(i,n){var r=i.stateNode;if(r===null)return null;var u=r[Ht]||null;if(u===null)return null;r=u[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(r&&typeof r!="function")throw Error(s(231,n,typeof r));return r}var Py=!1;if(sn)try{var Nh={};Object.defineProperty(Nh,"passive",{get:function(){Py=!0}}),window.addEventListener("test",Nh,Nh),window.removeEventListener("test",Nh,Nh)}catch{Py=!1}var br=null,zy=null,Xg=null;function iS(){if(Xg)return Xg;var i,n=zy,r=n.length,u,p="value"in br?br.value:br.textContent,y=p.length;for(i=0;i<r&&n[i]===p[i];i++);var w=r-i;for(u=1;u<=w&&n[r-u]===p[y-u];u++);return Xg=p.slice(i,1<u?1-u:void 0)}function $g(i){var n=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&n===13&&(i=13)):i=n,i===10&&(i=13),32<=i||i===13?i:0}function Kg(){return!0}function nS(){return!1}function an(i){function n(r,u,p,y,w){this._reactName=r,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(r=i[D],this[D]=r?r(y):y[D]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Kg:nS,this.isPropagationStopped=nS,this}return Z(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Kg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Kg)},persist:function(){},isPersistent:Kg}),n}var Bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wg=an(Bl),kh=Z({},Bl,{view:0,detail:0}),QT=an(kh),Fy,Hy,Ph,Qg=Z({},kh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uy,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ph&&(Ph&&i.type==="mousemove"?(Fy=i.screenX-Ph.screenX,Hy=i.screenY-Ph.screenY):Hy=Fy=0,Ph=i),Fy)},movementY:function(i){return"movementY"in i?i.movementY:Hy}}),sS=an(Qg),ZT=Z({},Qg,{dataTransfer:0}),JT=an(ZT),tC=Z({},kh,{relatedTarget:0}),By=an(tC),eC=Z({},Bl,{animationName:0,elapsedTime:0,pseudoElement:0}),iC=an(eC),nC=Z({},Bl,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),sC=an(nC),aC=Z({},Bl,{data:0}),aS=an(aC),rC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uC(i){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(i):(i=oC[i])?!!n[i]:!1}function Uy(){return uC}var cC=Z({},kh,{key:function(i){if(i.key){var n=rC[i.key]||i.key;if(n!=="Unidentified")return n}return i.type==="keypress"?(i=$g(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?lC[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uy,charCode:function(i){return i.type==="keypress"?$g(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?$g(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),hC=an(cC),dC=Z({},Qg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rS=an(dC),fC=Z({},kh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uy}),gC=an(fC),pC=Z({},Bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),mC=an(pC),yC=Z({},Qg,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),vC=an(yC),bC=Z({},Bl,{newState:0,oldState:0}),AC=an(bC),SC=[9,13,27,32],Iy=sn&&"CompositionEvent"in window,zh=null;sn&&"documentMode"in document&&(zh=document.documentMode);var wC=sn&&"TextEvent"in window&&!zh,lS=sn&&(!Iy||zh&&8<zh&&11>=zh),oS=" ",uS=!1;function cS(i,n){switch(i){case"keyup":return SC.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hS(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Nu=!1;function EC(i,n){switch(i){case"compositionend":return hS(n);case"keypress":return n.which!==32?null:(uS=!0,oS);case"textInput":return i=n.data,i===oS&&uS?null:i;default:return null}}function _C(i,n){if(Nu)return i==="compositionend"||!Iy&&cS(i,n)?(i=iS(),Xg=zy=br=null,Nu=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return lS&&n.locale!=="ko"?null:n.data;default:return null}}var xC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dS(i){var n=i&&i.nodeName&&i.nodeName.toLowerCase();return n==="input"?!!xC[i.type]:n==="textarea"}function fS(i,n,r,u){Lu?Ou?Ou.push(u):Ou=[u]:Lu=u,n=kp(n,"onChange"),0<n.length&&(r=new Wg("onChange","change",null,r,u),i.push({event:r,listeners:n}))}var Fh=null,Hh=null;function TC(i){BE(i,0)}function Zg(i){var n=ga(i);if($A(n))return i}function gS(i,n){if(i==="change")return n}var pS=!1;if(sn){var jy;if(sn){var Gy="oninput"in document;if(!Gy){var mS=document.createElement("div");mS.setAttribute("oninput","return;"),Gy=typeof mS.oninput=="function"}jy=Gy}else jy=!1;pS=jy&&(!document.documentMode||9<document.documentMode)}function yS(){Fh&&(Fh.detachEvent("onpropertychange",vS),Hh=Fh=null)}function vS(i){if(i.propertyName==="value"&&Zg(Hh)){var n=[];fS(n,Hh,i,Ny(i)),eS(TC,n)}}function CC(i,n,r){i==="focusin"?(yS(),Fh=n,Hh=r,Fh.attachEvent("onpropertychange",vS)):i==="focusout"&&yS()}function RC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Zg(Hh)}function MC(i,n){if(i==="click")return Zg(n)}function DC(i,n){if(i==="input"||i==="change")return Zg(n)}function LC(i,n){return i===n&&(i!==0||1/i===1/n)||i!==i&&n!==n}var gn=typeof Object.is=="function"?Object.is:LC;function Bh(i,n){if(gn(i,n))return!0;if(typeof i!="object"||i===null||typeof n!="object"||n===null)return!1;var r=Object.keys(i),u=Object.keys(n);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var p=r[u];if(!Rh.call(n,p)||!gn(i[p],n[p]))return!1}return!0}function bS(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function AS(i,n){var r=bS(i);i=0;for(var u;r;){if(r.nodeType===3){if(u=i+r.textContent.length,i<=n&&u>=n)return{node:r,offset:n-i};i=u}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=bS(r)}}function SS(i,n){return i&&n?i===n?!0:i&&i.nodeType===3?!1:n&&n.nodeType===3?SS(i,n.parentNode):"contains"in i?i.contains(n):i.compareDocumentPosition?!!(i.compareDocumentPosition(n)&16):!1:!1}function wS(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var n=Vg(i.document);n instanceof i.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)i=n.contentWindow;else break;n=Vg(i.document)}return n}function qy(i){var n=i&&i.nodeName&&i.nodeName.toLowerCase();return n&&(n==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||n==="textarea"||i.contentEditable==="true")}function OC(i,n){var r=wS(n);n=i.focusedElem;var u=i.selectionRange;if(r!==n&&n&&n.ownerDocument&&SS(n.ownerDocument.documentElement,n)){if(u!==null&&qy(n)){if(i=u.start,r=u.end,r===void 0&&(r=i),"selectionStart"in n)n.selectionStart=i,n.selectionEnd=Math.min(r,n.value.length);else if(r=(i=n.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var p=n.textContent.length,y=Math.min(u.start,p);u=u.end===void 0?y:Math.min(u.end,p),!r.extend&&y>u&&(p=u,u=y,y=p),p=AS(n,y);var w=AS(n,u);p&&w&&(r.rangeCount!==1||r.anchorNode!==p.node||r.anchorOffset!==p.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),r.removeAllRanges(),y>u?(r.addRange(i),r.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),r.addRange(i)))}}for(i=[],r=n;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<i.length;n++)r=i[n],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var NC=sn&&"documentMode"in document&&11>=document.documentMode,ku=null,Vy=null,Uh=null,Yy=!1;function ES(i,n,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Yy||ku==null||ku!==Vg(u)||(u=ku,"selectionStart"in u&&qy(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Uh&&Bh(Uh,u)||(Uh=u,u=kp(Vy,"onSelect"),0<u.length&&(n=new Wg("onSelect","select",null,n,r),i.push({event:n,listeners:u}),n.target=ku)))}function Ul(i,n){var r={};return r[i.toLowerCase()]=n.toLowerCase(),r["Webkit"+i]="webkit"+n,r["Moz"+i]="moz"+n,r}var Pu={animationend:Ul("Animation","AnimationEnd"),animationiteration:Ul("Animation","AnimationIteration"),animationstart:Ul("Animation","AnimationStart"),transitionrun:Ul("Transition","TransitionRun"),transitionstart:Ul("Transition","TransitionStart"),transitioncancel:Ul("Transition","TransitionCancel"),transitionend:Ul("Transition","TransitionEnd")},Xy={},_S={};sn&&(_S=document.createElement("div").style,"AnimationEvent"in window||(delete Pu.animationend.animation,delete Pu.animationiteration.animation,delete Pu.animationstart.animation),"TransitionEvent"in window||delete Pu.transitionend.transition);function Il(i){if(Xy[i])return Xy[i];if(!Pu[i])return i;var n=Pu[i],r;for(r in n)if(n.hasOwnProperty(r)&&r in _S)return Xy[i]=n[r];return i}var xS=Il("animationend"),TS=Il("animationiteration"),CS=Il("animationstart"),kC=Il("transitionrun"),PC=Il("transitionstart"),zC=Il("transitioncancel"),RS=Il("transitionend"),MS=new Map,DS="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function gs(i,n){MS.set(i,n),ne(n,[i])}var Gn=[],zu=0,$y=0;function Jg(){for(var i=zu,n=$y=zu=0;n<i;){var r=Gn[n];Gn[n++]=null;var u=Gn[n];Gn[n++]=null;var p=Gn[n];Gn[n++]=null;var y=Gn[n];if(Gn[n++]=null,u!==null&&p!==null){var w=u.pending;w===null?p.next=p:(p.next=w.next,w.next=p),u.pending=p}y!==0&&LS(r,p,y)}}function tp(i,n,r,u){Gn[zu++]=i,Gn[zu++]=n,Gn[zu++]=r,Gn[zu++]=u,$y|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Ky(i,n,r,u){return tp(i,n,r,u),ep(i)}function Ar(i,n){return tp(i,null,null,n),ep(i)}function LS(i,n,r){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r);for(var p=!1,y=i.return;y!==null;)y.childLanes|=r,u=y.alternate,u!==null&&(u.childLanes|=r),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(p=!0)),i=y,y=y.return;p&&n!==null&&i.tag===3&&(y=i.stateNode,p=31-Pi(r),y=y.hiddenUpdates,i=y[p],i===null?y[p]=[n]:i.push(n),n.lane=r|536870912)}function ep(i){if(50<hd)throw hd=0,eb=null,Error(s(185));for(var n=i.return;n!==null;)i=n,n=i.return;return i.tag===3?i.stateNode:null}var Fu={},OS=new WeakMap;function qn(i,n){if(typeof i=="object"&&i!==null){var r=OS.get(i);return r!==void 0?r:(n={value:i,source:n,stack:nt(n)},OS.set(i,n),n)}return{value:i,source:n,stack:nt(n)}}var Hu=[],Bu=0,ip=null,np=0,Vn=[],Yn=0,jl=null,ya=1,va="";function Gl(i,n){Hu[Bu++]=np,Hu[Bu++]=ip,ip=i,np=n}function NS(i,n,r){Vn[Yn++]=ya,Vn[Yn++]=va,Vn[Yn++]=jl,jl=i;var u=ya;i=va;var p=32-Pi(u)-1;u&=~(1<<p),r+=1;var y=32-Pi(n)+p;if(30<y){var w=p-p%5;y=(u&(1<<w)-1).toString(32),u>>=w,p-=w,ya=1<<32-Pi(n)+p|r<<p|u,va=y+i}else ya=1<<y|r<<p|u,va=i}function Wy(i){i.return!==null&&(Gl(i,1),NS(i,1,0))}function Qy(i){for(;i===ip;)ip=Hu[--Bu],Hu[Bu]=null,np=Hu[--Bu],Hu[Bu]=null;for(;i===jl;)jl=Vn[--Yn],Vn[Yn]=null,va=Vn[--Yn],Vn[Yn]=null,ya=Vn[--Yn],Vn[Yn]=null}var Vi=null,Ei=null,le=!1,ps=null,Hs=!1,Zy=Error(s(519));function ql(i){var n=Error(s(418,""));throw Gh(qn(n,i)),Zy}function kS(i){var n=i.stateNode,r=i.type,u=i.memoizedProps;switch(n[vt]=i,n[Ht]=u,r){case"dialog":te("cancel",n),te("close",n);break;case"iframe":case"object":case"embed":te("load",n);break;case"video":case"audio":for(r=0;r<fd.length;r++)te(fd[r],n);break;case"source":te("error",n);break;case"img":case"image":case"link":te("error",n),te("load",n);break;case"details":te("toggle",n);break;case"input":te("invalid",n),KA(n,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),qg(n);break;case"select":te("invalid",n);break;case"textarea":te("invalid",n),QA(n,u.value,u.defaultValue,u.children),qg(n)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||u.suppressHydrationWarning===!0||GE(n.textContent,r)?(u.popover!=null&&(te("beforetoggle",n),te("toggle",n)),u.onScroll!=null&&te("scroll",n),u.onScrollEnd!=null&&te("scrollend",n),u.onClick!=null&&(n.onclick=Pp),n=!0):n=!1,n||ql(i)}function PS(i){for(Vi=i.return;Vi;)switch(Vi.tag){case 3:case 27:Hs=!0;return;case 5:case 13:Hs=!1;return;default:Vi=Vi.return}}function Ih(i){if(i!==Vi)return!1;if(!le)return PS(i),le=!0,!1;var n=!1,r;if((r=i.tag!==3&&i.tag!==27)&&((r=i.tag===5)&&(r=i.type,r=!(r!=="form"&&r!=="button")||vb(i.type,i.memoizedProps)),r=!r),r&&(n=!0),n&&Ei&&ql(i),PS(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));t:{for(i=i.nextSibling,n=0;i;){if(i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){Ei=ys(i.nextSibling);break t}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++;i=i.nextSibling}Ei=null}}else Ei=Vi?ys(i.stateNode.nextSibling):null;return!0}function jh(){Ei=Vi=null,le=!1}function Gh(i){ps===null?ps=[i]:ps.push(i)}var qh=Error(s(460)),zS=Error(s(474)),Jy={then:function(){}};function FS(i){return i=i.status,i==="fulfilled"||i==="rejected"}function sp(){}function HS(i,n,r){switch(r=i[r],r===void 0?i.push(n):r!==n&&(n.then(sp,sp),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw i=n.reason,i===qh?Error(s(483)):i;default:if(typeof n.status=="string")n.then(sp,sp);else{if(i=Se,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=n,i.status="pending",i.then(function(u){if(n.status==="pending"){var p=n;p.status="fulfilled",p.value=u}},function(u){if(n.status==="pending"){var p=n;p.status="rejected",p.reason=u}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw i=n.reason,i===qh?Error(s(483)):i}throw Vh=n,qh}}var Vh=null;function BS(){if(Vh===null)throw Error(s(459));var i=Vh;return Vh=null,i}var Uu=null,Yh=0;function ap(i){var n=Yh;return Yh+=1,Uu===null&&(Uu=[]),HS(Uu,i,n)}function Xh(i,n){n=n.props.ref,i.ref=n!==void 0?n:null}function rp(i,n){throw n.$$typeof===l?Error(s(525)):(i=Object.prototype.toString.call(n),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":i)))}function US(i){var n=i._init;return n(i._payload)}function IS(i){function n(I,H){if(i){var V=I.deletions;V===null?(I.deletions=[H],I.flags|=16):V.push(H)}}function r(I,H){if(!i)return null;for(;H!==null;)n(I,H),H=H.sibling;return null}function u(I){for(var H=new Map;I!==null;)I.key!==null?H.set(I.key,I):H.set(I.index,I),I=I.sibling;return H}function p(I,H){return I=Or(I,H),I.index=0,I.sibling=null,I}function y(I,H,V){return I.index=V,i?(V=I.alternate,V!==null?(V=V.index,V<H?(I.flags|=33554434,H):V):(I.flags|=33554434,H)):(I.flags|=1048576,H)}function w(I){return i&&I.alternate===null&&(I.flags|=33554434),I}function D(I,H,V,tt){return H===null||H.tag!==6?(H=Xv(V,I.mode,tt),H.return=I,H):(H=p(H,V),H.return=I,H)}function N(I,H,V,tt){var bt=V.type;return bt===f?Q(I,H,V.props.children,tt,V.key):H!==null&&(H.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===L&&US(bt)===H.type)?(H=p(H,V.props),Xh(H,V),H.return=I,H):(H=_p(V.type,V.key,V.props,null,I.mode,tt),Xh(H,V),H.return=I,H)}function B(I,H,V,tt){return H===null||H.tag!==4||H.stateNode.containerInfo!==V.containerInfo||H.stateNode.implementation!==V.implementation?(H=$v(V,I.mode,tt),H.return=I,H):(H=p(H,V.children||[]),H.return=I,H)}function Q(I,H,V,tt,bt){return H===null||H.tag!==7?(H=to(V,I.mode,tt,bt),H.return=I,H):(H=p(H,V),H.return=I,H)}function st(I,H,V){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Xv(""+H,I.mode,V),H.return=I,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case o:return V=_p(H.type,H.key,H.props,null,I.mode,V),Xh(V,H),V.return=I,V;case d:return H=$v(H,I.mode,V),H.return=I,H;case L:var tt=H._init;return H=tt(H._payload),st(I,H,V)}if(rt(H)||k(H))return H=to(H,I.mode,V,null),H.return=I,H;if(typeof H.then=="function")return st(I,ap(H),V);if(H.$$typeof===A)return st(I,Sp(I,H),V);rp(I,H)}return null}function X(I,H,V,tt){var bt=H!==null?H.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return bt!==null?null:D(I,H,""+V,tt);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case o:return V.key===bt?N(I,H,V,tt):null;case d:return V.key===bt?B(I,H,V,tt):null;case L:return bt=V._init,V=bt(V._payload),X(I,H,V,tt)}if(rt(V)||k(V))return bt!==null?null:Q(I,H,V,tt,null);if(typeof V.then=="function")return X(I,H,ap(V),tt);if(V.$$typeof===A)return X(I,H,Sp(I,V),tt);rp(I,V)}return null}function W(I,H,V,tt,bt){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return I=I.get(V)||null,D(H,I,""+tt,bt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case o:return I=I.get(tt.key===null?V:tt.key)||null,N(H,I,tt,bt);case d:return I=I.get(tt.key===null?V:tt.key)||null,B(H,I,tt,bt);case L:var $t=tt._init;return tt=$t(tt._payload),W(I,H,V,tt,bt)}if(rt(tt)||k(tt))return I=I.get(V)||null,Q(H,I,tt,bt,null);if(typeof tt.then=="function")return W(I,H,V,ap(tt),bt);if(tt.$$typeof===A)return W(I,H,V,Sp(H,tt),bt);rp(H,tt)}return null}function _t(I,H,V,tt){for(var bt=null,$t=null,Ct=H,Ft=H=0,hi=null;Ct!==null&&Ft<V.length;Ft++){Ct.index>Ft?(hi=Ct,Ct=null):hi=Ct.sibling;var oe=X(I,Ct,V[Ft],tt);if(oe===null){Ct===null&&(Ct=hi);break}i&&Ct&&oe.alternate===null&&n(I,Ct),H=y(oe,H,Ft),$t===null?bt=oe:$t.sibling=oe,$t=oe,Ct=hi}if(Ft===V.length)return r(I,Ct),le&&Gl(I,Ft),bt;if(Ct===null){for(;Ft<V.length;Ft++)Ct=st(I,V[Ft],tt),Ct!==null&&(H=y(Ct,H,Ft),$t===null?bt=Ct:$t.sibling=Ct,$t=Ct);return le&&Gl(I,Ft),bt}for(Ct=u(Ct);Ft<V.length;Ft++)hi=W(Ct,I,Ft,V[Ft],tt),hi!==null&&(i&&hi.alternate!==null&&Ct.delete(hi.key===null?Ft:hi.key),H=y(hi,H,Ft),$t===null?bt=hi:$t.sibling=hi,$t=hi);return i&&Ct.forEach(function(Br){return n(I,Br)}),le&&Gl(I,Ft),bt}function Ut(I,H,V,tt){if(V==null)throw Error(s(151));for(var bt=null,$t=null,Ct=H,Ft=H=0,hi=null,oe=V.next();Ct!==null&&!oe.done;Ft++,oe=V.next()){Ct.index>Ft?(hi=Ct,Ct=null):hi=Ct.sibling;var Br=X(I,Ct,oe.value,tt);if(Br===null){Ct===null&&(Ct=hi);break}i&&Ct&&Br.alternate===null&&n(I,Ct),H=y(Br,H,Ft),$t===null?bt=Br:$t.sibling=Br,$t=Br,Ct=hi}if(oe.done)return r(I,Ct),le&&Gl(I,Ft),bt;if(Ct===null){for(;!oe.done;Ft++,oe=V.next())oe=st(I,oe.value,tt),oe!==null&&(H=y(oe,H,Ft),$t===null?bt=oe:$t.sibling=oe,$t=oe);return le&&Gl(I,Ft),bt}for(Ct=u(Ct);!oe.done;Ft++,oe=V.next())oe=W(Ct,I,Ft,oe.value,tt),oe!==null&&(i&&oe.alternate!==null&&Ct.delete(oe.key===null?Ft:oe.key),H=y(oe,H,Ft),$t===null?bt=oe:$t.sibling=oe,$t=oe);return i&&Ct.forEach(function(WR){return n(I,WR)}),le&&Gl(I,Ft),bt}function Ue(I,H,V,tt){if(typeof V=="object"&&V!==null&&V.type===f&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case o:t:{for(var bt=V.key;H!==null;){if(H.key===bt){if(bt=V.type,bt===f){if(H.tag===7){r(I,H.sibling),tt=p(H,V.props.children),tt.return=I,I=tt;break t}}else if(H.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===L&&US(bt)===H.type){r(I,H.sibling),tt=p(H,V.props),Xh(tt,V),tt.return=I,I=tt;break t}r(I,H);break}else n(I,H);H=H.sibling}V.type===f?(tt=to(V.props.children,I.mode,tt,V.key),tt.return=I,I=tt):(tt=_p(V.type,V.key,V.props,null,I.mode,tt),Xh(tt,V),tt.return=I,I=tt)}return w(I);case d:t:{for(bt=V.key;H!==null;){if(H.key===bt)if(H.tag===4&&H.stateNode.containerInfo===V.containerInfo&&H.stateNode.implementation===V.implementation){r(I,H.sibling),tt=p(H,V.children||[]),tt.return=I,I=tt;break t}else{r(I,H);break}else n(I,H);H=H.sibling}tt=$v(V,I.mode,tt),tt.return=I,I=tt}return w(I);case L:return bt=V._init,V=bt(V._payload),Ue(I,H,V,tt)}if(rt(V))return _t(I,H,V,tt);if(k(V)){if(bt=k(V),typeof bt!="function")throw Error(s(150));return V=bt.call(V),Ut(I,H,V,tt)}if(typeof V.then=="function")return Ue(I,H,ap(V),tt);if(V.$$typeof===A)return Ue(I,H,Sp(I,V),tt);rp(I,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,H!==null&&H.tag===6?(r(I,H.sibling),tt=p(H,V),tt.return=I,I=tt):(r(I,H),tt=Xv(V,I.mode,tt),tt.return=I,I=tt),w(I)):r(I,H)}return function(I,H,V,tt){try{Yh=0;var bt=Ue(I,H,V,tt);return Uu=null,bt}catch(Ct){if(Ct===qh)throw Ct;var $t=Wn(29,Ct,null,I.mode);return $t.lanes=tt,$t.return=I,$t}finally{}}}var Vl=IS(!0),jS=IS(!1),Iu=ie(null),lp=ie(0);function GS(i,n){i=Ma,Wt(lp,i),Wt(Iu,n),Ma=i|n.baseLanes}function tv(){Wt(lp,Ma),Wt(Iu,Iu.current)}function ev(){Ma=lp.current,Xt(Iu),Xt(lp)}var Xn=ie(null),Bs=null;function Sr(i){var n=i.alternate;Wt(ii,ii.current&1),Wt(Xn,i),Bs===null&&(n===null||Iu.current!==null||n.memoizedState!==null)&&(Bs=i)}function qS(i){if(i.tag===22){if(Wt(ii,ii.current),Wt(Xn,i),Bs===null){var n=i.alternate;n!==null&&n.memoizedState!==null&&(Bs=i)}}else wr()}function wr(){Wt(ii,ii.current),Wt(Xn,Xn.current)}function ba(i){Xt(Xn),Bs===i&&(Bs=null),Xt(ii)}var ii=ie(0);function op(i){for(var n=i;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break;for(;n.sibling===null;){if(n.return===null||n.return===i)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var FC=typeof AbortController<"u"?AbortController:function(){var i=[],n=this.signal={aborted:!1,addEventListener:function(r,u){i.push(u)}};this.abort=function(){n.aborted=!0,i.forEach(function(r){return r()})}},HC=h.unstable_scheduleCallback,BC=h.unstable_NormalPriority,ni={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function iv(){return{controller:new FC,data:new Map,refCount:0}}function $h(i){i.refCount--,i.refCount===0&&HC(BC,function(){i.controller.abort()})}var Kh=null,nv=0,ju=0,Gu=null;function UC(i,n){if(Kh===null){var r=Kh=[];nv=0,ju=ub(),Gu={status:"pending",value:void 0,then:function(u){r.push(u)}}}return nv++,n.then(VS,VS),n}function VS(){if(--nv===0&&Kh!==null){Gu!==null&&(Gu.status="fulfilled");var i=Kh;Kh=null,ju=0,Gu=null;for(var n=0;n<i.length;n++)(0,i[n])()}}function IC(i,n){var r=[],u={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return i.then(function(){u.status="fulfilled",u.value=n;for(var p=0;p<r.length;p++)(0,r[p])(n)},function(p){for(u.status="rejected",u.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),u}var YS=G.S;G.S=function(i,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&UC(i,n),YS!==null&&YS(i,n)};var Yl=ie(null);function sv(){var i=Yl.current;return i!==null?i:Se.pooledCache}function up(i,n){n===null?Wt(Yl,Yl.current):Wt(Yl,n.pool)}function XS(){var i=sv();return i===null?null:{parent:ni._currentValue,pool:i}}var Er=0,Yt=null,ge=null,Xe=null,cp=!1,qu=!1,Xl=!1,hp=0,Wh=0,Vu=null,jC=0;function je(){throw Error(s(321))}function av(i,n){if(n===null)return!1;for(var r=0;r<n.length&&r<i.length;r++)if(!gn(i[r],n[r]))return!1;return!0}function rv(i,n,r,u,p,y){return Er=y,Yt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,G.H=i===null||i.memoizedState===null?$l:_r,Xl=!1,y=r(u,p),Xl=!1,qu&&(y=KS(n,r,u,p)),$S(i),y}function $S(i){G.H=Us;var n=ge!==null&&ge.next!==null;if(Er=0,Xe=ge=Yt=null,cp=!1,Wh=0,Vu=null,n)throw Error(s(300));i===null||ui||(i=i.dependencies,i!==null&&Ap(i)&&(ui=!0))}function KS(i,n,r,u){Yt=i;var p=0;do{if(qu&&(Vu=null),Wh=0,qu=!1,25<=p)throw Error(s(301));if(p+=1,Xe=ge=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}G.H=Kl,y=n(r,u)}while(qu);return y}function GC(){var i=G.H,n=i.useState()[0];return n=typeof n.then=="function"?Qh(n):n,i=i.useState()[0],(ge!==null?ge.memoizedState:null)!==i&&(Yt.flags|=1024),n}function lv(){var i=hp!==0;return hp=0,i}function ov(i,n,r){n.updateQueue=i.updateQueue,n.flags&=-2053,i.lanes&=~r}function uv(i){if(cp){for(i=i.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}cp=!1}Er=0,Xe=ge=Yt=null,qu=!1,Wh=hp=0,Vu=null}function rn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Yt.memoizedState=Xe=i:Xe=Xe.next=i,Xe}function $e(){if(ge===null){var i=Yt.alternate;i=i!==null?i.memoizedState:null}else i=ge.next;var n=Xe===null?Yt.memoizedState:Xe.next;if(n!==null)Xe=n,ge=i;else{if(i===null)throw Yt.alternate===null?Error(s(467)):Error(s(310));ge=i,i={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},Xe===null?Yt.memoizedState=Xe=i:Xe=Xe.next=i}return Xe}var dp;dp=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Qh(i){var n=Wh;return Wh+=1,Vu===null&&(Vu=[]),i=HS(Vu,i,n),n=Yt,(Xe===null?n.memoizedState:Xe.next)===null&&(n=n.alternate,G.H=n===null||n.memoizedState===null?$l:_r),i}function fp(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Qh(i);if(i.$$typeof===A)return zi(i)}throw Error(s(438,String(i)))}function cv(i){var n=null,r=Yt.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var u=Yt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(n={data:u.data.map(function(p){return p.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=dp(),Yt.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(i),u=0;u<i;u++)r[u]=P;return n.index++,r}function Aa(i,n){return typeof n=="function"?n(i):n}function gp(i){var n=$e();return hv(n,ge,i)}function hv(i,n,r){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=r;var p=i.baseQueue,y=u.pending;if(y!==null){if(p!==null){var w=p.next;p.next=y.next,y.next=w}n.baseQueue=p=y,u.pending=null}if(y=i.baseState,p===null)i.memoizedState=y;else{n=p.next;var D=w=null,N=null,B=n,Q=!1;do{var st=B.lane&-536870913;if(st!==B.lane?(se&st)===st:(Er&st)===st){var X=B.revertLane;if(X===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),st===ju&&(Q=!0);else if((Er&X)===X){B=B.next,X===ju&&(Q=!0);continue}else st={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(D=N=st,w=y):N=N.next=st,Yt.lanes|=X,Nr|=X;st=B.action,Xl&&r(y,st),y=B.hasEagerState?B.eagerState:r(y,st)}else X={lane:st,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(D=N=X,w=y):N=N.next=X,Yt.lanes|=st,Nr|=st;B=B.next}while(B!==null&&B!==n);if(N===null?w=y:N.next=D,!gn(y,i.memoizedState)&&(ui=!0,Q&&(r=Gu,r!==null)))throw r;i.memoizedState=y,i.baseState=w,i.baseQueue=N,u.lastRenderedState=y}return p===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function dv(i){var n=$e(),r=n.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=i;var u=r.dispatch,p=r.pending,y=n.memoizedState;if(p!==null){r.pending=null;var w=p=p.next;do y=i(y,w.action),w=w.next;while(w!==p);gn(y,n.memoizedState)||(ui=!0),n.memoizedState=y,n.baseQueue===null&&(n.baseState=y),r.lastRenderedState=y}return[y,u]}function WS(i,n,r){var u=Yt,p=$e(),y=le;if(y){if(r===void 0)throw Error(s(407));r=r()}else r=n();var w=!gn((ge||p).memoizedState,r);if(w&&(p.memoizedState=r,ui=!0),p=p.queue,pv(JS.bind(null,u,p,i),[i]),p.getSnapshot!==n||w||Xe!==null&&Xe.memoizedState.tag&1){if(u.flags|=2048,Yu(9,ZS.bind(null,u,p,r,n),{destroy:void 0},null),Se===null)throw Error(s(349));y||(Er&60)!==0||QS(u,n,r)}return r}function QS(i,n,r){i.flags|=16384,i={getSnapshot:n,value:r},n=Yt.updateQueue,n===null?(n=dp(),Yt.updateQueue=n,n.stores=[i]):(r=n.stores,r===null?n.stores=[i]:r.push(i))}function ZS(i,n,r,u){n.value=r,n.getSnapshot=u,tw(n)&&ew(i)}function JS(i,n,r){return r(function(){tw(n)&&ew(i)})}function tw(i){var n=i.getSnapshot;i=i.value;try{var r=n();return!gn(i,r)}catch{return!0}}function ew(i){var n=Ar(i,2);n!==null&&Yi(n,i,2)}function fv(i){var n=rn();if(typeof i=="function"){var r=i;if(i=r(),Xl){fn(!0);try{r()}finally{fn(!1)}}}return n.memoizedState=n.baseState=i,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:i},n}function iw(i,n,r,u){return i.baseState=r,hv(i,ge,typeof u=="function"?u:Aa)}function qC(i,n,r,u,p){if(yp(i))throw Error(s(485));if(i=n.action,i!==null){var y={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};G.T!==null?r(!0):y.isTransition=!1,u(y),r=n.pending,r===null?(y.next=n.pending=y,nw(n,y)):(y.next=r.next,n.pending=r.next=y)}}function nw(i,n){var r=n.action,u=n.payload,p=i.state;if(n.isTransition){var y=G.T,w={};G.T=w;try{var D=r(p,u),N=G.S;N!==null&&N(w,D),sw(i,n,D)}catch(B){gv(i,n,B)}finally{G.T=y}}else try{y=r(p,u),sw(i,n,y)}catch(B){gv(i,n,B)}}function sw(i,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){aw(i,n,u)},function(u){return gv(i,n,u)}):aw(i,n,r)}function aw(i,n,r){n.status="fulfilled",n.value=r,rw(n),i.state=r,n=i.pending,n!==null&&(r=n.next,r===n?i.pending=null:(r=r.next,n.next=r,nw(i,r)))}function gv(i,n,r){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do n.status="rejected",n.reason=r,rw(n),n=n.next;while(n!==u)}i.action=null}function rw(i){i=i.listeners;for(var n=0;n<i.length;n++)(0,i[n])()}function lw(i,n){return n}function ow(i,n){if(le){var r=Se.formState;if(r!==null){t:{var u=Yt;if(le){if(Ei){e:{for(var p=Ei,y=Hs;p.nodeType!==8;){if(!y){p=null;break e}if(p=ys(p.nextSibling),p===null){p=null;break e}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Ei=ys(p.nextSibling),u=p.data==="F!";break t}}ql(u)}u=!1}u&&(n=r[0])}}return r=rn(),r.memoizedState=r.baseState=n,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lw,lastRenderedState:n},r.queue=u,r=Tw.bind(null,Yt,u),u.dispatch=r,u=fv(!1),y=Av.bind(null,Yt,!1,u.queue),u=rn(),p={state:n,dispatch:null,action:i,pending:null},u.queue=p,r=qC.bind(null,Yt,p,y,r),p.dispatch=r,u.memoizedState=i,[n,r,!1]}function uw(i){var n=$e();return cw(n,ge,i)}function cw(i,n,r){n=hv(i,n,lw)[0],i=gp(Aa)[0],n=typeof n=="object"&&n!==null&&typeof n.then=="function"?Qh(n):n;var u=$e(),p=u.queue,y=p.dispatch;return r!==u.memoizedState&&(Yt.flags|=2048,Yu(9,VC.bind(null,p,r),{destroy:void 0},null)),[n,y,i]}function VC(i,n){i.action=n}function hw(i){var n=$e(),r=ge;if(r!==null)return cw(n,r,i);$e(),n=n.memoizedState,r=$e();var u=r.queue.dispatch;return r.memoizedState=i,[n,u,!1]}function Yu(i,n,r,u){return i={tag:i,create:n,inst:r,deps:u,next:null},n=Yt.updateQueue,n===null&&(n=dp(),Yt.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=i.next=i:(u=r.next,r.next=i,i.next=u,n.lastEffect=i),i}function dw(){return $e().memoizedState}function pp(i,n,r,u){var p=rn();Yt.flags|=i,p.memoizedState=Yu(1|n,r,{destroy:void 0},u===void 0?null:u)}function mp(i,n,r,u){var p=$e();u=u===void 0?null:u;var y=p.memoizedState.inst;ge!==null&&u!==null&&av(u,ge.memoizedState.deps)?p.memoizedState=Yu(n,r,y,u):(Yt.flags|=i,p.memoizedState=Yu(1|n,r,y,u))}function fw(i,n){pp(8390656,8,i,n)}function pv(i,n){mp(2048,8,i,n)}function gw(i,n){return mp(4,2,i,n)}function pw(i,n){return mp(4,4,i,n)}function mw(i,n){if(typeof n=="function"){i=i();var r=n(i);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return i=i(),n.current=i,function(){n.current=null}}function yw(i,n,r){r=r!=null?r.concat([i]):null,mp(4,4,mw.bind(null,n,i),r)}function mv(){}function vw(i,n){var r=$e();n=n===void 0?null:n;var u=r.memoizedState;return n!==null&&av(n,u[1])?u[0]:(r.memoizedState=[i,n],i)}function bw(i,n){var r=$e();n=n===void 0?null:n;var u=r.memoizedState;if(n!==null&&av(n,u[1]))return u[0];if(u=i(),Xl){fn(!0);try{i()}finally{fn(!1)}}return r.memoizedState=[u,n],u}function yv(i,n,r){return r===void 0||(Er&1073741824)!==0?i.memoizedState=n:(i.memoizedState=r,i=SE(),Yt.lanes|=i,Nr|=i,r)}function Aw(i,n,r,u){return gn(r,n)?r:Iu.current!==null?(i=yv(i,r,u),gn(i,n)||(ui=!0),i):(Er&42)===0?(ui=!0,i.memoizedState=r):(i=SE(),Yt.lanes|=i,Nr|=i,n)}function Sw(i,n,r,u,p){var y=ot.p;ot.p=y!==0&&8>y?y:8;var w=G.T,D={};G.T=D,Av(i,!1,n,r);try{var N=p(),B=G.S;if(B!==null&&B(D,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Q=IC(N,u);Zh(i,n,Q,vn(i))}else Zh(i,n,u,vn(i))}catch(st){Zh(i,n,{then:function(){},status:"rejected",reason:st},vn())}finally{ot.p=y,G.T=w}}function YC(){}function vv(i,n,r,u){if(i.tag!==5)throw Error(s(476));var p=ww(i).queue;Sw(i,p,n,Ot,r===null?YC:function(){return Ew(i),r(u)})}function ww(i){var n=i.memoizedState;if(n!==null)return n;n={memoizedState:Ot,baseState:Ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:Ot},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:r},next:null},i.memoizedState=n,i=i.alternate,i!==null&&(i.memoizedState=n),n}function Ew(i){var n=ww(i).next.queue;Zh(i,n,{},vn())}function bv(){return zi(vd)}function _w(){return $e().memoizedState}function xw(){return $e().memoizedState}function XC(i){for(var n=i.return;n!==null;){switch(n.tag){case 24:case 3:var r=vn();i=Cr(r);var u=Rr(n,i,r);u!==null&&(Yi(u,n,r),ed(u,n,r)),n={cache:iv()},i.payload=n;return}n=n.return}}function $C(i,n,r){var u=vn();r={lane:u,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},yp(i)?Cw(n,r):(r=Ky(i,n,r,u),r!==null&&(Yi(r,i,u),Rw(r,n,u)))}function Tw(i,n,r){var u=vn();Zh(i,n,r,u)}function Zh(i,n,r,u){var p={lane:u,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(yp(i))Cw(n,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=n.lastRenderedReducer,y!==null))try{var w=n.lastRenderedState,D=y(w,r);if(p.hasEagerState=!0,p.eagerState=D,gn(D,w))return tp(i,n,p,0),Se===null&&Jg(),!1}catch{}finally{}if(r=Ky(i,n,p,u),r!==null)return Yi(r,i,u),Rw(r,n,u),!0}return!1}function Av(i,n,r,u){if(u={lane:2,revertLane:ub(),action:u,hasEagerState:!1,eagerState:null,next:null},yp(i)){if(n)throw Error(s(479))}else n=Ky(i,r,u,2),n!==null&&Yi(n,i,2)}function yp(i){var n=i.alternate;return i===Yt||n!==null&&n===Yt}function Cw(i,n){qu=cp=!0;var r=i.pending;r===null?n.next=n:(n.next=r.next,r.next=n),i.pending=n}function Rw(i,n,r){if((r&4194176)!==0){var u=n.lanes;u&=i.pendingLanes,r|=u,n.lanes=r,Lt(i,r)}}var Us={readContext:zi,use:fp,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useLayoutEffect:je,useInsertionEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useSyncExternalStore:je,useId:je};Us.useCacheRefresh=je,Us.useMemoCache=je,Us.useHostTransitionStatus=je,Us.useFormState=je,Us.useActionState=je,Us.useOptimistic=je;var $l={readContext:zi,use:fp,useCallback:function(i,n){return rn().memoizedState=[i,n===void 0?null:n],i},useContext:zi,useEffect:fw,useImperativeHandle:function(i,n,r){r=r!=null?r.concat([i]):null,pp(4194308,4,mw.bind(null,n,i),r)},useLayoutEffect:function(i,n){return pp(4194308,4,i,n)},useInsertionEffect:function(i,n){pp(4,2,i,n)},useMemo:function(i,n){var r=rn();n=n===void 0?null:n;var u=i();if(Xl){fn(!0);try{i()}finally{fn(!1)}}return r.memoizedState=[u,n],u},useReducer:function(i,n,r){var u=rn();if(r!==void 0){var p=r(n);if(Xl){fn(!0);try{r(n)}finally{fn(!1)}}}else p=n;return u.memoizedState=u.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},u.queue=i,i=i.dispatch=$C.bind(null,Yt,i),[u.memoizedState,i]},useRef:function(i){var n=rn();return i={current:i},n.memoizedState=i},useState:function(i){i=fv(i);var n=i.queue,r=Tw.bind(null,Yt,n);return n.dispatch=r,[i.memoizedState,r]},useDebugValue:mv,useDeferredValue:function(i,n){var r=rn();return yv(r,i,n)},useTransition:function(){var i=fv(!1);return i=Sw.bind(null,Yt,i.queue,!0,!1),rn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,n,r){var u=Yt,p=rn();if(le){if(r===void 0)throw Error(s(407));r=r()}else{if(r=n(),Se===null)throw Error(s(349));(se&60)!==0||QS(u,n,r)}p.memoizedState=r;var y={value:r,getSnapshot:n};return p.queue=y,fw(JS.bind(null,u,y,i),[i]),u.flags|=2048,Yu(9,ZS.bind(null,u,y,r,n),{destroy:void 0},null),r},useId:function(){var i=rn(),n=Se.identifierPrefix;if(le){var r=va,u=ya;r=(u&~(1<<32-Pi(u)-1)).toString(32)+r,n=":"+n+"R"+r,r=hp++,0<r&&(n+="H"+r.toString(32)),n+=":"}else r=jC++,n=":"+n+"r"+r.toString(32)+":";return i.memoizedState=n},useCacheRefresh:function(){return rn().memoizedState=XC.bind(null,Yt)}};$l.useMemoCache=cv,$l.useHostTransitionStatus=bv,$l.useFormState=ow,$l.useActionState=ow,$l.useOptimistic=function(i){var n=rn();n.memoizedState=n.baseState=i;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Av.bind(null,Yt,!0,r),r.dispatch=n,[i,n]};var _r={readContext:zi,use:fp,useCallback:vw,useContext:zi,useEffect:pv,useImperativeHandle:yw,useInsertionEffect:gw,useLayoutEffect:pw,useMemo:bw,useReducer:gp,useRef:dw,useState:function(){return gp(Aa)},useDebugValue:mv,useDeferredValue:function(i,n){var r=$e();return Aw(r,ge.memoizedState,i,n)},useTransition:function(){var i=gp(Aa)[0],n=$e().memoizedState;return[typeof i=="boolean"?i:Qh(i),n]},useSyncExternalStore:WS,useId:_w};_r.useCacheRefresh=xw,_r.useMemoCache=cv,_r.useHostTransitionStatus=bv,_r.useFormState=uw,_r.useActionState=uw,_r.useOptimistic=function(i,n){var r=$e();return iw(r,ge,i,n)};var Kl={readContext:zi,use:fp,useCallback:vw,useContext:zi,useEffect:pv,useImperativeHandle:yw,useInsertionEffect:gw,useLayoutEffect:pw,useMemo:bw,useReducer:dv,useRef:dw,useState:function(){return dv(Aa)},useDebugValue:mv,useDeferredValue:function(i,n){var r=$e();return ge===null?yv(r,i,n):Aw(r,ge.memoizedState,i,n)},useTransition:function(){var i=dv(Aa)[0],n=$e().memoizedState;return[typeof i=="boolean"?i:Qh(i),n]},useSyncExternalStore:WS,useId:_w};Kl.useCacheRefresh=xw,Kl.useMemoCache=cv,Kl.useHostTransitionStatus=bv,Kl.useFormState=hw,Kl.useActionState=hw,Kl.useOptimistic=function(i,n){var r=$e();return ge!==null?iw(r,ge,i,n):(r.baseState=i,[i,r.queue.dispatch])};function Sv(i,n,r,u){n=i.memoizedState,r=r(u,n),r=r==null?n:Z({},n,r),i.memoizedState=r,i.lanes===0&&(i.updateQueue.baseState=r)}var wv={isMounted:function(i){return(i=i._reactInternals)?dt(i)===i:!1},enqueueSetState:function(i,n,r){i=i._reactInternals;var u=vn(),p=Cr(u);p.payload=n,r!=null&&(p.callback=r),n=Rr(i,p,u),n!==null&&(Yi(n,i,u),ed(n,i,u))},enqueueReplaceState:function(i,n,r){i=i._reactInternals;var u=vn(),p=Cr(u);p.tag=1,p.payload=n,r!=null&&(p.callback=r),n=Rr(i,p,u),n!==null&&(Yi(n,i,u),ed(n,i,u))},enqueueForceUpdate:function(i,n){i=i._reactInternals;var r=vn(),u=Cr(r);u.tag=2,n!=null&&(u.callback=n),n=Rr(i,u,r),n!==null&&(Yi(n,i,r),ed(n,i,r))}};function Mw(i,n,r,u,p,y,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,y,w):n.prototype&&n.prototype.isPureReactComponent?!Bh(r,u)||!Bh(p,y):!0}function Dw(i,n,r,u){i=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,u),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,u),n.state!==i&&wv.enqueueReplaceState(n,n.state,null)}function Wl(i,n){var r=n;if("ref"in n){r={};for(var u in n)u!=="ref"&&(r[u]=n[u])}if(i=i.defaultProps){r===n&&(r=Z({},r));for(var p in i)r[p]===void 0&&(r[p]=i[p])}return r}var vp=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Lw(i){vp(i)}function Ow(i){console.error(i)}function Nw(i){vp(i)}function bp(i,n){try{var r=i.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(u){setTimeout(function(){throw u})}}function kw(i,n,r){try{var u=i.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Ev(i,n,r){return r=Cr(r),r.tag=3,r.payload={element:null},r.callback=function(){bp(i,n)},r}function Pw(i){return i=Cr(i),i.tag=3,i}function zw(i,n,r,u){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;i.payload=function(){return p(y)},i.callback=function(){kw(n,r,u)}}var w=r.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){kw(n,r,u),typeof p!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var D=u.stack;this.componentDidCatch(u.value,{componentStack:D!==null?D:""})})}function KC(i,n,r,u,p){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(n=r.alternate,n!==null&&td(n,r,p,!0),r=Xn.current,r!==null){switch(r.tag){case 13:return Bs===null?sb():r.alternate===null&&Be===0&&(Be=3),r.flags&=-257,r.flags|=65536,r.lanes=p,u===Jy?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([u]):n.add(u),rb(i,u,p)),!1;case 22:return r.flags|=65536,u===Jy?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([u]):r.add(u)),rb(i,u,p)),!1}throw Error(s(435,r.tag))}return rb(i,u,p),sb(),!1}if(le)return n=Xn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=p,u!==Zy&&(i=Error(s(422),{cause:u}),Gh(qn(i,r)))):(u!==Zy&&(n=Error(s(423),{cause:u}),Gh(qn(n,r))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,u=qn(u,r),p=Ev(i.stateNode,u,p),Hv(i,p),Be!==4&&(Be=2)),!1;var y=Error(s(520),{cause:u});if(y=qn(y,r),ud===null?ud=[y]:ud.push(y),Be!==4&&(Be=2),n===null)return!0;u=qn(u,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,i=p&-p,r.lanes|=i,i=Ev(r.stateNode,u,i),Hv(r,i),!1;case 1:if(n=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(kr===null||!kr.has(y))))return r.flags|=65536,p&=-p,r.lanes|=p,p=Pw(p),zw(p,i,r,u),Hv(r,p),!1}r=r.return}while(r!==null);return!1}var Fw=Error(s(461)),ui=!1;function _i(i,n,r,u){n.child=i===null?jS(n,null,r,u):Vl(n,i.child,r,u)}function Hw(i,n,r,u,p){r=r.render;var y=n.ref;if("ref"in u){var w={};for(var D in u)D!=="ref"&&(w[D]=u[D])}else w=u;return Zl(n),u=rv(i,n,r,w,y,p),D=lv(),i!==null&&!ui?(ov(i,n,p),Sa(i,n,p)):(le&&D&&Wy(n),n.flags|=1,_i(i,n,u,p),n.child)}function Bw(i,n,r,u,p){if(i===null){var y=r.type;return typeof y=="function"&&!Yv(y)&&y.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=y,Uw(i,n,y,u,p)):(i=_p(r.type,null,u,n,n.mode,p),i.ref=n.ref,i.return=n,n.child=i)}if(y=i.child,!Ov(i,p)){var w=y.memoizedProps;if(r=r.compare,r=r!==null?r:Bh,r(w,u)&&i.ref===n.ref)return Sa(i,n,p)}return n.flags|=1,i=Or(y,u),i.ref=n.ref,i.return=n,n.child=i}function Uw(i,n,r,u,p){if(i!==null){var y=i.memoizedProps;if(Bh(y,u)&&i.ref===n.ref)if(ui=!1,n.pendingProps=u=y,Ov(i,p))(i.flags&131072)!==0&&(ui=!0);else return n.lanes=i.lanes,Sa(i,n,p)}return _v(i,n,r,u,p)}function Iw(i,n,r){var u=n.pendingProps,p=u.children,y=(n.stateNode._pendingVisibility&2)!==0,w=i!==null?i.memoizedState:null;if(Jh(i,n),u.mode==="hidden"||y){if((n.flags&128)!==0){if(u=w!==null?w.baseLanes|r:r,i!==null){for(p=n.child=i.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;n.childLanes=y&~u}else n.childLanes=0,n.child=null;return jw(i,n,u,r)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},i!==null&&up(n,w!==null?w.cachePool:null),w!==null?GS(n,w):tv(),qS(n);else return n.lanes=n.childLanes=536870912,jw(i,n,w!==null?w.baseLanes|r:r,r)}else w!==null?(up(n,w.cachePool),GS(n,w),wr(),n.memoizedState=null):(i!==null&&up(n,null),tv(),wr());return _i(i,n,p,r),n.child}function jw(i,n,r,u){var p=sv();return p=p===null?null:{parent:ni._currentValue,pool:p},n.memoizedState={baseLanes:r,cachePool:p},i!==null&&up(n,null),tv(),qS(n),i!==null&&td(i,n,u,!0),null}function Jh(i,n){var r=n.ref;if(r===null)i!==null&&i.ref!==null&&(n.flags|=2097664);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(i===null||i.ref!==r)&&(n.flags|=2097664)}}function _v(i,n,r,u,p){return Zl(n),r=rv(i,n,r,u,void 0,p),u=lv(),i!==null&&!ui?(ov(i,n,p),Sa(i,n,p)):(le&&u&&Wy(n),n.flags|=1,_i(i,n,r,p),n.child)}function Gw(i,n,r,u,p,y){return Zl(n),n.updateQueue=null,r=KS(n,u,r,p),$S(i),u=lv(),i!==null&&!ui?(ov(i,n,y),Sa(i,n,y)):(le&&u&&Wy(n),n.flags|=1,_i(i,n,r,y),n.child)}function qw(i,n,r,u,p){if(Zl(n),n.stateNode===null){var y=Fu,w=r.contextType;typeof w=="object"&&w!==null&&(y=zi(w)),y=new r(u,y),n.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=wv,n.stateNode=y,y._reactInternals=n,y=n.stateNode,y.props=u,y.state=n.memoizedState,y.refs={},zv(n),w=r.contextType,y.context=typeof w=="object"&&w!==null?zi(w):Fu,y.state=n.memoizedState,w=r.getDerivedStateFromProps,typeof w=="function"&&(Sv(n,r,w,u),y.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&wv.enqueueReplaceState(y,y.state,null),nd(n,u,y,p),id(),y.state=n.memoizedState),typeof y.componentDidMount=="function"&&(n.flags|=4194308),u=!0}else if(i===null){y=n.stateNode;var D=n.memoizedProps,N=Wl(r,D);y.props=N;var B=y.context,Q=r.contextType;w=Fu,typeof Q=="object"&&Q!==null&&(w=zi(Q));var st=r.getDerivedStateFromProps;Q=typeof st=="function"||typeof y.getSnapshotBeforeUpdate=="function",D=n.pendingProps!==D,Q||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(D||B!==w)&&Dw(n,y,u,w),Tr=!1;var X=n.memoizedState;y.state=X,nd(n,u,y,p),id(),B=n.memoizedState,D||X!==B||Tr?(typeof st=="function"&&(Sv(n,r,st,u),B=n.memoizedState),(N=Tr||Mw(n,r,N,u,X,B,w))?(Q||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(n.flags|=4194308)):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=u,n.memoizedState=B),y.props=u,y.state=B,y.context=w,u=N):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),u=!1)}else{y=n.stateNode,Fv(i,n),w=n.memoizedProps,Q=Wl(r,w),y.props=Q,st=n.pendingProps,X=y.context,B=r.contextType,N=Fu,typeof B=="object"&&B!==null&&(N=zi(B)),D=r.getDerivedStateFromProps,(B=typeof D=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==st||X!==N)&&Dw(n,y,u,N),Tr=!1,X=n.memoizedState,y.state=X,nd(n,u,y,p),id();var W=n.memoizedState;w!==st||X!==W||Tr||i!==null&&i.dependencies!==null&&Ap(i.dependencies)?(typeof D=="function"&&(Sv(n,r,D,u),W=n.memoizedState),(Q=Tr||Mw(n,r,Q,u,X,W,N)||i!==null&&i.dependencies!==null&&Ap(i.dependencies))?(B||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,W,N),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,W,N)),typeof y.componentDidUpdate=="function"&&(n.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===i.memoizedProps&&X===i.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&X===i.memoizedState||(n.flags|=1024),n.memoizedProps=u,n.memoizedState=W),y.props=u,y.state=W,y.context=N,u=Q):(typeof y.componentDidUpdate!="function"||w===i.memoizedProps&&X===i.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&X===i.memoizedState||(n.flags|=1024),u=!1)}return y=u,Jh(i,n),u=(n.flags&128)!==0,y||u?(y=n.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:y.render(),n.flags|=1,i!==null&&u?(n.child=Vl(n,i.child,null,p),n.child=Vl(n,null,r,p)):_i(i,n,r,p),n.memoizedState=y.state,i=n.child):i=Sa(i,n,p),i}function Vw(i,n,r,u){return jh(),n.flags|=256,_i(i,n,r,u),n.child}var xv={dehydrated:null,treeContext:null,retryLane:0};function Tv(i){return{baseLanes:i,cachePool:XS()}}function Cv(i,n,r){return i=i!==null?i.childLanes&~r:0,n&&(i|=Qn),i}function Yw(i,n,r){var u=n.pendingProps,p=!1,y=(n.flags&128)!==0,w;if((w=y)||(w=i!==null&&i.memoizedState===null?!1:(ii.current&2)!==0),w&&(p=!0,n.flags&=-129),w=(n.flags&32)!==0,n.flags&=-33,i===null){if(le){if(p?Sr(n):wr(),le){var D=Ei,N;if(N=D){t:{for(N=D,D=Hs;N.nodeType!==8;){if(!D){D=null;break t}if(N=ys(N.nextSibling),N===null){D=null;break t}}D=N}D!==null?(n.memoizedState={dehydrated:D,treeContext:jl!==null?{id:ya,overflow:va}:null,retryLane:536870912},N=Wn(18,null,null,0),N.stateNode=D,N.return=n,n.child=N,Vi=n,Ei=null,N=!0):N=!1}N||ql(n)}if(D=n.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return D.data==="$!"?n.lanes=16:n.lanes=536870912,null;ba(n)}return D=u.children,u=u.fallback,p?(wr(),p=n.mode,D=Mv({mode:"hidden",children:D},p),u=to(u,p,r,null),D.return=n,u.return=n,D.sibling=u,n.child=D,p=n.child,p.memoizedState=Tv(r),p.childLanes=Cv(i,w,r),n.memoizedState=xv,u):(Sr(n),Rv(n,D))}if(N=i.memoizedState,N!==null&&(D=N.dehydrated,D!==null)){if(y)n.flags&256?(Sr(n),n.flags&=-257,n=Dv(i,n,r)):n.memoizedState!==null?(wr(),n.child=i.child,n.flags|=128,n=null):(wr(),p=u.fallback,D=n.mode,u=Mv({mode:"visible",children:u.children},D),p=to(p,D,r,null),p.flags|=2,u.return=n,p.return=n,u.sibling=p,n.child=u,Vl(n,i.child,null,r),u=n.child,u.memoizedState=Tv(r),u.childLanes=Cv(i,w,r),n.memoizedState=xv,n=p);else if(Sr(n),D.data==="$!"){if(w=D.nextSibling&&D.nextSibling.dataset,w)var B=w.dgst;w=B,u=Error(s(419)),u.stack="",u.digest=w,Gh({value:u,source:null,stack:null}),n=Dv(i,n,r)}else if(ui||td(i,n,r,!1),w=(r&i.childLanes)!==0,ui||w){if(w=Se,w!==null){if(u=r&-r,(u&42)!==0)u=1;else switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=64;break;case 268435456:u=134217728;break;default:u=0}if(u=(u&(w.suspendedLanes|r))!==0?0:u,u!==0&&u!==N.retryLane)throw N.retryLane=u,Ar(i,u),Yi(w,i,u),Fw}D.data==="$?"||sb(),n=Dv(i,n,r)}else D.data==="$?"?(n.flags|=128,n.child=i.child,n=cR.bind(null,i),D._reactRetry=n,n=null):(i=N.treeContext,Ei=ys(D.nextSibling),Vi=n,le=!0,ps=null,Hs=!1,i!==null&&(Vn[Yn++]=ya,Vn[Yn++]=va,Vn[Yn++]=jl,ya=i.id,va=i.overflow,jl=n),n=Rv(n,u.children),n.flags|=4096);return n}return p?(wr(),p=u.fallback,D=n.mode,N=i.child,B=N.sibling,u=Or(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&31457280,B!==null?p=Or(B,p):(p=to(p,D,r,null),p.flags|=2),p.return=n,u.return=n,u.sibling=p,n.child=u,u=p,p=n.child,D=i.child.memoizedState,D===null?D=Tv(r):(N=D.cachePool,N!==null?(B=ni._currentValue,N=N.parent!==B?{parent:B,pool:B}:N):N=XS(),D={baseLanes:D.baseLanes|r,cachePool:N}),p.memoizedState=D,p.childLanes=Cv(i,w,r),n.memoizedState=xv,u):(Sr(n),r=i.child,i=r.sibling,r=Or(r,{mode:"visible",children:u.children}),r.return=n,r.sibling=null,i!==null&&(w=n.deletions,w===null?(n.deletions=[i],n.flags|=16):w.push(i)),n.child=r,n.memoizedState=null,r)}function Rv(i,n){return n=Mv({mode:"visible",children:n},i.mode),n.return=i,i.child=n}function Mv(i,n){return vE(i,n,0,null)}function Dv(i,n,r){return Vl(n,i.child,null,r),i=Rv(n,n.pendingProps.children),i.flags|=2,n.memoizedState=null,i}function Xw(i,n,r){i.lanes|=n;var u=i.alternate;u!==null&&(u.lanes|=n),kv(i.return,n,r)}function Lv(i,n,r,u,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:p}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=r,y.tailMode=p)}function $w(i,n,r){var u=n.pendingProps,p=u.revealOrder,y=u.tail;if(_i(i,n,u.children,r),u=ii.current,(u&2)!==0)u=u&1|2,n.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=n.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Xw(i,r,n);else if(i.tag===19)Xw(i,r,n);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(Wt(ii,u),p){case"forwards":for(r=n.child,p=null;r!==null;)i=r.alternate,i!==null&&op(i)===null&&(p=r),r=r.sibling;r=p,r===null?(p=n.child,n.child=null):(p=r.sibling,r.sibling=null),Lv(n,!1,p,r,y);break;case"backwards":for(r=null,p=n.child,n.child=null;p!==null;){if(i=p.alternate,i!==null&&op(i)===null){n.child=p;break}i=p.sibling,p.sibling=r,r=p,p=i}Lv(n,!0,r,null,y);break;case"together":Lv(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Sa(i,n,r){if(i!==null&&(n.dependencies=i.dependencies),Nr|=n.lanes,(r&n.childLanes)===0)if(i!==null){if(td(i,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(i!==null&&n.child!==i.child)throw Error(s(153));if(n.child!==null){for(i=n.child,r=Or(i,i.pendingProps),n.child=r,r.return=n;i.sibling!==null;)i=i.sibling,r=r.sibling=Or(i,i.pendingProps),r.return=n;r.sibling=null}return n.child}function Ov(i,n){return(i.lanes&n)!==0?!0:(i=i.dependencies,!!(i!==null&&Ap(i)))}function WC(i,n,r){switch(n.tag){case 3:xu(n,n.stateNode.containerInfo),xr(n,ni,i.memoizedState.cache),jh();break;case 27:case 5:Ch(n);break;case 4:xu(n,n.stateNode.containerInfo);break;case 10:xr(n,n.type,n.memoizedProps.value);break;case 13:var u=n.memoizedState;if(u!==null)return u.dehydrated!==null?(Sr(n),n.flags|=128,null):(r&n.child.childLanes)!==0?Yw(i,n,r):(Sr(n),i=Sa(i,n,r),i!==null?i.sibling:null);Sr(n);break;case 19:var p=(i.flags&128)!==0;if(u=(r&n.childLanes)!==0,u||(td(i,n,r,!1),u=(r&n.childLanes)!==0),p){if(u)return $w(i,n,r);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Wt(ii,ii.current),u)break;return null;case 22:case 23:return n.lanes=0,Iw(i,n,r);case 24:xr(n,ni,i.memoizedState.cache)}return Sa(i,n,r)}function Kw(i,n,r){if(i!==null)if(i.memoizedProps!==n.pendingProps)ui=!0;else{if(!Ov(i,r)&&(n.flags&128)===0)return ui=!1,WC(i,n,r);ui=(i.flags&131072)!==0}else ui=!1,le&&(n.flags&1048576)!==0&&NS(n,np,n.index);switch(n.lanes=0,n.tag){case 16:t:{i=n.pendingProps;var u=n.elementType,p=u._init;if(u=p(u._payload),n.type=u,typeof u=="function")Yv(u)?(i=Wl(u,i),n.tag=1,n=qw(null,n,u,i,r)):(n.tag=0,n=_v(null,n,u,i,r));else{if(u!=null){if(p=u.$$typeof,p===E){n.tag=11,n=Hw(null,n,u,i,r);break t}else if(p===R){n.tag=14,n=Bw(null,n,u,i,r);break t}}throw n=$(u)||u,Error(s(306,n,""))}}return n;case 0:return _v(i,n,n.type,n.pendingProps,r);case 1:return u=n.type,p=Wl(u,n.pendingProps),qw(i,n,u,p,r);case 3:t:{if(xu(n,n.stateNode.containerInfo),i===null)throw Error(s(387));var y=n.pendingProps;p=n.memoizedState,u=p.element,Fv(i,n),nd(n,y,null,r);var w=n.memoizedState;if(y=w.cache,xr(n,ni,y),y!==p.cache&&Pv(n,[ni],r,!0),id(),y=w.element,p.isDehydrated)if(p={element:y,isDehydrated:!1,cache:w.cache},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){n=Vw(i,n,y,r);break t}else if(y!==u){u=qn(Error(s(424)),n),Gh(u),n=Vw(i,n,y,r);break t}else for(Ei=ys(n.stateNode.containerInfo.firstChild),Vi=n,le=!0,ps=null,Hs=!0,r=jS(n,null,y,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(jh(),y===u){n=Sa(i,n,r);break t}_i(i,n,y,r)}n=n.child}return n;case 26:return Jh(i,n),i===null?(r=ZE(n.type,null,n.pendingProps,null))?n.memoizedState=r:le||(r=n.type,i=n.pendingProps,u=zp(ei.current).createElement(r),u[vt]=n,u[Ht]=i,xi(u,r,i),Ae(u),n.stateNode=u):n.memoizedState=ZE(n.type,i.memoizedProps,n.pendingProps,i.memoizedState),null;case 27:return Ch(n),i===null&&le&&(u=n.stateNode=KE(n.type,n.pendingProps,ei.current),Vi=n,Hs=!0,Ei=ys(u.firstChild)),u=n.pendingProps.children,i!==null||le?_i(i,n,u,r):n.child=Vl(n,null,u,r),Jh(i,n),n.child;case 5:return i===null&&le&&((p=u=Ei)&&(u=TR(u,n.type,n.pendingProps,Hs),u!==null?(n.stateNode=u,Vi=n,Ei=ys(u.firstChild),Hs=!1,p=!0):p=!1),p||ql(n)),Ch(n),p=n.type,y=n.pendingProps,w=i!==null?i.memoizedProps:null,u=y.children,vb(p,y)?u=null:w!==null&&vb(p,w)&&(n.flags|=32),n.memoizedState!==null&&(p=rv(i,n,GC,null,null,r),vd._currentValue=p),Jh(i,n),_i(i,n,u,r),n.child;case 6:return i===null&&le&&((i=r=Ei)&&(r=CR(r,n.pendingProps,Hs),r!==null?(n.stateNode=r,Vi=n,Ei=null,i=!0):i=!1),i||ql(n)),null;case 13:return Yw(i,n,r);case 4:return xu(n,n.stateNode.containerInfo),u=n.pendingProps,i===null?n.child=Vl(n,null,u,r):_i(i,n,u,r),n.child;case 11:return Hw(i,n,n.type,n.pendingProps,r);case 7:return _i(i,n,n.pendingProps,r),n.child;case 8:return _i(i,n,n.pendingProps.children,r),n.child;case 12:return _i(i,n,n.pendingProps.children,r),n.child;case 10:return u=n.pendingProps,xr(n,n.type,u.value),_i(i,n,u.children,r),n.child;case 9:return p=n.type._context,u=n.pendingProps.children,Zl(n),p=zi(p),u=u(p),n.flags|=1,_i(i,n,u,r),n.child;case 14:return Bw(i,n,n.type,n.pendingProps,r);case 15:return Uw(i,n,n.type,n.pendingProps,r);case 19:return $w(i,n,r);case 22:return Iw(i,n,r);case 24:return Zl(n),u=zi(ni),i===null?(p=sv(),p===null&&(p=Se,y=iv(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=r),p=y),n.memoizedState={parent:u,cache:p},zv(n),xr(n,ni,p)):((i.lanes&r)!==0&&(Fv(i,n),nd(n,null,null,r),id()),p=i.memoizedState,y=n.memoizedState,p.parent!==u?(p={parent:u,cache:u},n.memoizedState=p,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=p),xr(n,ni,u)):(u=y.cache,xr(n,ni,u),u!==p.cache&&Pv(n,[ni],r,!0))),_i(i,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}var Nv=ie(null),Ql=null,wa=null;function xr(i,n,r){Wt(Nv,n._currentValue),n._currentValue=r}function Ea(i){i._currentValue=Nv.current,Xt(Nv)}function kv(i,n,r){for(;i!==null;){var u=i.alternate;if((i.childLanes&n)!==n?(i.childLanes|=n,u!==null&&(u.childLanes|=n)):u!==null&&(u.childLanes&n)!==n&&(u.childLanes|=n),i===r)break;i=i.return}}function Pv(i,n,r,u){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var y=p.dependencies;if(y!==null){var w=p.child;y=y.firstContext;t:for(;y!==null;){var D=y;y=p;for(var N=0;N<n.length;N++)if(D.context===n[N]){y.lanes|=r,D=y.alternate,D!==null&&(D.lanes|=r),kv(y.return,r,i),u||(w=null);break t}y=D.next}}else if(p.tag===18){if(w=p.return,w===null)throw Error(s(341));w.lanes|=r,y=w.alternate,y!==null&&(y.lanes|=r),kv(w,r,i),w=null}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===i){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}}function td(i,n,r,u){i=null;for(var p=n,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var w=p.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var D=p.type;gn(p.pendingProps.value,w.value)||(i!==null?i.push(D):i=[D])}}else if(p===mr.current){if(w=p.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(vd):i=[vd])}p=p.return}i!==null&&Pv(n,i,r,u),n.flags|=262144}function Ap(i){for(i=i.firstContext;i!==null;){if(!gn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Zl(i){Ql=i,wa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function zi(i){return Ww(Ql,i)}function Sp(i,n){return Ql===null&&Zl(i),Ww(i,n)}function Ww(i,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},wa===null){if(i===null)throw Error(s(308));wa=n,i.dependencies={lanes:0,firstContext:n},i.flags|=524288}else wa=wa.next=n;return r}var Tr=!1;function zv(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fv(i,n){i=i.updateQueue,n.updateQueue===i&&(n.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Cr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Rr(i,n,r){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(ke&2)!==0){var p=u.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),u.pending=n,n=ep(i),LS(i,null,r),n}return tp(i,u,n,r),ep(i)}function ed(i,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194176)!==0)){var u=n.lanes;u&=i.pendingLanes,r|=u,n.lanes=r,Lt(i,r)}}function Hv(i,n){var r=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var p=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var w={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?p=y=w:y=y.next=w,r=r.next}while(r!==null);y===null?p=y=n:y=y.next=n}else p=y=n;r={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},i.updateQueue=r;return}i=r.lastBaseUpdate,i===null?r.firstBaseUpdate=n:i.next=n,r.lastBaseUpdate=n}var Bv=!1;function id(){if(Bv){var i=Gu;if(i!==null)throw i}}function nd(i,n,r,u){Bv=!1;var p=i.updateQueue;Tr=!1;var y=p.firstBaseUpdate,w=p.lastBaseUpdate,D=p.shared.pending;if(D!==null){p.shared.pending=null;var N=D,B=N.next;N.next=null,w===null?y=B:w.next=B,w=N;var Q=i.alternate;Q!==null&&(Q=Q.updateQueue,D=Q.lastBaseUpdate,D!==w&&(D===null?Q.firstBaseUpdate=B:D.next=B,Q.lastBaseUpdate=N))}if(y!==null){var st=p.baseState;w=0,Q=B=N=null,D=y;do{var X=D.lane&-536870913,W=X!==D.lane;if(W?(se&X)===X:(u&X)===X){X!==0&&X===ju&&(Bv=!0),Q!==null&&(Q=Q.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});t:{var _t=i,Ut=D;X=n;var Ue=r;switch(Ut.tag){case 1:if(_t=Ut.payload,typeof _t=="function"){st=_t.call(Ue,st,X);break t}st=_t;break t;case 3:_t.flags=_t.flags&-65537|128;case 0:if(_t=Ut.payload,X=typeof _t=="function"?_t.call(Ue,st,X):_t,X==null)break t;st=Z({},st,X);break t;case 2:Tr=!0}}X=D.callback,X!==null&&(i.flags|=64,W&&(i.flags|=8192),W=p.callbacks,W===null?p.callbacks=[X]:W.push(X))}else W={lane:X,tag:D.tag,payload:D.payload,callback:D.callback,next:null},Q===null?(B=Q=W,N=st):Q=Q.next=W,w|=X;if(D=D.next,D===null){if(D=p.shared.pending,D===null)break;W=D,D=W.next,W.next=null,p.lastBaseUpdate=W,p.shared.pending=null}}while(!0);Q===null&&(N=st),p.baseState=N,p.firstBaseUpdate=B,p.lastBaseUpdate=Q,y===null&&(p.shared.lanes=0),Nr|=w,i.lanes=w,i.memoizedState=st}}function Qw(i,n){if(typeof i!="function")throw Error(s(191,i));i.call(n)}function Zw(i,n){var r=i.callbacks;if(r!==null)for(i.callbacks=null,i=0;i<r.length;i++)Qw(r[i],n)}function sd(i,n){try{var r=n.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var p=u.next;r=p;do{if((r.tag&i)===i){u=void 0;var y=r.create,w=r.inst;u=y(),w.destroy=u}r=r.next}while(r!==p)}}catch(D){be(n,n.return,D)}}function Mr(i,n,r){try{var u=n.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&i)===i){var w=u.inst,D=w.destroy;if(D!==void 0){w.destroy=void 0,p=n;var N=r;try{D()}catch(B){be(p,N,B)}}}u=u.next}while(u!==y)}}catch(B){be(n,n.return,B)}}function Jw(i){var n=i.updateQueue;if(n!==null){var r=i.stateNode;try{Zw(n,r)}catch(u){be(i,i.return,u)}}}function tE(i,n,r){r.props=Wl(i.type,i.memoizedProps),r.state=i.memoizedState;try{r.componentWillUnmount()}catch(u){be(i,n,u)}}function Jl(i,n){try{var r=i.ref;if(r!==null){var u=i.stateNode;switch(i.tag){case 26:case 27:case 5:var p=u;break;default:p=u}typeof r=="function"?i.refCleanup=r(p):r.current=p}}catch(y){be(i,n,y)}}function pn(i,n){var r=i.ref,u=i.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(p){be(i,n,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){be(i,n,p)}else r.current=null}function eE(i){var n=i.type,r=i.memoizedProps,u=i.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break t;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(p){be(i,i.return,p)}}function iE(i,n,r){try{var u=i.stateNode;SR(u,i.type,r,n),u[Ht]=n}catch(p){be(i,i.return,p)}}function nE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function Uv(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||nE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Iv(i,n,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,n?r.nodeType===8?r.parentNode.insertBefore(i,n):r.insertBefore(i,n):(r.nodeType===8?(n=r.parentNode,n.insertBefore(i,r)):(n=r,n.appendChild(i)),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Pp));else if(u!==4&&u!==27&&(i=i.child,i!==null))for(Iv(i,n,r),i=i.sibling;i!==null;)Iv(i,n,r),i=i.sibling}function wp(i,n,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,n?r.insertBefore(i,n):r.appendChild(i);else if(u!==4&&u!==27&&(i=i.child,i!==null))for(wp(i,n,r),i=i.sibling;i!==null;)wp(i,n,r),i=i.sibling}var _a=!1,He=!1,jv=!1,sE=typeof WeakSet=="function"?WeakSet:Set,ci=null,aE=!1;function QC(i,n){if(i=i.containerInfo,mb=jp,i=wS(i),qy(i)){if("selectionStart"in i)var r={start:i.selectionStart,end:i.selectionEnd};else t:{r=(r=i.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break t}var w=0,D=-1,N=-1,B=0,Q=0,st=i,X=null;e:for(;;){for(var W;st!==r||p!==0&&st.nodeType!==3||(D=w+p),st!==y||u!==0&&st.nodeType!==3||(N=w+u),st.nodeType===3&&(w+=st.nodeValue.length),(W=st.firstChild)!==null;)X=st,st=W;for(;;){if(st===i)break e;if(X===r&&++B===p&&(D=w),X===y&&++Q===u&&(N=w),(W=st.nextSibling)!==null)break;st=X,X=st.parentNode}st=W}r=D===-1||N===-1?null:{start:D,end:N}}else r=null}r=r||{start:0,end:0}}else r=null;for(yb={focusedElem:i,selectionRange:r},jp=!1,ci=n;ci!==null;)if(n=ci,i=n.child,(n.subtreeFlags&1028)!==0&&i!==null)i.return=n,ci=i;else for(;ci!==null;){switch(n=ci,y=n.alternate,i=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,r=n,p=y.memoizedProps,y=y.memoizedState,u=r.stateNode;try{var _t=Wl(r.type,p,r.elementType===r.type);i=u.getSnapshotBeforeUpdate(_t,y),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ut){be(r,r.return,Ut)}}break;case 3:if((i&1024)!==0){if(i=n.stateNode.containerInfo,r=i.nodeType,r===9)Sb(i);else if(r===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Sb(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=n.sibling,i!==null){i.return=n.return,ci=i;break}ci=n.return}return _t=aE,aE=!1,_t}function rE(i,n,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:Ta(i,r),u&4&&sd(5,r);break;case 1:if(Ta(i,r),u&4)if(i=r.stateNode,n===null)try{i.componentDidMount()}catch(D){be(r,r.return,D)}else{var p=Wl(r.type,n.memoizedProps);n=n.memoizedState;try{i.componentDidUpdate(p,n,i.__reactInternalSnapshotBeforeUpdate)}catch(D){be(r,r.return,D)}}u&64&&Jw(r),u&512&&Jl(r,r.return);break;case 3:if(Ta(i,r),u&64&&(u=r.updateQueue,u!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{Zw(u,i)}catch(D){be(r,r.return,D)}}break;case 26:Ta(i,r),u&512&&Jl(r,r.return);break;case 27:case 5:Ta(i,r),n===null&&u&4&&eE(r),u&512&&Jl(r,r.return);break;case 12:Ta(i,r);break;case 13:Ta(i,r),u&4&&uE(i,r);break;case 22:if(p=r.memoizedState!==null||_a,!p){n=n!==null&&n.memoizedState!==null||He;var y=_a,w=He;_a=p,(He=n)&&!w?Dr(i,r,(r.subtreeFlags&8772)!==0):Ta(i,r),_a=y,He=w}u&512&&(r.memoizedProps.mode==="manual"?Jl(r,r.return):pn(r,r.return));break;default:Ta(i,r)}}function lE(i){var n=i.alternate;n!==null&&(i.alternate=null,lE(n)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(n=i.stateNode,n!==null&&fa(n)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ke=null,mn=!1;function xa(i,n,r){for(r=r.child;r!==null;)oE(i,n,r),r=r.sibling}function oE(i,n,r){if(qi&&typeof qi.onCommitFiberUnmount=="function")try{qi.onCommitFiberUnmount(vr,r)}catch{}switch(r.tag){case 26:He||pn(r,n),xa(i,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:He||pn(r,n);var u=Ke,p=mn;for(Ke=r.stateNode,xa(i,n,r),r=r.stateNode,n=r.attributes;n.length;)r.removeAttributeNode(n[0]);fa(r),Ke=u,mn=p;break;case 5:He||pn(r,n);case 6:p=Ke;var y=mn;if(Ke=null,xa(i,n,r),Ke=p,mn=y,Ke!==null)if(mn)try{i=Ke,u=r.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)}catch(w){be(r,n,w)}else try{Ke.removeChild(r.stateNode)}catch(w){be(r,n,w)}break;case 18:Ke!==null&&(mn?(n=Ke,r=r.stateNode,n.nodeType===8?Ab(n.parentNode,r):n.nodeType===1&&Ab(n,r),wd(n)):Ab(Ke,r.stateNode));break;case 4:u=Ke,p=mn,Ke=r.stateNode.containerInfo,mn=!0,xa(i,n,r),Ke=u,mn=p;break;case 0:case 11:case 14:case 15:He||Mr(2,r,n),He||Mr(4,r,n),xa(i,n,r);break;case 1:He||(pn(r,n),u=r.stateNode,typeof u.componentWillUnmount=="function"&&tE(r,n,u)),xa(i,n,r);break;case 21:xa(i,n,r);break;case 22:He||pn(r,n),He=(u=He)||r.memoizedState!==null,xa(i,n,r),He=u;break;default:xa(i,n,r)}}function uE(i,n){if(n.memoizedState===null&&(i=n.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{wd(i)}catch(r){be(n,n.return,r)}}function ZC(i){switch(i.tag){case 13:case 19:var n=i.stateNode;return n===null&&(n=i.stateNode=new sE),n;case 22:return i=i.stateNode,n=i._retryCache,n===null&&(n=i._retryCache=new sE),n;default:throw Error(s(435,i.tag))}}function Gv(i,n){var r=ZC(i);n.forEach(function(u){var p=hR.bind(null,i,u);r.has(u)||(r.add(u),u.then(p,p))})}function $n(i,n){var r=n.deletions;if(r!==null)for(var u=0;u<r.length;u++){var p=r[u],y=i,w=n,D=w;t:for(;D!==null;){switch(D.tag){case 27:case 5:Ke=D.stateNode,mn=!1;break t;case 3:Ke=D.stateNode.containerInfo,mn=!0;break t;case 4:Ke=D.stateNode.containerInfo,mn=!0;break t}D=D.return}if(Ke===null)throw Error(s(160));oE(y,w,p),Ke=null,mn=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)cE(n,i),n=n.sibling}var ms=null;function cE(i,n){var r=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:$n(n,i),Kn(i),u&4&&(Mr(3,i,i.return),sd(3,i),Mr(5,i,i.return));break;case 1:$n(n,i),Kn(i),u&512&&(He||r===null||pn(r,r.return)),u&64&&_a&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(r=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var p=ms;if($n(n,i),Kn(i),u&512&&(He||r===null||pn(r,r.return)),u&4){var y=r!==null?r.memoizedState:null;if(u=i.memoizedState,r===null)if(u===null)if(i.stateNode===null){t:{u=i.type,r=i.memoizedProps,p=p.ownerDocument||p;e:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Bn]||y[vt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),xi(y,u,r),y[vt]=i,Ae(y),u=y;break t;case"link":var w=e1("link","href",p).get(u+(r.href||""));if(w){for(var D=0;D<w.length;D++)if(y=w[D],y.getAttribute("href")===(r.href==null?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){w.splice(D,1);break e}}y=p.createElement(u),xi(y,u,r),p.head.appendChild(y);break;case"meta":if(w=e1("meta","content",p).get(u+(r.content||""))){for(D=0;D<w.length;D++)if(y=w[D],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){w.splice(D,1);break e}}y=p.createElement(u),xi(y,u,r),p.head.appendChild(y);break;default:throw Error(s(468,u))}y[vt]=i,Ae(y),u=y}i.stateNode=u}else i1(p,i.type,i.stateNode);else i.stateNode=t1(p,u,i.memoizedProps);else y!==u?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,u===null?i1(p,i.type,i.stateNode):t1(p,u,i.memoizedProps)):u===null&&i.stateNode!==null&&iE(i,i.memoizedProps,r.memoizedProps)}break;case 27:if(u&4&&i.alternate===null){p=i.stateNode,y=i.memoizedProps;try{for(var N=p.firstChild;N;){var B=N.nextSibling,Q=N.nodeName;N[Bn]||Q==="HEAD"||Q==="BODY"||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&N.rel.toLowerCase()==="stylesheet"||p.removeChild(N),N=B}for(var st=i.type,X=p.attributes;X.length;)p.removeAttributeNode(X[0]);xi(p,st,y),p[vt]=i,p[Ht]=y}catch(_t){be(i,i.return,_t)}}case 5:if($n(n,i),Kn(i),u&512&&(He||r===null||pn(r,r.return)),i.flags&32){p=i.stateNode;try{Du(p,"")}catch(_t){be(i,i.return,_t)}}u&4&&i.stateNode!=null&&(p=i.memoizedProps,iE(i,p,r!==null?r.memoizedProps:p)),u&1024&&(jv=!0);break;case 6:if($n(n,i),Kn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,r=i.stateNode;try{r.nodeValue=u}catch(_t){be(i,i.return,_t)}}break;case 3:if(Bp=null,p=ms,ms=Fp(n.containerInfo),$n(n,i),ms=p,Kn(i),u&4&&r!==null&&r.memoizedState.isDehydrated)try{wd(n.containerInfo)}catch(_t){be(i,i.return,_t)}jv&&(jv=!1,hE(i));break;case 4:u=ms,ms=Fp(i.stateNode.containerInfo),$n(n,i),Kn(i),ms=u;break;case 12:$n(n,i),Kn(i);break;case 13:$n(n,i),Kn(i),i.child.flags&8192&&i.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Zv=nn()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Gv(i,u)));break;case 22:if(u&512&&(He||r===null||pn(r,r.return)),N=i.memoizedState!==null,B=r!==null&&r.memoizedState!==null,Q=_a,st=He,_a=Q||N,He=st||B,$n(n,i),He=st,_a=Q,Kn(i),n=i.stateNode,n._current=i,n._visibility&=-3,n._visibility|=n._pendingVisibility&2,u&8192&&(n._visibility=N?n._visibility&-2:n._visibility|1,N&&(n=_a||He,r===null||B||n||Xu(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))t:for(r=null,n=i;;){if(n.tag===5||n.tag===26||n.tag===27){if(r===null){B=r=n;try{if(p=B.stateNode,N)y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{w=B.stateNode,D=B.memoizedProps.style;var W=D!=null&&D.hasOwnProperty("display")?D.display:null;w.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(_t){be(B,B.return,_t)}}}else if(n.tag===6){if(r===null){B=n;try{B.stateNode.nodeValue=N?"":B.memoizedProps}catch(_t){be(B,B.return,_t)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===i)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}u&4&&(u=i.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,Gv(i,r))));break;case 19:$n(n,i),Kn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Gv(i,u)));break;case 21:break;default:$n(n,i),Kn(i)}}function Kn(i){var n=i.flags;if(n&2){try{if(i.tag!==27){t:{for(var r=i.return;r!==null;){if(nE(r)){var u=r;break t}r=r.return}throw Error(s(160))}switch(u.tag){case 27:var p=u.stateNode,y=Uv(i);wp(i,y,p);break;case 5:var w=u.stateNode;u.flags&32&&(Du(w,""),u.flags&=-33);var D=Uv(i);wp(i,D,w);break;case 3:case 4:var N=u.stateNode.containerInfo,B=Uv(i);Iv(i,B,N);break;default:throw Error(s(161))}}}catch(Q){be(i,i.return,Q)}i.flags&=-3}n&4096&&(i.flags&=-4097)}function hE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var n=i;hE(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),i=i.sibling}}function Ta(i,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)rE(i,n.alternate,n),n=n.sibling}function Xu(i){for(i=i.child;i!==null;){var n=i;switch(n.tag){case 0:case 11:case 14:case 15:Mr(4,n,n.return),Xu(n);break;case 1:pn(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&tE(n,n.return,r),Xu(n);break;case 26:case 27:case 5:pn(n,n.return),Xu(n);break;case 22:pn(n,n.return),n.memoizedState===null&&Xu(n);break;default:Xu(n)}i=i.sibling}}function Dr(i,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var u=n.alternate,p=i,y=n,w=y.flags;switch(y.tag){case 0:case 11:case 15:Dr(p,y,r),sd(4,y);break;case 1:if(Dr(p,y,r),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(B){be(u,u.return,B)}if(u=y,p=u.updateQueue,p!==null){var D=u.stateNode;try{var N=p.shared.hiddenCallbacks;if(N!==null)for(p.shared.hiddenCallbacks=null,p=0;p<N.length;p++)Qw(N[p],D)}catch(B){be(u,u.return,B)}}r&&w&64&&Jw(y),Jl(y,y.return);break;case 26:case 27:case 5:Dr(p,y,r),r&&u===null&&w&4&&eE(y),Jl(y,y.return);break;case 12:Dr(p,y,r);break;case 13:Dr(p,y,r),r&&w&4&&uE(p,y);break;case 22:y.memoizedState===null&&Dr(p,y,r),Jl(y,y.return);break;default:Dr(p,y,r)}n=n.sibling}}function qv(i,n){var r=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),i=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),i!==r&&(i!=null&&i.refCount++,r!=null&&$h(r))}function Vv(i,n){i=null,n.alternate!==null&&(i=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==i&&(n.refCount++,i!=null&&$h(i))}function Lr(i,n,r,u){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)dE(i,n,r,u),n=n.sibling}function dE(i,n,r,u){var p=n.flags;switch(n.tag){case 0:case 11:case 15:Lr(i,n,r,u),p&2048&&sd(9,n);break;case 3:Lr(i,n,r,u),p&2048&&(i=null,n.alternate!==null&&(i=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==i&&(n.refCount++,i!=null&&$h(i)));break;case 12:if(p&2048){Lr(i,n,r,u),i=n.stateNode;try{var y=n.memoizedProps,w=y.id,D=y.onPostCommit;typeof D=="function"&&D(w,n.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(N){be(n,n.return,N)}}else Lr(i,n,r,u);break;case 23:break;case 22:y=n.stateNode,n.memoizedState!==null?y._visibility&4?Lr(i,n,r,u):ad(i,n):y._visibility&4?Lr(i,n,r,u):(y._visibility|=4,$u(i,n,r,u,(n.subtreeFlags&10256)!==0)),p&2048&&qv(n.alternate,n);break;case 24:Lr(i,n,r,u),p&2048&&Vv(n.alternate,n);break;default:Lr(i,n,r,u)}}function $u(i,n,r,u,p){for(p=p&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var y=i,w=n,D=r,N=u,B=w.flags;switch(w.tag){case 0:case 11:case 15:$u(y,w,D,N,p),sd(8,w);break;case 23:break;case 22:var Q=w.stateNode;w.memoizedState!==null?Q._visibility&4?$u(y,w,D,N,p):ad(y,w):(Q._visibility|=4,$u(y,w,D,N,p)),p&&B&2048&&qv(w.alternate,w);break;case 24:$u(y,w,D,N,p),p&&B&2048&&Vv(w.alternate,w);break;default:$u(y,w,D,N,p)}n=n.sibling}}function ad(i,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=i,u=n,p=u.flags;switch(u.tag){case 22:ad(r,u),p&2048&&qv(u.alternate,u);break;case 24:ad(r,u),p&2048&&Vv(u.alternate,u);break;default:ad(r,u)}n=n.sibling}}var rd=8192;function Ku(i){if(i.subtreeFlags&rd)for(i=i.child;i!==null;)fE(i),i=i.sibling}function fE(i){switch(i.tag){case 26:Ku(i),i.flags&rd&&i.memoizedState!==null&&UR(ms,i.memoizedState,i.memoizedProps);break;case 5:Ku(i);break;case 3:case 4:var n=ms;ms=Fp(i.stateNode.containerInfo),Ku(i),ms=n;break;case 22:i.memoizedState===null&&(n=i.alternate,n!==null&&n.memoizedState!==null?(n=rd,rd=16777216,Ku(i),rd=n):Ku(i));break;default:Ku(i)}}function gE(i){var n=i.alternate;if(n!==null&&(i=n.child,i!==null)){n.child=null;do n=i.sibling,i.sibling=null,i=n;while(i!==null)}}function ld(i){var n=i.deletions;if((i.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var u=n[r];ci=u,mE(u,i)}gE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)pE(i),i=i.sibling}function pE(i){switch(i.tag){case 0:case 11:case 15:ld(i),i.flags&2048&&Mr(9,i,i.return);break;case 3:ld(i);break;case 12:ld(i);break;case 22:var n=i.stateNode;i.memoizedState!==null&&n._visibility&4&&(i.return===null||i.return.tag!==13)?(n._visibility&=-5,Ep(i)):ld(i);break;default:ld(i)}}function Ep(i){var n=i.deletions;if((i.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var u=n[r];ci=u,mE(u,i)}gE(i)}for(i=i.child;i!==null;){switch(n=i,n.tag){case 0:case 11:case 15:Mr(8,n,n.return),Ep(n);break;case 22:r=n.stateNode,r._visibility&4&&(r._visibility&=-5,Ep(n));break;default:Ep(n)}i=i.sibling}}function mE(i,n){for(;ci!==null;){var r=ci;switch(r.tag){case 0:case 11:case 15:Mr(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:$h(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,ci=u;else t:for(r=i;ci!==null;){u=ci;var p=u.sibling,y=u.return;if(lE(u),u===r){ci=null;break t}if(p!==null){p.return=y,ci=p;break t}ci=y}}}function JC(i,n,r,u){this.tag=i,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(i,n,r,u){return new JC(i,n,r,u)}function Yv(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Or(i,n){var r=i.alternate;return r===null?(r=Wn(i.tag,n,i.key,i.mode),r.elementType=i.elementType,r.type=i.type,r.stateNode=i.stateNode,r.alternate=i,i.alternate=r):(r.pendingProps=n,r.type=i.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=i.flags&31457280,r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,n=i.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=i.sibling,r.index=i.index,r.ref=i.ref,r.refCleanup=i.refCleanup,r}function yE(i,n){i.flags&=31457282;var r=i.alternate;return r===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,i.type=r.type,n=r.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),i}function _p(i,n,r,u,p,y){var w=0;if(u=i,typeof i=="function")Yv(i)&&(w=1);else if(typeof i=="string")w=HR(i,r,Ai.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case f:return to(r.children,p,y,n);case g:w=8,p|=24;break;case m:return i=Wn(12,r,n,p|2),i.elementType=m,i.lanes=y,i;case _:return i=Wn(13,r,n,p),i.elementType=_,i.lanes=y,i;case C:return i=Wn(19,r,n,p),i.elementType=C,i.lanes=y,i;case O:return vE(r,p,y,n);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case v:case A:w=10;break t;case b:w=9;break t;case E:w=11;break t;case R:w=14;break t;case L:w=16,u=null;break t}w=29,r=Error(s(130,i===null?"null":typeof i,"")),u=null}return n=Wn(w,r,n,p),n.elementType=i,n.type=u,n.lanes=y,n}function to(i,n,r,u){return i=Wn(7,i,u,n),i.lanes=r,i}function vE(i,n,r,u){i=Wn(22,i,u,n),i.elementType=O,i.lanes=r;var p={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var y=p._current;if(y===null)throw Error(s(456));if((p._pendingVisibility&2)===0){var w=Ar(y,2);w!==null&&(p._pendingVisibility|=2,Yi(w,y,2))}},attach:function(){var y=p._current;if(y===null)throw Error(s(456));if((p._pendingVisibility&2)!==0){var w=Ar(y,2);w!==null&&(p._pendingVisibility&=-3,Yi(w,y,2))}}};return i.stateNode=p,i}function Xv(i,n,r){return i=Wn(6,i,null,n),i.lanes=r,i}function $v(i,n,r){return n=Wn(4,i.children!==null?i.children:[],i.key,n),n.lanes=r,n.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},n}function Ca(i){i.flags|=4}function bE(i,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!n1(n)){if(n=Xn.current,n!==null&&((se&4194176)===se?Bs!==null:(se&62914560)!==se&&(se&536870912)===0||n!==Bs))throw Vh=Jy,zS;i.flags|=8192}}function xp(i,n){n!==null&&(i.flags|=4),i.flags&16384&&(n=i.tag!==22?j():536870912,i.lanes|=n,Qu|=n)}function od(i,n){if(!le)switch(i.tailMode){case"hidden":n=i.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?i.tail=null:r.sibling=null;break;case"collapsed":r=i.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?n||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Ne(i){var n=i.alternate!==null&&i.alternate.child===i.child,r=0,u=0;if(n)for(var p=i.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags&31457280,u|=p.flags&31457280,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=u,i.childLanes=r,n}function tR(i,n,r){var u=n.pendingProps;switch(Qy(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(n),null;case 1:return Ne(n),null;case 3:return r=n.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),n.memoizedState.cache!==u&&(n.flags|=2048),Ea(ni),ha(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(Ih(n)?Ca(n):i===null||i.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ps!==null&&(ib(ps),ps=null))),Ne(n),null;case 26:return r=n.memoizedState,i===null?(Ca(n),r!==null?(Ne(n),bE(n,r)):(Ne(n),n.flags&=-16777217)):r?r!==i.memoizedState?(Ca(n),Ne(n),bE(n,r)):(Ne(n),n.flags&=-16777217):(i.memoizedProps!==u&&Ca(n),Ne(n),n.flags&=-16777217),null;case 27:Tu(n),r=ei.current;var p=n.type;if(i!==null&&n.stateNode!=null)i.memoizedProps!==u&&Ca(n);else{if(!u){if(n.stateNode===null)throw Error(s(166));return Ne(n),null}i=Ai.current,Ih(n)?kS(n):(i=KE(p,u,r),n.stateNode=i,Ca(n))}return Ne(n),null;case 5:if(Tu(n),r=n.type,i!==null&&n.stateNode!=null)i.memoizedProps!==u&&Ca(n);else{if(!u){if(n.stateNode===null)throw Error(s(166));return Ne(n),null}if(i=Ai.current,Ih(n))kS(n);else{switch(p=zp(ei.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?p.createElement("select",{is:u.is}):p.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?p.createElement(r,{is:u.is}):p.createElement(r)}}i[vt]=n,i[Ht]=u;t:for(p=n.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break t;for(;p.sibling===null;){if(p.return===null||p.return===n)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}n.stateNode=i;t:switch(xi(i,r,u),r){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Ca(n)}}return Ne(n),n.flags&=-16777217,null;case 6:if(i&&n.stateNode!=null)i.memoizedProps!==u&&Ca(n);else{if(typeof u!="string"&&n.stateNode===null)throw Error(s(166));if(i=ei.current,Ih(n)){if(i=n.stateNode,r=n.memoizedProps,u=null,p=Vi,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}i[vt]=n,i=!!(i.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||GE(i.nodeValue,r)),i||ql(n)}else i=zp(i).createTextNode(u),i[vt]=n,n.stateNode=i}return Ne(n),null;case 13:if(u=n.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=Ih(n),u!==null&&u.dehydrated!==null){if(i===null){if(!p)throw Error(s(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[vt]=n}else jh(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ne(n),p=!1}else ps!==null&&(ib(ps),ps=null),p=!0;if(!p)return n.flags&256?(ba(n),n):(ba(n),null)}if(ba(n),(n.flags&128)!==0)return n.lanes=r,n;if(r=u!==null,i=i!==null&&i.memoizedState!==null,r){u=n.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool);var y=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)}return r!==i&&r&&(n.child.flags|=8192),xp(n,n.updateQueue),Ne(n),null;case 4:return ha(),i===null&&fb(n.stateNode.containerInfo),Ne(n),null;case 10:return Ea(n.type),Ne(n),null;case 19:if(Xt(ii),p=n.memoizedState,p===null)return Ne(n),null;if(u=(n.flags&128)!==0,y=p.rendering,y===null)if(u)od(p,!1);else{if(Be!==0||i!==null&&(i.flags&128)!==0)for(i=n.child;i!==null;){if(y=op(i),y!==null){for(n.flags|=128,od(p,!1),i=y.updateQueue,n.updateQueue=i,xp(n,i),n.subtreeFlags=0,i=r,r=n.child;r!==null;)yE(r,i),r=r.sibling;return Wt(ii,ii.current&1|2),n.child}i=i.sibling}p.tail!==null&&nn()>Tp&&(n.flags|=128,u=!0,od(p,!1),n.lanes=4194304)}else{if(!u)if(i=op(y),i!==null){if(n.flags|=128,u=!0,i=i.updateQueue,n.updateQueue=i,xp(n,i),od(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!le)return Ne(n),null}else 2*nn()-p.renderingStartTime>Tp&&r!==536870912&&(n.flags|=128,u=!0,od(p,!1),n.lanes=4194304);p.isBackwards?(y.sibling=n.child,n.child=y):(i=p.last,i!==null?i.sibling=y:n.child=y,p.last=y)}return p.tail!==null?(n=p.tail,p.rendering=n,p.tail=n.sibling,p.renderingStartTime=nn(),n.sibling=null,i=ii.current,Wt(ii,u?i&1|2:i&1),n):(Ne(n),null);case 22:case 23:return ba(n),ev(),u=n.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(n.flags|=8192):u&&(n.flags|=8192),u?(r&536870912)!==0&&(n.flags&128)===0&&(Ne(n),n.subtreeFlags&6&&(n.flags|=8192)):Ne(n),r=n.updateQueue,r!==null&&xp(n,r.retryQueue),r=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),u=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),u!==r&&(n.flags|=2048),i!==null&&Xt(Yl),null;case 24:return r=null,i!==null&&(r=i.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Ea(ni),Ne(n),null;case 25:return null}throw Error(s(156,n.tag))}function eR(i,n){switch(Qy(n),n.tag){case 1:return i=n.flags,i&65536?(n.flags=i&-65537|128,n):null;case 3:return Ea(ni),ha(),i=n.flags,(i&65536)!==0&&(i&128)===0?(n.flags=i&-65537|128,n):null;case 26:case 27:case 5:return Tu(n),null;case 13:if(ba(n),i=n.memoizedState,i!==null&&i.dehydrated!==null){if(n.alternate===null)throw Error(s(340));jh()}return i=n.flags,i&65536?(n.flags=i&-65537|128,n):null;case 19:return Xt(ii),null;case 4:return ha(),null;case 10:return Ea(n.type),null;case 22:case 23:return ba(n),ev(),i!==null&&Xt(Yl),i=n.flags,i&65536?(n.flags=i&-65537|128,n):null;case 24:return Ea(ni),null;case 25:return null;default:return null}}function AE(i,n){switch(Qy(n),n.tag){case 3:Ea(ni),ha();break;case 26:case 27:case 5:Tu(n);break;case 4:ha();break;case 13:ba(n);break;case 19:Xt(ii);break;case 10:Ea(n.type);break;case 22:case 23:ba(n),ev(),i!==null&&Xt(Yl);break;case 24:Ea(ni)}}var iR={getCacheForType:function(i){var n=zi(ni),r=n.data.get(i);return r===void 0&&(r=i(),n.data.set(i,r)),r}},nR=typeof WeakMap=="function"?WeakMap:Map,ke=0,Se=null,Qt=null,se=0,we=0,yn=null,Ra=!1,Wu=!1,Kv=!1,Ma=0,Be=0,Nr=0,eo=0,Wv=0,Qn=0,Qu=0,ud=null,Is=null,Qv=!1,Zv=0,Tp=1/0,Cp=null,kr=null,Rp=!1,io=null,cd=0,Jv=0,tb=null,hd=0,eb=null;function vn(){if((ke&2)!==0&&se!==0)return se&-se;if(G.T!==null){var i=ju;return i!==0?i:ub()}return Tt()}function SE(){Qn===0&&(Qn=(se&536870912)===0||le?F():536870912);var i=Xn.current;return i!==null&&(i.flags|=32),Qn}function Yi(i,n,r){(i===Se&&we===2||i.cancelPendingCommit!==null)&&(Zu(i,0),Da(i,se,Qn,!1)),at(i,r),((ke&2)===0||i!==Se)&&(i===Se&&((ke&2)===0&&(eo|=r),Be===4&&Da(i,se,Qn,!1)),js(i))}function wE(i,n,r){if((ke&6)!==0)throw Error(s(327));var u=!r&&(n&60)===0&&(n&i.expiredLanes)===0||Pl(i,n),p=u?rR(i,n):ab(i,n,!0),y=u;do{if(p===0){Wu&&!u&&Da(i,n,0,!1);break}else if(p===6)Da(i,n,0,!Ra);else{if(r=i.current.alternate,y&&!sR(r)){p=ab(i,n,!1),y=!1;continue}if(p===2){if(y=n,i.errorRecoveryDisabledLanes&y)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){n=w;t:{var D=i;p=ud;var N=D.current.memoizedState.isDehydrated;if(N&&(Zu(D,w).flags|=256),w=ab(D,w,!1),w!==2){if(Kv&&!N){D.errorRecoveryDisabledLanes|=y,eo|=y,p=4;break t}y=Is,Is=p,y!==null&&ib(y)}p=w}if(y=!1,p!==2)continue}}if(p===1){Zu(i,0),Da(i,n,0,!0);break}t:{switch(u=i,p){case 0:case 1:throw Error(s(345));case 4:if((n&4194176)===n){Da(u,n,Qn,!Ra);break t}break;case 2:Is=null;break;case 3:case 5:break;default:throw Error(s(329))}if(u.finishedWork=r,u.finishedLanes=n,(n&62914560)===n&&(y=Zv+300-nn(),10<y)){if(Da(u,n,Qn,!Ra),da(u,0)!==0)break t;u.timeoutHandle=YE(EE.bind(null,u,r,Is,Cp,Qv,n,Qn,eo,Qu,Ra,2,-0,0),y);break t}EE(u,r,Is,Cp,Qv,n,Qn,eo,Qu,Ra,0,-0,0)}}break}while(!0);js(i)}function ib(i){Is===null?Is=i:Is.push.apply(Is,i)}function EE(i,n,r,u,p,y,w,D,N,B,Q,st,X){var W=n.subtreeFlags;if((W&8192||(W&16785408)===16785408)&&(yd={stylesheets:null,count:0,unsuspend:BR},fE(n),n=IR(),n!==null)){i.cancelPendingCommit=n(DE.bind(null,i,r,u,p,w,D,N,1,st,X)),Da(i,y,w,!B);return}DE(i,r,u,p,w,D,N,Q,st,X)}function sR(i){for(var n=i;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var p=r[u],y=p.getSnapshot;p=p.value;try{if(!gn(y(),p))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===i)break;for(;n.sibling===null;){if(n.return===null||n.return===i)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Da(i,n,r,u){n&=~Wv,n&=~eo,i.suspendedLanes|=n,i.pingedLanes&=~n,u&&(i.warmLanes|=n),u=i.expirationTimes;for(var p=n;0<p;){var y=31-Pi(p),w=1<<y;u[y]=-1,p&=~w}r!==0&&zt(i,r,n)}function Mp(){return(ke&6)===0?(dd(0),!1):!0}function nb(){if(Qt!==null){if(we===0)var i=Qt.return;else i=Qt,wa=Ql=null,uv(i),Uu=null,Yh=0,i=Qt;for(;i!==null;)AE(i.alternate,i),i=i.return;Qt=null}}function Zu(i,n){i.finishedWork=null,i.finishedLanes=0;var r=i.timeoutHandle;r!==-1&&(i.timeoutHandle=-1,ER(r)),r=i.cancelPendingCommit,r!==null&&(i.cancelPendingCommit=null,r()),nb(),Se=i,Qt=r=Or(i.current,null),se=n,we=0,yn=null,Ra=!1,Wu=Pl(i,n),Kv=!1,Qu=Qn=Wv=eo=Nr=Be=0,Is=ud=null,Qv=!1,(n&8)!==0&&(n|=n&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=n;0<u;){var p=31-Pi(u),y=1<<p;n|=i[p],u&=~y}return Ma=n,Jg(),r}function _E(i,n){Yt=null,G.H=Us,n===qh?(n=BS(),we=3):n===zS?(n=BS(),we=4):we=n===Fw?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,yn=n,Qt===null&&(Be=1,bp(i,qn(n,i.current)))}function xE(){var i=G.H;return G.H=Us,i===null?Us:i}function TE(){var i=G.A;return G.A=iR,i}function sb(){Be=4,Ra||(se&4194176)!==se&&Xn.current!==null||(Wu=!0),(Nr&134217727)===0&&(eo&134217727)===0||Se===null||Da(Se,se,Qn,!1)}function ab(i,n,r){var u=ke;ke|=2;var p=xE(),y=TE();(Se!==i||se!==n)&&(Cp=null,Zu(i,n)),n=!1;var w=Be;t:do try{if(we!==0&&Qt!==null){var D=Qt,N=yn;switch(we){case 8:nb(),w=6;break t;case 3:case 2:case 6:Xn.current===null&&(n=!0);var B=we;if(we=0,yn=null,Ju(i,D,N,B),r&&Wu){w=0;break t}break;default:B=we,we=0,yn=null,Ju(i,D,N,B)}}aR(),w=Be;break}catch(Q){_E(i,Q)}while(!0);return n&&i.shellSuspendCounter++,wa=Ql=null,ke=u,G.H=p,G.A=y,Qt===null&&(Se=null,se=0,Jg()),w}function aR(){for(;Qt!==null;)CE(Qt)}function rR(i,n){var r=ke;ke|=2;var u=xE(),p=TE();Se!==i||se!==n?(Cp=null,Tp=nn()+500,Zu(i,n)):Wu=Pl(i,n);t:do try{if(we!==0&&Qt!==null){n=Qt;var y=yn;e:switch(we){case 1:we=0,yn=null,Ju(i,n,y,1);break;case 2:if(FS(y)){we=0,yn=null,RE(n);break}n=function(){we===2&&Se===i&&(we=7),js(i)},y.then(n,n);break t;case 3:we=7;break t;case 4:we=5;break t;case 7:FS(y)?(we=0,yn=null,RE(n)):(we=0,yn=null,Ju(i,n,y,7));break;case 5:var w=null;switch(Qt.tag){case 26:w=Qt.memoizedState;case 5:case 27:var D=Qt;if(!w||n1(w)){we=0,yn=null;var N=D.sibling;if(N!==null)Qt=N;else{var B=D.return;B!==null?(Qt=B,Dp(B)):Qt=null}break e}}we=0,yn=null,Ju(i,n,y,5);break;case 6:we=0,yn=null,Ju(i,n,y,6);break;case 8:nb(),Be=6;break t;default:throw Error(s(462))}}lR();break}catch(Q){_E(i,Q)}while(!0);return wa=Ql=null,G.H=u,G.A=p,ke=r,Qt!==null?0:(Se=null,se=0,Jg(),Be)}function lR(){for(;Qt!==null&&!Nl();)CE(Qt)}function CE(i){var n=Kw(i.alternate,i,Ma);i.memoizedProps=i.pendingProps,n===null?Dp(i):Qt=n}function RE(i){var n=i,r=n.alternate;switch(n.tag){case 15:case 0:n=Gw(r,n,n.pendingProps,n.type,void 0,se);break;case 11:n=Gw(r,n,n.pendingProps,n.type.render,n.ref,se);break;case 5:uv(n);default:AE(r,n),n=Qt=yE(n,Ma),n=Kw(r,n,Ma)}i.memoizedProps=i.pendingProps,n===null?Dp(i):Qt=n}function Ju(i,n,r,u){wa=Ql=null,uv(n),Uu=null,Yh=0;var p=n.return;try{if(KC(i,p,n,r,se)){Be=1,bp(i,qn(r,i.current)),Qt=null;return}}catch(y){if(p!==null)throw Qt=p,y;Be=1,bp(i,qn(r,i.current)),Qt=null;return}n.flags&32768?(le||u===1?i=!0:Wu||(se&536870912)!==0?i=!1:(Ra=i=!0,(u===2||u===3||u===6)&&(u=Xn.current,u!==null&&u.tag===13&&(u.flags|=16384))),ME(n,i)):Dp(n)}function Dp(i){var n=i;do{if((n.flags&32768)!==0){ME(n,Ra);return}i=n.return;var r=tR(n.alternate,n,Ma);if(r!==null){Qt=r;return}if(n=n.sibling,n!==null){Qt=n;return}Qt=n=i}while(n!==null);Be===0&&(Be=5)}function ME(i,n){do{var r=eR(i.alternate,i);if(r!==null){r.flags&=32767,Qt=r;return}if(r=i.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(i=i.sibling,i!==null)){Qt=i;return}Qt=i=r}while(i!==null);Be=6,Qt=null}function DE(i,n,r,u,p,y,w,D,N,B){var Q=G.T,st=ot.p;try{ot.p=2,G.T=null,oR(i,n,r,u,st,p,y,w,D,N,B)}finally{G.T=Q,ot.p=st}}function oR(i,n,r,u,p,y,w,D){do tc();while(io!==null);if((ke&6)!==0)throw Error(s(327));var N=i.finishedWork;if(u=i.finishedLanes,N===null)return null;if(i.finishedWork=null,i.finishedLanes=0,N===i.current)throw Error(s(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var B=N.lanes|N.childLanes;if(B|=$y,ct(i,u,B,y,w,D),i===Se&&(Qt=Se=null,se=0),(N.subtreeFlags&10256)===0&&(N.flags&10256)===0||Rp||(Rp=!0,Jv=B,tb=r,dR(yr,function(){return tc(),null})),r=(N.flags&15990)!==0,(N.subtreeFlags&15990)!==0||r?(r=G.T,G.T=null,y=ot.p,ot.p=2,w=ke,ke|=4,QC(i,N),cE(N,i),OC(yb,i.containerInfo),jp=!!mb,yb=mb=null,i.current=N,rE(i,N.alternate,N),Fg(),ke=w,ot.p=y,G.T=r):i.current=N,Rp?(Rp=!1,io=i,cd=u):LE(i,B),B=i.pendingLanes,B===0&&(kr=null),Ug(N.stateNode),js(i),n!==null)for(p=i.onRecoverableError,N=0;N<n.length;N++)B=n[N],p(B.value,{componentStack:B.stack});return(cd&3)!==0&&tc(),B=i.pendingLanes,(u&4194218)!==0&&(B&42)!==0?i===eb?hd++:(hd=0,eb=i):hd=0,dd(0),null}function LE(i,n){(i.pooledCacheLanes&=n)===0&&(n=i.pooledCache,n!=null&&(i.pooledCache=null,$h(n)))}function tc(){if(io!==null){var i=io,n=Jv;Jv=0;var r=Et(cd),u=G.T,p=ot.p;try{if(ot.p=32>r?32:r,G.T=null,io===null)var y=!1;else{r=tb,tb=null;var w=io,D=cd;if(io=null,cd=0,(ke&6)!==0)throw Error(s(331));var N=ke;if(ke|=4,pE(w.current),dE(w,w.current,D,r),ke=N,dd(0,!1),qi&&typeof qi.onPostCommitFiberRoot=="function")try{qi.onPostCommitFiberRoot(vr,w)}catch{}y=!0}return y}finally{ot.p=p,G.T=u,LE(i,n)}}return!1}function OE(i,n,r){n=qn(r,n),n=Ev(i.stateNode,n,2),i=Rr(i,n,2),i!==null&&(at(i,2),js(i))}function be(i,n,r){if(i.tag===3)OE(i,i,r);else for(;n!==null;){if(n.tag===3){OE(n,i,r);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(kr===null||!kr.has(u))){i=qn(r,i),r=Pw(2),u=Rr(n,r,2),u!==null&&(zw(r,u,n,i),at(u,2),js(u));break}}n=n.return}}function rb(i,n,r){var u=i.pingCache;if(u===null){u=i.pingCache=new nR;var p=new Set;u.set(n,p)}else p=u.get(n),p===void 0&&(p=new Set,u.set(n,p));p.has(r)||(Kv=!0,p.add(r),i=uR.bind(null,i,n,r),n.then(i,i))}function uR(i,n,r){var u=i.pingCache;u!==null&&u.delete(n),i.pingedLanes|=i.suspendedLanes&r,i.warmLanes&=~r,Se===i&&(se&r)===r&&(Be===4||Be===3&&(se&62914560)===se&&300>nn()-Zv?(ke&2)===0&&Zu(i,0):Wv|=r,Qu===se&&(Qu=0)),js(i)}function NE(i,n){n===0&&(n=j()),i=Ar(i,n),i!==null&&(at(i,n),js(i))}function cR(i){var n=i.memoizedState,r=0;n!==null&&(r=n.retryLane),NE(i,r)}function hR(i,n){var r=0;switch(i.tag){case 13:var u=i.stateNode,p=i.memoizedState;p!==null&&(r=p.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(n),NE(i,r)}function dR(i,n){return Mh(i,n)}var Lp=null,ec=null,lb=!1,Op=!1,ob=!1,no=0;function js(i){i!==ec&&i.next===null&&(ec===null?Lp=ec=i:ec=ec.next=i),Op=!0,lb||(lb=!0,gR(fR))}function dd(i,n){if(!ob&&Op){ob=!0;do for(var r=!1,u=Lp;u!==null;){if(i!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var w=u.suspendedLanes,D=u.pingedLanes;y=(1<<31-Pi(42|i)+1)-1,y&=p&~(w&~D),y=y&201326677?y&201326677|1:y?y|2:0}y!==0&&(r=!0,zE(u,y))}else y=se,y=da(u,u===Se?y:0),(y&3)===0||Pl(u,y)||(r=!0,zE(u,y));u=u.next}while(r);ob=!1}}function fR(){Op=lb=!1;var i=0;no!==0&&(wR()&&(i=no),no=0);for(var n=nn(),r=null,u=Lp;u!==null;){var p=u.next,y=kE(u,n);y===0?(u.next=null,r===null?Lp=p:r.next=p,p===null&&(ec=r)):(r=u,(i!==0||(y&3)!==0)&&(Op=!0)),u=p}dd(i)}function kE(i,n){for(var r=i.suspendedLanes,u=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var w=31-Pi(y),D=1<<w,N=p[w];N===-1?((D&r)===0||(D&u)!==0)&&(p[w]=Ry(D,n)):N<=n&&(i.expiredLanes|=D),y&=~D}if(n=Se,r=se,r=da(i,i===n?r:0),u=i.callbackNode,r===0||i===n&&we===2||i.cancelPendingCommit!==null)return u!==null&&u!==null&&ds(u),i.callbackNode=null,i.callbackPriority=0;if((r&3)===0||Pl(i,r)){if(n=r&-r,n===i.callbackPriority)return n;switch(u!==null&&ds(u),Et(r)){case 2:case 8:r=Dh;break;case 32:r=yr;break;case 268435456:r=fs;break;default:r=yr}return u=PE.bind(null,i),r=Mh(r,u),i.callbackPriority=n,i.callbackNode=r,n}return u!==null&&u!==null&&ds(u),i.callbackPriority=2,i.callbackNode=null,2}function PE(i,n){var r=i.callbackNode;if(tc()&&i.callbackNode!==r)return null;var u=se;return u=da(i,i===Se?u:0),u===0?null:(wE(i,u,n),kE(i,nn()),i.callbackNode!=null&&i.callbackNode===r?PE.bind(null,i):null)}function zE(i,n){if(tc())return null;wE(i,n,!0)}function gR(i){_R(function(){(ke&6)!==0?Mh(Fn,i):i()})}function ub(){return no===0&&(no=F()),no}function FE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Yg(""+i)}function HE(i,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,i.id&&r.setAttribute("form",i.id),n.parentNode.insertBefore(r,n),i=new FormData(i),r.parentNode.removeChild(r),i}function pR(i,n,r,u,p){if(n==="submit"&&r&&r.stateNode===p){var y=FE((p[Ht]||null).action),w=u.submitter;w&&(n=(n=w[Ht]||null)?FE(n.formAction):w.getAttribute("formAction"),n!==null&&(y=n,w=null));var D=new Wg("action","action",null,u,p);i.push({event:D,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(no!==0){var N=w?HE(p,w):new FormData(p);vv(r,{pending:!0,data:N,method:p.method,action:y},null,N)}}else typeof y=="function"&&(D.preventDefault(),N=w?HE(p,w):new FormData(p),vv(r,{pending:!0,data:N,method:p.method,action:y},y,N))},currentTarget:p}]})}}for(var cb=0;cb<DS.length;cb++){var hb=DS[cb],mR=hb.toLowerCase(),yR=hb[0].toUpperCase()+hb.slice(1);gs(mR,"on"+yR)}gs(xS,"onAnimationEnd"),gs(TS,"onAnimationIteration"),gs(CS,"onAnimationStart"),gs("dblclick","onDoubleClick"),gs("focusin","onFocus"),gs("focusout","onBlur"),gs(kC,"onTransitionRun"),gs(PC,"onTransitionStart"),gs(zC,"onTransitionCancel"),gs(RS,"onTransitionEnd"),Le("onMouseEnter",["mouseout","mouseover"]),Le("onMouseLeave",["mouseout","mouseover"]),Le("onPointerEnter",["pointerout","pointerover"]),Le("onPointerLeave",["pointerout","pointerover"]),ne("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ne("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ne("onBeforeInput",["compositionend","keypress","textInput","paste"]),ne("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ne("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ne("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fd));function BE(i,n){n=(n&4)!==0;for(var r=0;r<i.length;r++){var u=i[r],p=u.event;u=u.listeners;t:{var y=void 0;if(n)for(var w=u.length-1;0<=w;w--){var D=u[w],N=D.instance,B=D.currentTarget;if(D=D.listener,N!==y&&p.isPropagationStopped())break t;y=D,p.currentTarget=B;try{y(p)}catch(Q){vp(Q)}p.currentTarget=null,y=N}else for(w=0;w<u.length;w++){if(D=u[w],N=D.instance,B=D.currentTarget,D=D.listener,N!==y&&p.isPropagationStopped())break t;y=D,p.currentTarget=B;try{y(p)}catch(Q){vp(Q)}p.currentTarget=null,y=N}}}}function te(i,n){var r=n[Ye];r===void 0&&(r=n[Ye]=new Set);var u=i+"__bubble";r.has(u)||(UE(n,i,2,!1),r.add(u))}function db(i,n,r){var u=0;n&&(u|=4),UE(r,i,u,n)}var Np="_reactListening"+Math.random().toString(36).slice(2);function fb(i){if(!i[Np]){i[Np]=!0,zl.forEach(function(r){r!=="selectionchange"&&(vR.has(r)||db(r,!1,i),db(r,!0,i))});var n=i.nodeType===9?i:i.ownerDocument;n===null||n[Np]||(n[Np]=!0,db("selectionchange",!1,n))}}function UE(i,n,r,u){switch(u1(n)){case 2:var p=qR;break;case 8:p=VR;break;default:p=Tb}r=p.bind(null,n,r,i),p=void 0,!Py||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),u?p!==void 0?i.addEventListener(n,r,{capture:!0,passive:p}):i.addEventListener(n,r,!0):p!==void 0?i.addEventListener(n,r,{passive:p}):i.addEventListener(n,r,!1)}function gb(i,n,r,u,p){var y=u;if((n&1)===0&&(n&2)===0&&u!==null)t:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var D=u.stateNode.containerInfo;if(D===p||D.nodeType===8&&D.parentNode===p)break;if(w===4)for(w=u.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===p||N.nodeType===8&&N.parentNode===p))return;w=w.return}for(;D!==null;){if(w=Si(D),w===null)return;if(N=w.tag,N===5||N===6||N===26||N===27){u=y=w;continue t}D=D.parentNode}}u=u.return}eS(function(){var B=y,Q=Ny(r),st=[];t:{var X=MS.get(i);if(X!==void 0){var W=Wg,_t=i;switch(i){case"keypress":if($g(r)===0)break t;case"keydown":case"keyup":W=hC;break;case"focusin":_t="focus",W=By;break;case"focusout":_t="blur",W=By;break;case"beforeblur":case"afterblur":W=By;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=sS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=JT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=gC;break;case xS:case TS:case CS:W=iC;break;case RS:W=mC;break;case"scroll":case"scrollend":W=QT;break;case"wheel":W=vC;break;case"copy":case"cut":case"paste":W=sC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=rS;break;case"toggle":case"beforetoggle":W=AC}var Ut=(n&4)!==0,Ue=!Ut&&(i==="scroll"||i==="scrollend"),I=Ut?X!==null?X+"Capture":null:X;Ut=[];for(var H=B,V;H!==null;){var tt=H;if(V=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||V===null||I===null||(tt=Oh(H,I),tt!=null&&Ut.push(gd(H,tt,V))),Ue)break;H=H.return}0<Ut.length&&(X=new W(X,_t,null,r,Q),st.push({event:X,listeners:Ut}))}}if((n&7)===0){t:{if(X=i==="mouseover"||i==="pointerover",W=i==="mouseout"||i==="pointerout",X&&r!==Oy&&(_t=r.relatedTarget||r.fromElement)&&(Si(_t)||_t[he]))break t;if((W||X)&&(X=Q.window===Q?Q:(X=Q.ownerDocument)?X.defaultView||X.parentWindow:window,W?(_t=r.relatedTarget||r.toElement,W=B,_t=_t?Si(_t):null,_t!==null&&(Ue=dt(_t),Ut=_t.tag,_t!==Ue||Ut!==5&&Ut!==27&&Ut!==6)&&(_t=null)):(W=null,_t=B),W!==_t)){if(Ut=sS,tt="onMouseLeave",I="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(Ut=rS,tt="onPointerLeave",I="onPointerEnter",H="pointer"),Ue=W==null?X:ga(W),V=_t==null?X:ga(_t),X=new Ut(tt,H+"leave",W,r,Q),X.target=Ue,X.relatedTarget=V,tt=null,Si(Q)===B&&(Ut=new Ut(I,H+"enter",_t,r,Q),Ut.target=V,Ut.relatedTarget=Ue,tt=Ut),Ue=tt,W&&_t)e:{for(Ut=W,I=_t,H=0,V=Ut;V;V=ic(V))H++;for(V=0,tt=I;tt;tt=ic(tt))V++;for(;0<H-V;)Ut=ic(Ut),H--;for(;0<V-H;)I=ic(I),V--;for(;H--;){if(Ut===I||I!==null&&Ut===I.alternate)break e;Ut=ic(Ut),I=ic(I)}Ut=null}else Ut=null;W!==null&&IE(st,X,W,Ut,!1),_t!==null&&Ue!==null&&IE(st,Ue,_t,Ut,!0)}}t:{if(X=B?ga(B):window,W=X.nodeName&&X.nodeName.toLowerCase(),W==="select"||W==="input"&&X.type==="file")var bt=gS;else if(dS(X))if(pS)bt=DC;else{bt=RC;var $t=CC}else W=X.nodeName,!W||W.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?B&&Ly(B.elementType)&&(bt=gS):bt=MC;if(bt&&(bt=bt(i,B))){fS(st,bt,r,Q);break t}$t&&$t(i,X,B),i==="focusout"&&B&&X.type==="number"&&B.memoizedProps.value!=null&&Dy(X,"number",X.value)}switch($t=B?ga(B):window,i){case"focusin":(dS($t)||$t.contentEditable==="true")&&(ku=$t,Vy=B,Uh=null);break;case"focusout":Uh=Vy=ku=null;break;case"mousedown":Yy=!0;break;case"contextmenu":case"mouseup":case"dragend":Yy=!1,ES(st,r,Q);break;case"selectionchange":if(NC)break;case"keydown":case"keyup":ES(st,r,Q)}var Ct;if(Iy)t:{switch(i){case"compositionstart":var Ft="onCompositionStart";break t;case"compositionend":Ft="onCompositionEnd";break t;case"compositionupdate":Ft="onCompositionUpdate";break t}Ft=void 0}else Nu?cS(i,r)&&(Ft="onCompositionEnd"):i==="keydown"&&r.keyCode===229&&(Ft="onCompositionStart");Ft&&(lS&&r.locale!=="ko"&&(Nu||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&Nu&&(Ct=iS()):(br=Q,zy="value"in br?br.value:br.textContent,Nu=!0)),$t=kp(B,Ft),0<$t.length&&(Ft=new aS(Ft,i,null,r,Q),st.push({event:Ft,listeners:$t}),Ct?Ft.data=Ct:(Ct=hS(r),Ct!==null&&(Ft.data=Ct)))),(Ct=wC?EC(i,r):_C(i,r))&&(Ft=kp(B,"onBeforeInput"),0<Ft.length&&($t=new aS("onBeforeInput","beforeinput",null,r,Q),st.push({event:$t,listeners:Ft}),$t.data=Ct)),pR(st,i,B,r,Q)}BE(st,n)})}function gd(i,n,r){return{instance:i,listener:n,currentTarget:r}}function kp(i,n){for(var r=n+"Capture",u=[];i!==null;){var p=i,y=p.stateNode;p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Oh(i,r),p!=null&&u.unshift(gd(i,p,y)),p=Oh(i,n),p!=null&&u.push(gd(i,p,y))),i=i.return}return u}function ic(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function IE(i,n,r,u,p){for(var y=n._reactName,w=[];r!==null&&r!==u;){var D=r,N=D.alternate,B=D.stateNode;if(D=D.tag,N!==null&&N===u)break;D!==5&&D!==26&&D!==27||B===null||(N=B,p?(B=Oh(r,y),B!=null&&w.unshift(gd(r,B,N))):p||(B=Oh(r,y),B!=null&&w.push(gd(r,B,N)))),r=r.return}w.length!==0&&i.push({event:n,listeners:w})}var bR=/\r\n?/g,AR=/\u0000|\uFFFD/g;function jE(i){return(typeof i=="string"?i:""+i).replace(bR,`
`).replace(AR,"")}function GE(i,n){return n=jE(n),jE(i)===n}function Pp(){}function pe(i,n,r,u,p,y){switch(r){case"children":typeof u=="string"?n==="body"||n==="textarea"&&u===""||Du(i,u):(typeof u=="number"||typeof u=="bigint")&&n!=="body"&&Du(i,""+u);break;case"className":Gg(i,"class",u);break;case"tabIndex":Gg(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Gg(i,r,u);break;case"style":JA(i,u,y);break;case"data":if(n!=="object"){Gg(i,"data",u);break}case"src":case"href":if(u===""&&(n!=="a"||r!=="href")){i.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=Yg(""+u),i.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(n!=="input"&&pe(i,n,"name",p.name,p,null),pe(i,n,"formEncType",p.formEncType,p,null),pe(i,n,"formMethod",p.formMethod,p,null),pe(i,n,"formTarget",p.formTarget,p,null)):(pe(i,n,"encType",p.encType,p,null),pe(i,n,"method",p.method,p,null),pe(i,n,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=Yg(""+u),i.setAttribute(r,u);break;case"onClick":u!=null&&(i.onclick=Pp);break;case"onScroll":u!=null&&te("scroll",i);break;case"onScrollEnd":u!=null&&te("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=r}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}r=Yg(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""+u):i.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""):i.removeAttribute(r);break;case"capture":case"download":u===!0?i.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,u):i.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(r,u):i.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(r):i.setAttribute(r,u);break;case"popover":te("beforetoggle",i),te("toggle",i),Ru(i,"popover",u);break;case"xlinkActuate":ma(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ma(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ma(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ma(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ma(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ma(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ma(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ma(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ma(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ru(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=KT.get(r)||r,Ru(i,r,u))}}function pb(i,n,r,u,p,y){switch(r){case"style":JA(i,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=r}}break;case"children":typeof u=="string"?Du(i,u):(typeof u=="number"||typeof u=="bigint")&&Du(i,""+u);break;case"onScroll":u!=null&&te("scroll",i);break;case"onScrollEnd":u!=null&&te("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Pp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fl.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),n=r.slice(2,p?r.length-7:void 0),y=i[Ht]||null,y=y!=null?y[r]:null,typeof y=="function"&&i.removeEventListener(n,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(r in i?i[r]=null:i.hasAttribute(r)&&i.removeAttribute(r)),i.addEventListener(n,u,p);break t}r in i?i[r]=u:u===!0?i.setAttribute(r,""):Ru(i,r,u)}}}function xi(i,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":te("error",i),te("load",i);var u=!1,p=!1,y;for(y in r)if(r.hasOwnProperty(y)){var w=r[y];if(w!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:pe(i,n,y,w,r,null)}}p&&pe(i,n,"srcSet",r.srcSet,r,null),u&&pe(i,n,"src",r.src,r,null);return;case"input":te("invalid",i);var D=y=w=p=null,N=null,B=null;for(u in r)if(r.hasOwnProperty(u)){var Q=r[u];if(Q!=null)switch(u){case"name":p=Q;break;case"type":w=Q;break;case"checked":N=Q;break;case"defaultChecked":B=Q;break;case"value":y=Q;break;case"defaultValue":D=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,n));break;default:pe(i,n,u,Q,r,null)}}KA(i,y,D,N,B,w,p,!1),qg(i);return;case"select":te("invalid",i),u=w=y=null;for(p in r)if(r.hasOwnProperty(p)&&(D=r[p],D!=null))switch(p){case"value":y=D;break;case"defaultValue":w=D;break;case"multiple":u=D;default:pe(i,n,p,D,r,null)}n=y,r=w,i.multiple=!!u,n!=null?Mu(i,!!u,n,!1):r!=null&&Mu(i,!!u,r,!0);return;case"textarea":te("invalid",i),y=p=u=null;for(w in r)if(r.hasOwnProperty(w)&&(D=r[w],D!=null))switch(w){case"value":u=D;break;case"defaultValue":p=D;break;case"children":y=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(s(91));break;default:pe(i,n,w,D,r,null)}QA(i,u,p,y),qg(i);return;case"option":for(N in r)if(r.hasOwnProperty(N)&&(u=r[N],u!=null))switch(N){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:pe(i,n,N,u,r,null)}return;case"dialog":te("cancel",i),te("close",i);break;case"iframe":case"object":te("load",i);break;case"video":case"audio":for(u=0;u<fd.length;u++)te(fd[u],i);break;case"image":te("error",i),te("load",i);break;case"details":te("toggle",i);break;case"embed":case"source":case"link":te("error",i),te("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in r)if(r.hasOwnProperty(B)&&(u=r[B],u!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:pe(i,n,B,u,r,null)}return;default:if(Ly(n)){for(Q in r)r.hasOwnProperty(Q)&&(u=r[Q],u!==void 0&&pb(i,n,Q,u,r,void 0));return}}for(D in r)r.hasOwnProperty(D)&&(u=r[D],u!=null&&pe(i,n,D,u,r,null))}function SR(i,n,r,u){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,w=null,D=null,N=null,B=null,Q=null;for(W in r){var st=r[W];if(r.hasOwnProperty(W)&&st!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":N=st;default:u.hasOwnProperty(W)||pe(i,n,W,null,u,st)}}for(var X in u){var W=u[X];if(st=r[X],u.hasOwnProperty(X)&&(W!=null||st!=null))switch(X){case"type":y=W;break;case"name":p=W;break;case"checked":B=W;break;case"defaultChecked":Q=W;break;case"value":w=W;break;case"defaultValue":D=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,n));break;default:W!==st&&pe(i,n,X,W,u,st)}}My(i,w,D,N,B,Q,y,p);return;case"select":W=w=D=X=null;for(y in r)if(N=r[y],r.hasOwnProperty(y)&&N!=null)switch(y){case"value":break;case"multiple":W=N;default:u.hasOwnProperty(y)||pe(i,n,y,null,u,N)}for(p in u)if(y=u[p],N=r[p],u.hasOwnProperty(p)&&(y!=null||N!=null))switch(p){case"value":X=y;break;case"defaultValue":D=y;break;case"multiple":w=y;default:y!==N&&pe(i,n,p,y,u,N)}n=D,r=w,u=W,X!=null?Mu(i,!!r,X,!1):!!u!=!!r&&(n!=null?Mu(i,!!r,n,!0):Mu(i,!!r,r?[]:"",!1));return;case"textarea":W=X=null;for(D in r)if(p=r[D],r.hasOwnProperty(D)&&p!=null&&!u.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:pe(i,n,D,null,u,p)}for(w in u)if(p=u[w],y=r[w],u.hasOwnProperty(w)&&(p!=null||y!=null))switch(w){case"value":X=p;break;case"defaultValue":W=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==y&&pe(i,n,w,p,u,y)}WA(i,X,W);return;case"option":for(var _t in r)if(X=r[_t],r.hasOwnProperty(_t)&&X!=null&&!u.hasOwnProperty(_t))switch(_t){case"selected":i.selected=!1;break;default:pe(i,n,_t,null,u,X)}for(N in u)if(X=u[N],W=r[N],u.hasOwnProperty(N)&&X!==W&&(X!=null||W!=null))switch(N){case"selected":i.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:pe(i,n,N,X,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ut in r)X=r[Ut],r.hasOwnProperty(Ut)&&X!=null&&!u.hasOwnProperty(Ut)&&pe(i,n,Ut,null,u,X);for(B in u)if(X=u[B],W=r[B],u.hasOwnProperty(B)&&X!==W&&(X!=null||W!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,n));break;default:pe(i,n,B,X,u,W)}return;default:if(Ly(n)){for(var Ue in r)X=r[Ue],r.hasOwnProperty(Ue)&&X!==void 0&&!u.hasOwnProperty(Ue)&&pb(i,n,Ue,void 0,u,X);for(Q in u)X=u[Q],W=r[Q],!u.hasOwnProperty(Q)||X===W||X===void 0&&W===void 0||pb(i,n,Q,X,u,W);return}}for(var I in r)X=r[I],r.hasOwnProperty(I)&&X!=null&&!u.hasOwnProperty(I)&&pe(i,n,I,null,u,X);for(st in u)X=u[st],W=r[st],!u.hasOwnProperty(st)||X===W||X==null&&W==null||pe(i,n,st,X,u,W)}var mb=null,yb=null;function zp(i){return i.nodeType===9?i:i.ownerDocument}function qE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function VE(i,n){if(i===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&n==="foreignObject"?0:i}function vb(i,n){return i==="textarea"||i==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var bb=null;function wR(){var i=window.event;return i&&i.type==="popstate"?i===bb?!1:(bb=i,!0):(bb=null,!1)}var YE=typeof setTimeout=="function"?setTimeout:void 0,ER=typeof clearTimeout=="function"?clearTimeout:void 0,XE=typeof Promise=="function"?Promise:void 0,_R=typeof queueMicrotask=="function"?queueMicrotask:typeof XE<"u"?function(i){return XE.resolve(null).then(i).catch(xR)}:YE;function xR(i){setTimeout(function(){throw i})}function Ab(i,n){var r=n,u=0;do{var p=r.nextSibling;if(i.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"){if(u===0){i.removeChild(p),wd(n);return}u--}else r!=="$"&&r!=="$?"&&r!=="$!"||u++;r=p}while(r);wd(n)}function Sb(i){var n=i.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Sb(r),fa(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}i.removeChild(r)}}function TR(i,n,r,u){for(;i.nodeType===1;){var p=r;if(i.nodeName.toLowerCase()!==n.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Bn])switch(n){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==p.rel||i.getAttribute("href")!==(p.href==null?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(n==="input"&&i.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=ys(i.nextSibling),i===null)break}return null}function CR(i,n,r){if(n==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=ys(i.nextSibling),i===null))return null;return i}function ys(i){for(;i!=null;i=i.nextSibling){var n=i.nodeType;if(n===1||n===3)break;if(n===8){if(n=i.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return i}function $E(i){i=i.previousSibling;for(var n=0;i;){if(i.nodeType===8){var r=i.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return i;n--}else r==="/$"&&n++}i=i.previousSibling}return null}function KE(i,n,r){switch(n=zp(r),i){case"html":if(i=n.documentElement,!i)throw Error(s(452));return i;case"head":if(i=n.head,!i)throw Error(s(453));return i;case"body":if(i=n.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}var Zn=new Map,WE=new Set;function Fp(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var La=ot.d;ot.d={f:RR,r:MR,D:DR,C:LR,L:OR,m:NR,X:PR,S:kR,M:zR};function RR(){var i=La.f(),n=Mp();return i||n}function MR(i){var n=wi(i);n!==null&&n.tag===5&&n.type==="form"?Ew(n):La.r(i)}var nc=typeof document>"u"?null:document;function QE(i,n,r){var u=nc;if(u&&typeof n=="string"&&n){var p=jn(n);p='link[rel="'+i+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),WE.has(p)||(WE.add(p),i={rel:i,crossOrigin:r,href:n},u.querySelector(p)===null&&(n=u.createElement("link"),xi(n,"link",i),Ae(n),u.head.appendChild(n)))}}function DR(i){La.D(i),QE("dns-prefetch",i,null)}function LR(i,n){La.C(i,n),QE("preconnect",i,n)}function OR(i,n,r){La.L(i,n,r);var u=nc;if(u&&i&&n){var p='link[rel="preload"][as="'+jn(n)+'"]';n==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+jn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+jn(r.imageSizes)+'"]')):p+='[href="'+jn(i)+'"]';var y=p;switch(n){case"style":y=sc(i);break;case"script":y=ac(i)}Zn.has(y)||(i=Z({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:i,as:n},r),Zn.set(y,i),u.querySelector(p)!==null||n==="style"&&u.querySelector(pd(y))||n==="script"&&u.querySelector(md(y))||(n=u.createElement("link"),xi(n,"link",i),Ae(n),u.head.appendChild(n)))}}function NR(i,n){La.m(i,n);var r=nc;if(r&&i){var u=n&&typeof n.as=="string"?n.as:"script",p='link[rel="modulepreload"][as="'+jn(u)+'"][href="'+jn(i)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=ac(i)}if(!Zn.has(y)&&(i=Z({rel:"modulepreload",href:i},n),Zn.set(y,i),r.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(md(y)))return}u=r.createElement("link"),xi(u,"link",i),Ae(u),r.head.appendChild(u)}}}function kR(i,n,r){La.S(i,n,r);var u=nc;if(u&&i){var p=Un(u).hoistableStyles,y=sc(i);n=n||"default";var w=p.get(y);if(!w){var D={loading:0,preload:null};if(w=u.querySelector(pd(y)))D.loading=5;else{i=Z({rel:"stylesheet",href:i,"data-precedence":n},r),(r=Zn.get(y))&&wb(i,r);var N=w=u.createElement("link");Ae(N),xi(N,"link",i),N._p=new Promise(function(B,Q){N.onload=B,N.onerror=Q}),N.addEventListener("load",function(){D.loading|=1}),N.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Hp(w,n,u)}w={type:"stylesheet",instance:w,count:1,state:D},p.set(y,w)}}}function PR(i,n){La.X(i,n);var r=nc;if(r&&i){var u=Un(r).hoistableScripts,p=ac(i),y=u.get(p);y||(y=r.querySelector(md(p)),y||(i=Z({src:i,async:!0},n),(n=Zn.get(p))&&Eb(i,n),y=r.createElement("script"),Ae(y),xi(y,"link",i),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function zR(i,n){La.M(i,n);var r=nc;if(r&&i){var u=Un(r).hoistableScripts,p=ac(i),y=u.get(p);y||(y=r.querySelector(md(p)),y||(i=Z({src:i,async:!0,type:"module"},n),(n=Zn.get(p))&&Eb(i,n),y=r.createElement("script"),Ae(y),xi(y,"link",i),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function ZE(i,n,r,u){var p=(p=ei.current)?Fp(p):null;if(!p)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=sc(r.href),r=Un(p).hoistableStyles,u=r.get(n),u||(u={type:"style",instance:null,count:0,state:null},r.set(n,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){i=sc(r.href);var y=Un(p).hoistableStyles,w=y.get(i);if(w||(p=p.ownerDocument||p,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,w),(y=p.querySelector(pd(i)))&&!y._p&&(w.instance=y,w.state.loading=5),Zn.has(i)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Zn.set(i,r),y||FR(p,i,r,w.state))),n&&u===null)throw Error(s(528,""));return w}if(n&&u!==null)throw Error(s(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ac(r),r=Un(p).hoistableScripts,u=r.get(n),u||(u={type:"script",instance:null,count:0,state:null},r.set(n,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function sc(i){return'href="'+jn(i)+'"'}function pd(i){return'link[rel="stylesheet"]['+i+"]"}function JE(i){return Z({},i,{"data-precedence":i.precedence,precedence:null})}function FR(i,n,r,u){i.querySelector('link[rel="preload"][as="style"]['+n+"]")?u.loading=1:(n=i.createElement("link"),u.preload=n,n.addEventListener("load",function(){return u.loading|=1}),n.addEventListener("error",function(){return u.loading|=2}),xi(n,"link",r),Ae(n),i.head.appendChild(n))}function ac(i){return'[src="'+jn(i)+'"]'}function md(i){return"script[async]"+i}function t1(i,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var u=i.querySelector('style[data-href~="'+jn(r.href)+'"]');if(u)return n.instance=u,Ae(u),u;var p=Z({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Ae(u),xi(u,"style",p),Hp(u,r.precedence,i),n.instance=u;case"stylesheet":p=sc(r.href);var y=i.querySelector(pd(p));if(y)return n.state.loading|=4,n.instance=y,Ae(y),y;u=JE(r),(p=Zn.get(p))&&wb(u,p),y=(i.ownerDocument||i).createElement("link"),Ae(y);var w=y;return w._p=new Promise(function(D,N){w.onload=D,w.onerror=N}),xi(y,"link",u),n.state.loading|=4,Hp(y,r.precedence,i),n.instance=y;case"script":return y=ac(r.src),(p=i.querySelector(md(y)))?(n.instance=p,Ae(p),p):(u=r,(p=Zn.get(y))&&(u=Z({},r),Eb(u,p)),i=i.ownerDocument||i,p=i.createElement("script"),Ae(p),xi(p,"link",u),i.head.appendChild(p),n.instance=p);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(u=n.instance,n.state.loading|=4,Hp(u,r.precedence,i));return n.instance}function Hp(i,n,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,w=0;w<u.length;w++){var D=u[w];if(D.dataset.precedence===n)y=D;else if(y!==p)break}y?y.parentNode.insertBefore(i,y.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(i,n.firstChild))}function wb(i,n){i.crossOrigin==null&&(i.crossOrigin=n.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=n.referrerPolicy),i.title==null&&(i.title=n.title)}function Eb(i,n){i.crossOrigin==null&&(i.crossOrigin=n.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=n.referrerPolicy),i.integrity==null&&(i.integrity=n.integrity)}var Bp=null;function e1(i,n,r){if(Bp===null){var u=new Map,p=Bp=new Map;p.set(r,u)}else p=Bp,u=p.get(r),u||(u=new Map,p.set(r,u));if(u.has(i))return u;for(u.set(i,null),r=r.getElementsByTagName(i),p=0;p<r.length;p++){var y=r[p];if(!(y[Bn]||y[vt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(n)||"";w=i+w;var D=u.get(w);D?D.push(y):u.set(w,[y])}}return u}function i1(i,n,r){i=i.ownerDocument||i,i.head.insertBefore(r,n==="title"?i.querySelector("head > title"):null)}function HR(i,n,r){if(r===1||n.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return i=n.disabled,typeof n.precedence=="string"&&i==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function n1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var yd=null;function BR(){}function UR(i,n,r){if(yd===null)throw Error(s(475));var u=yd;if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var p=sc(r.href),y=i.querySelector(pd(p));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=Up.bind(u),i.then(u,u)),n.state.loading|=4,n.instance=y,Ae(y);return}y=i.ownerDocument||i,r=JE(r),(p=Zn.get(p))&&wb(r,p),y=y.createElement("link"),Ae(y);var w=y;w._p=new Promise(function(D,N){w.onload=D,w.onerror=N}),xi(y,"link",r),n.instance=y}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(n,i),(i=n.state.preload)&&(n.state.loading&3)===0&&(u.count++,n=Up.bind(u),i.addEventListener("load",n),i.addEventListener("error",n))}}function IR(){if(yd===null)throw Error(s(475));var i=yd;return i.stylesheets&&i.count===0&&_b(i,i.stylesheets),0<i.count?function(n){var r=setTimeout(function(){if(i.stylesheets&&_b(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=n,function(){i.unsuspend=null,clearTimeout(r)}}:null}function Up(){if(this.count--,this.count===0){if(this.stylesheets)_b(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ip=null;function _b(i,n){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ip=new Map,n.forEach(jR,i),Ip=null,Up.call(i))}function jR(i,n){if(!(n.state.loading&4)){var r=Ip.get(i);if(r)var u=r.get(null);else{r=new Map,Ip.set(i,r);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var w=p[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(r.set(w.dataset.precedence,w),u=w)}u&&r.set(null,u)}p=n.instance,w=p.getAttribute("data-precedence"),y=r.get(w)||u,y===u&&r.set(null,p),r.set(w,p),this.count++,u=Up.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),n.state.loading|=4}}var vd={$$typeof:A,Provider:null,Consumer:null,_currentValue:Ot,_currentValue2:Ot,_threadCount:0};function GR(i,n,r,u,p,y,w,D){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=K(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=K(0),this.hiddenUpdates=K(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function s1(i,n,r,u,p,y,w,D,N,B,Q,st){return i=new GR(i,n,r,w,D,N,B,st),n=1,y===!0&&(n|=24),y=Wn(3,null,null,n),i.current=y,y.stateNode=i,n=iv(),n.refCount++,i.pooledCache=n,n.refCount++,y.memoizedState={element:u,isDehydrated:r,cache:n},zv(y),i}function a1(i){return i?(i=Fu,i):Fu}function r1(i,n,r,u,p,y){p=a1(p),u.context===null?u.context=p:u.pendingContext=p,u=Cr(n),u.payload={element:r},y=y===void 0?null:y,y!==null&&(u.callback=y),r=Rr(i,u,n),r!==null&&(Yi(r,i,n),ed(r,i,n))}function l1(i,n){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var r=i.retryLane;i.retryLane=r!==0&&r<n?r:n}}function xb(i,n){l1(i,n),(i=i.alternate)&&l1(i,n)}function o1(i){if(i.tag===13){var n=Ar(i,67108864);n!==null&&Yi(n,i,67108864),xb(i,67108864)}}var jp=!0;function qR(i,n,r,u){var p=G.T;G.T=null;var y=ot.p;try{ot.p=2,Tb(i,n,r,u)}finally{ot.p=y,G.T=p}}function VR(i,n,r,u){var p=G.T;G.T=null;var y=ot.p;try{ot.p=8,Tb(i,n,r,u)}finally{ot.p=y,G.T=p}}function Tb(i,n,r,u){if(jp){var p=Cb(u);if(p===null)gb(i,n,u,Gp,r),c1(i,u);else if(XR(p,i,n,r,u))u.stopPropagation();else if(c1(i,u),n&4&&-1<YR.indexOf(i)){for(;p!==null;){var y=wi(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=Hn(y.pendingLanes);if(w!==0){var D=y;for(D.pendingLanes|=2,D.entangledLanes|=2;w;){var N=1<<31-Pi(w);D.entanglements[1]|=N,w&=~N}js(y),(ke&6)===0&&(Tp=nn()+500,dd(0))}}break;case 13:D=Ar(y,2),D!==null&&Yi(D,y,2),Mp(),xb(y,2)}if(y=Cb(u),y===null&&gb(i,n,u,Gp,r),y===p)break;p=y}p!==null&&u.stopPropagation()}else gb(i,n,u,null,r)}}function Cb(i){return i=Ny(i),Rb(i)}var Gp=null;function Rb(i){if(Gp=null,i=Si(i),i!==null){var n=dt(i);if(n===null)i=null;else{var r=n.tag;if(r===13){if(i=Pt(n),i!==null)return i;i=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;i=null}else n!==i&&(i=null)}}return Gp=i,null}function u1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fs()){case Fn:return 2;case Dh:return 8;case yr:case Ty:return 32;case fs:return 268435456;default:return 32}default:return 32}}var Mb=!1,Pr=null,zr=null,Fr=null,bd=new Map,Ad=new Map,Hr=[],YR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c1(i,n){switch(i){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":bd.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ad.delete(n.pointerId)}}function Sd(i,n,r,u,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:n,domEventName:r,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},n!==null&&(n=wi(n),n!==null&&o1(n)),i):(i.eventSystemFlags|=u,n=i.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),i)}function XR(i,n,r,u,p){switch(n){case"focusin":return Pr=Sd(Pr,i,n,r,u,p),!0;case"dragenter":return zr=Sd(zr,i,n,r,u,p),!0;case"mouseover":return Fr=Sd(Fr,i,n,r,u,p),!0;case"pointerover":var y=p.pointerId;return bd.set(y,Sd(bd.get(y)||null,i,n,r,u,p)),!0;case"gotpointercapture":return y=p.pointerId,Ad.set(y,Sd(Ad.get(y)||null,i,n,r,u,p)),!0}return!1}function h1(i){var n=Si(i.target);if(n!==null){var r=dt(n);if(r!==null){if(n=r.tag,n===13){if(n=Pt(r),n!==null){i.blockedOn=n,ft(i.priority,function(){if(r.tag===13){var u=vn(),p=Ar(r,u);p!==null&&Yi(p,r,u),xb(r,u)}});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){i.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}i.blockedOn=null}function qp(i){if(i.blockedOn!==null)return!1;for(var n=i.targetContainers;0<n.length;){var r=Cb(i.nativeEvent);if(r===null){r=i.nativeEvent;var u=new r.constructor(r.type,r);Oy=u,r.target.dispatchEvent(u),Oy=null}else return n=wi(r),n!==null&&o1(n),i.blockedOn=r,!1;n.shift()}return!0}function d1(i,n,r){qp(i)&&r.delete(n)}function $R(){Mb=!1,Pr!==null&&qp(Pr)&&(Pr=null),zr!==null&&qp(zr)&&(zr=null),Fr!==null&&qp(Fr)&&(Fr=null),bd.forEach(d1),Ad.forEach(d1)}function Vp(i,n){i.blockedOn===n&&(i.blockedOn=null,Mb||(Mb=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,$R)))}var Yp=null;function f1(i){Yp!==i&&(Yp=i,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){Yp===i&&(Yp=null);for(var n=0;n<i.length;n+=3){var r=i[n],u=i[n+1],p=i[n+2];if(typeof u!="function"){if(Rb(u||r)===null)continue;break}var y=wi(r);y!==null&&(i.splice(n,3),n-=3,vv(y,{pending:!0,data:p,method:r.method,action:u},u,p))}}))}function wd(i){function n(N){return Vp(N,i)}Pr!==null&&Vp(Pr,i),zr!==null&&Vp(zr,i),Fr!==null&&Vp(Fr,i),bd.forEach(n),Ad.forEach(n);for(var r=0;r<Hr.length;r++){var u=Hr[r];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Hr.length&&(r=Hr[0],r.blockedOn===null);)h1(r),r.blockedOn===null&&Hr.shift();if(r=(i.ownerDocument||i).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var p=r[u],y=r[u+1],w=p[Ht]||null;if(typeof y=="function")w||f1(r);else if(w){var D=null;if(y&&y.hasAttribute("formAction")){if(p=y,w=y[Ht]||null)D=w.formAction;else if(Rb(p)!==null)continue}else D=w.action;typeof D=="function"?r[u+1]=D:(r.splice(u,3),u-=3),f1(r)}}}function Db(i){this._internalRoot=i}Xp.prototype.render=Db.prototype.render=function(i){var n=this._internalRoot;if(n===null)throw Error(s(409));var r=n.current,u=vn();r1(r,u,i,n,null,null)},Xp.prototype.unmount=Db.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var n=i.containerInfo;i.tag===0&&tc(),r1(i.current,2,null,i,null,null),Mp(),n[he]=null}};function Xp(i){this._internalRoot=i}Xp.prototype.unstable_scheduleHydration=function(i){if(i){var n=Tt();i={blockedOn:null,target:i,priority:n};for(var r=0;r<Hr.length&&n!==0&&n<Hr[r].priority;r++);Hr.splice(r,0,i),r===0&&h1(i)}};var g1=t.version;if(g1!=="19.0.0")throw Error(s(527,g1,"19.0.0"));ot.findDOMNode=function(i){var n=i._reactInternals;if(n===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=et(n),i=i!==null?lt(i):null,i=i===null?null:i.stateNode,i};var KR={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:G,findFiberByHostInstance:Si,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$p.isDisabled&&$p.supportsFiber)try{vr=$p.inject(KR),qi=$p}catch{}}return _d.createRoot=function(i,n){if(!a(i))throw Error(s(299));var r=!1,u="",p=Lw,y=Ow,w=Nw,D=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onUncaughtError!==void 0&&(p=n.onUncaughtError),n.onCaughtError!==void 0&&(y=n.onCaughtError),n.onRecoverableError!==void 0&&(w=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(D=n.unstable_transitionCallbacks)),n=s1(i,1,!1,null,null,r,u,p,y,w,D,null),i[he]=n.current,fb(i.nodeType===8?i.parentNode:i),new Db(n)},_d.hydrateRoot=function(i,n,r){if(!a(i))throw Error(s(299));var u=!1,p="",y=Lw,w=Ow,D=Nw,N=null,B=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(w=r.onCaughtError),r.onRecoverableError!==void 0&&(D=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(N=r.unstable_transitionCallbacks),r.formState!==void 0&&(B=r.formState)),n=s1(i,1,!0,n,r??null,u,p,y,w,D,N,B),n.context=a1(null),r=n.current,u=vn(),p=Cr(u),p.callback=null,Rr(r,p,u),n.current.lanes=u,at(n,u),js(n),i[he]=n.current,fb(i),new Xp(n)},_d.version="19.0.0",_d}var x1;function rM(){if(x1)return kb.exports;x1=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),kb.exports=aM(),kb.exports}var lM=rM(),xd={},T1;function oM(){if(T1)return xd;T1=1,Object.defineProperty(xd,"__esModule",{value:!0}),xd.parse=o,xd.serialize=g;const h=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function o(b,A){const E=new l,_=b.length;if(_<2)return E;const C=(A==null?void 0:A.decode)||m;let R=0;do{const L=b.indexOf("=",R);if(L===-1)break;const O=b.indexOf(";",R),P=O===-1?_:O;if(L>P){R=b.lastIndexOf(";",L-1)+1;continue}const M=d(b,R,L),k=f(b,L,M),U=b.slice(M,k);if(E[U]===void 0){let $=d(b,L+1,P),G=f(b,P,$);const Z=C(b.slice($,G));E[U]=Z}R=P+1}while(R<_);return E}function d(b,A,E){do{const _=b.charCodeAt(A);if(_!==32&&_!==9)return A}while(++A<E);return E}function f(b,A,E){for(;A>E;){const _=b.charCodeAt(--A);if(_!==32&&_!==9)return A+1}return E}function g(b,A,E){const _=(E==null?void 0:E.encode)||encodeURIComponent;if(!h.test(b))throw new TypeError(`argument name is invalid: ${b}`);const C=_(A);if(!t.test(C))throw new TypeError(`argument val is invalid: ${A}`);let R=b+"="+C;if(!E)return R;if(E.maxAge!==void 0){if(!Number.isInteger(E.maxAge))throw new TypeError(`option maxAge is invalid: ${E.maxAge}`);R+="; Max-Age="+E.maxAge}if(E.domain){if(!e.test(E.domain))throw new TypeError(`option domain is invalid: ${E.domain}`);R+="; Domain="+E.domain}if(E.path){if(!s.test(E.path))throw new TypeError(`option path is invalid: ${E.path}`);R+="; Path="+E.path}if(E.expires){if(!v(E.expires)||!Number.isFinite(E.expires.valueOf()))throw new TypeError(`option expires is invalid: ${E.expires}`);R+="; Expires="+E.expires.toUTCString()}if(E.httpOnly&&(R+="; HttpOnly"),E.secure&&(R+="; Secure"),E.partitioned&&(R+="; Partitioned"),E.priority)switch(typeof E.priority=="string"?E.priority.toLowerCase():void 0){case"low":R+="; Priority=Low";break;case"medium":R+="; Priority=Medium";break;case"high":R+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${E.priority}`)}if(E.sameSite)switch(typeof E.sameSite=="string"?E.sameSite.toLowerCase():E.sameSite){case!0:case"strict":R+="; SameSite=Strict";break;case"lax":R+="; SameSite=Lax";break;case"none":R+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${E.sameSite}`)}return R}function m(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function v(b){return a.call(b)==="[object Date]"}return xd}oM();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var A_=h=>{throw TypeError(h)},uM=(h,t,e)=>t.has(h)||A_("Cannot "+e),Hb=(h,t,e)=>(uM(h,t,"read from private field"),e?e.call(h):t.get(h)),cM=(h,t,e)=>t.has(h)?A_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,e),C1="popstate";function hM(h={}){function t(s,a){let{pathname:l,search:o,hash:d}=s.location;return Jd("",{pathname:l,search:o,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(s,a){return typeof a=="string"?a:Tl(a)}return fM(t,e,null,h)}function Jt(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function bi(h,t){if(!h){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dM(){return Math.random().toString(36).substring(2,10)}function R1(h,t){return{usr:h.state,key:h.key,idx:t}}function Jd(h,t,e=null,s){return{pathname:typeof h=="string"?h:h.pathname,search:"",hash:"",...typeof t=="string"?Ol(t):t,state:e,key:t&&t.key||s||dM()}}function Tl({pathname:h="/",search:t="",hash:e=""}){return t&&t!=="?"&&(h+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(h+=e.charAt(0)==="#"?e:"#"+e),h}function Ol(h){let t={};if(h){let e=h.indexOf("#");e>=0&&(t.hash=h.substring(e),h=h.substring(0,e));let s=h.indexOf("?");s>=0&&(t.search=h.substring(s),h=h.substring(0,s)),h&&(t.pathname=h)}return t}function fM(h,t,e,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,o=a.history,d="POP",f=null,g=m();g==null&&(g=0,o.replaceState({...o.state,idx:g},""));function m(){return(o.state||{idx:null}).idx}function v(){d="POP";let C=m(),R=C==null?null:C-g;g=C,f&&f({action:d,location:_.location,delta:R})}function b(C,R){d="PUSH";let L=Jd(_.location,C,R);g=m()+1;let O=R1(L,g),P=_.createHref(L);try{o.pushState(O,"",P)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;a.location.assign(P)}l&&f&&f({action:d,location:_.location,delta:1})}function A(C,R){d="REPLACE";let L=Jd(_.location,C,R);g=m();let O=R1(L,g),P=_.createHref(L);o.replaceState(O,"",P),l&&f&&f({action:d,location:_.location,delta:0})}function E(C){let R=a.location.origin!=="null"?a.location.origin:a.location.href,L=typeof C=="string"?C:Tl(C);return L=L.replace(/ $/,"%20"),Jt(R,`No window.location.(origin|href) available to create URL for href: ${L}`),new URL(L,R)}let _={get action(){return d},get location(){return h(a,o)},listen(C){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(C1,v),f=C,()=>{a.removeEventListener(C1,v),f=null}},createHref(C){return t(a,C)},createURL:E,encodeLocation(C){let R=E(C);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:b,replace:A,go(C){return o.go(C)}};return _}var Nd,M1=class{constructor(h){if(cM(this,Nd,new Map),h)for(let[t,e]of h)this.set(t,e)}get(h){if(Hb(this,Nd).has(h))return Hb(this,Nd).get(h);if(h.defaultValue!==void 0)return h.defaultValue;throw new Error("No value found for context")}set(h,t){Hb(this,Nd).set(h,t)}};Nd=new WeakMap;var gM=new Set(["lazy","caseSensitive","path","id","index","children"]);function pM(h){return h.index===!0}function Bm(h,t,e=[],s={}){return h.map((a,l)=>{let o=[...e,String(l)],d=typeof a.id=="string"?a.id:o.join("-");if(Jt(a.index!==!0||!a.children,"Cannot specify children on an index route"),Jt(!s[d],`Found a route id collision on id "${d}".  Route id's must be globally unique within Data Router usages`),pM(a)){let f={...a,...t(a),id:d};return s[d]=f,f}else{let f={...a,...t(a),id:d,children:void 0};return s[d]=f,a.children&&(f.children=Bm(a.children,t,o,s)),f}})}function jr(h,t,e="/"){return am(h,t,e,!1)}function am(h,t,e,s){let a=typeof t=="string"?Ol(t):t,l=hs(a.pathname||"/",e);if(l==null)return null;let o=S_(h);yM(o);let d=null;for(let f=0;d==null&&f<o.length;++f){let g=RM(l);d=TM(o[f],g,s)}return d}function mM(h,t){let{route:e,pathname:s,params:a}=h;return{id:e.id,pathname:s,params:a,data:t[e.id],handle:e.handle}}function S_(h,t=[],e=[],s=""){let a=(l,o,d)=>{let f={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};f.relativePath.startsWith("/")&&(Jt(f.relativePath.startsWith(s),`Absolute route path "${f.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(s.length));let g=oa([s,f.relativePath]),m=e.concat(f);l.children&&l.children.length>0&&(Jt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),S_(l.children,t,m,g)),!(l.path==null&&!l.index)&&t.push({path:g,score:_M(g,l.index),routesMeta:m})};return h.forEach((l,o)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,o);else for(let f of w_(l.path))a(l,o,f)}),t}function w_(h){let t=h.split("/");if(t.length===0)return[];let[e,...s]=t,a=e.endsWith("?"),l=e.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let o=w_(s.join("/")),d=[];return d.push(...o.map(f=>f===""?l:[l,f].join("/"))),a&&d.push(...o),d.map(f=>h.startsWith("/")&&f===""?"/":f)}function yM(h){h.sort((t,e)=>t.score!==e.score?e.score-t.score:xM(t.routesMeta.map(s=>s.childrenIndex),e.routesMeta.map(s=>s.childrenIndex)))}var vM=/^:[\w-]+$/,bM=3,AM=2,SM=1,wM=10,EM=-2,D1=h=>h==="*";function _M(h,t){let e=h.split("/"),s=e.length;return e.some(D1)&&(s+=EM),t&&(s+=AM),e.filter(a=>!D1(a)).reduce((a,l)=>a+(vM.test(l)?bM:l===""?SM:wM),s)}function xM(h,t){return h.length===t.length&&h.slice(0,-1).every((s,a)=>s===t[a])?h[h.length-1]-t[t.length-1]:0}function TM(h,t,e=!1){let{routesMeta:s}=h,a={},l="/",o=[];for(let d=0;d<s.length;++d){let f=s[d],g=d===s.length-1,m=l==="/"?t:t.slice(l.length)||"/",v=Um({path:f.relativePath,caseSensitive:f.caseSensitive,end:g},m),b=f.route;if(!v&&g&&e&&!s[s.length-1].route.index&&(v=Um({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!v)return null;Object.assign(a,v.params),o.push({params:a,pathname:oa([l,v.pathname]),pathnameBase:LM(oa([l,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(l=oa([l,v.pathnameBase]))}return o}function Um(h,t){typeof h=="string"&&(h={path:h,caseSensitive:!1,end:!0});let[e,s]=CM(h.path,h.caseSensitive,h.end),a=t.match(e);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:s.reduce((g,{paramName:m,isOptional:v},b)=>{if(m==="*"){let E=d[b]||"";o=l.slice(0,l.length-E.length).replace(/(.)\/+$/,"$1")}const A=d[b];return v&&!A?g[m]=void 0:g[m]=(A||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:o,pattern:h}}function CM(h,t=!1,e=!0){bi(h==="*"||!h.endsWith("*")||h.endsWith("/*"),`Route path "${h}" will be treated as if it were "${h.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${h.replace(/\*$/,"/*")}".`);let s=[],a="^"+h.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,d,f)=>(s.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return h.endsWith("*")?(s.push({paramName:"*"}),a+=h==="*"||h==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":h!==""&&h!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function RM(h){try{return h.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return bi(!1,`The URL path "${h}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),h}}function hs(h,t){if(t==="/")return h;if(!h.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,s=h.charAt(e);return s&&s!=="/"?null:h.slice(e)||"/"}function MM(h,t="/"){let{pathname:e,search:s="",hash:a=""}=typeof h=="string"?Ol(h):h;return{pathname:e?e.startsWith("/")?e:DM(e,t):t,search:OM(s),hash:NM(a)}}function DM(h,t){let e=t.replace(/\/+$/,"").split("/");return h.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function Bb(h,t,e,s){return`Cannot include a '${h}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function E_(h){return h.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function my(h){let t=E_(h);return t.map((e,s)=>s===t.length-1?e.pathname:e.pathnameBase)}function yy(h,t,e,s=!1){let a;typeof h=="string"?a=Ol(h):(a={...h},Jt(!a.pathname||!a.pathname.includes("?"),Bb("?","pathname","search",a)),Jt(!a.pathname||!a.pathname.includes("#"),Bb("#","pathname","hash",a)),Jt(!a.search||!a.search.includes("#"),Bb("#","search","hash",a)));let l=h===""||a.pathname==="",o=l?"/":a.pathname,d;if(o==null)d=e;else{let v=t.length-1;if(!s&&o.startsWith("..")){let b=o.split("/");for(;b[0]==="..";)b.shift(),v-=1;a.pathname=b.join("/")}d=v>=0?t[v]:"/"}let f=MM(a,d),g=o&&o!=="/"&&o.endsWith("/"),m=(l||o===".")&&e.endsWith("/");return!f.pathname.endsWith("/")&&(g||m)&&(f.pathname+="/"),f}var oa=h=>h.join("/").replace(/\/\/+/g,"/"),LM=h=>h.replace(/\/+$/,"").replace(/^\/*/,"/"),OM=h=>!h||h==="?"?"":h.startsWith("?")?h:"?"+h,NM=h=>!h||h==="#"?"":h.startsWith("#")?h:"#"+h,Im=class{constructor(h,t,e,s=!1){this.status=h,this.statusText=t||"",this.internal=s,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function tf(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.internal=="boolean"&&"data"in h}var __=["POST","PUT","PATCH","DELETE"],kM=new Set(__),PM=["GET",...__],zM=new Set(PM),FM=new Set([301,302,303,307,308]),HM=new Set([307,308]),Ub={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},BM={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Td={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},SA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UM=h=>({hasErrorBoundary:!!h.hasErrorBoundary}),x_="remix-router-transitions",T_=Symbol("ResetLoaderData");function IM(h){const t=h.window?h.window:typeof window<"u"?window:void 0,e=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";Jt(h.routes.length>0,"You must provide a non-empty routes array to createRouter");let s=h.mapRouteProperties||UM,a={},l=Bm(h.routes,s,void 0,a),o,d=h.basename||"/",f=h.dataStrategy||YM,g={unstable_middleware:!1,...h.future},m=null,v=new Set,b=null,A=null,E=null,_=h.hydrationData!=null,C=jr(l,h.history.location,d),R=!1,L=null;if(C==null&&!h.patchRoutesOnNavigation){let F=os(404,{pathname:h.history.location.pathname}),{matches:j,route:K}=j1(l);C=j,L={[K.id]:F}}C&&!h.hydrationData&&Hn(C,l,h.history.location.pathname).active&&(C=null);let O;if(C)if(C.some(F=>F.route.lazy))O=!1;else if(!C.some(F=>F.route.loader))O=!0;else{let F=h.hydrationData?h.hydrationData.loaderData:null,j=h.hydrationData?h.hydrationData.errors:null;if(j){let K=C.findIndex(at=>j[at.route.id]!==void 0);O=C.slice(0,K+1).every(at=>!Zb(at.route,F,j))}else O=C.every(K=>!Zb(K.route,F,j))}else{O=!1,C=[];let F=Hn(null,l,h.history.location.pathname);F.active&&F.matches&&(R=!0,C=F.matches)}let P,M={historyAction:h.history.action,location:h.history.location,matches:C,initialized:O,navigation:Ub,restoreScrollPosition:h.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:h.hydrationData&&h.hydrationData.loaderData||{},actionData:h.hydrationData&&h.hydrationData.actionData||null,errors:h.hydrationData&&h.hydrationData.errors||L,fetchers:new Map,blockers:new Map},k="POP",U=!1,$,G=!1,Z=new Map,it=null,Mt=!1,Rt=!1,ht=new Set,St=new Map,Y=0,nt=-1,dt=new Map,Pt=new Set,z=new Map,et=new Map,lt=new Set,rt=new Map,ot,Ot=null;function Dt(){if(m=h.history.listen(({action:F,location:j,delta:K})=>{if(ot){ot(),ot=void 0;return}bi(rt.size===0||K!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let at=Pi({currentLocation:M.location,nextLocation:j,historyAction:F});if(at&&K!=null){let ct=new Promise(zt=>{ot=zt});h.history.go(K*-1),fn(at,{state:"blocked",location:j,proceed(){fn(at,{state:"proceeding",proceed:void 0,reset:void 0,location:j}),ct.then(()=>h.history.go(K))},reset(){let zt=new Map(M.blockers);zt.set(at,Td),Xt({blockers:zt})}});return}return ei(F,j)}),e){sD(t,Z);let F=()=>aD(t,Z);t.addEventListener("pagehide",F),it=()=>t.removeEventListener("pagehide",F)}return M.initialized||ei("POP",M.location,{initialHydration:!0}),P}function qt(){m&&m(),it&&it(),v.clear(),$&&$.abort(),M.fetchers.forEach((F,j)=>yr(j)),M.blockers.forEach((F,j)=>Ug(j))}function ie(F){return v.add(F),()=>v.delete(F)}function Xt(F,j={}){M={...M,...F};let K=[],at=[];M.fetchers.forEach((ct,zt)=>{ct.state==="idle"&&(lt.has(zt)?K.push(zt):at.push(zt))}),lt.forEach(ct=>{!M.fetchers.has(ct)&&!St.has(ct)&&K.push(ct)}),[...v].forEach(ct=>ct(M,{deletedFetchers:K,viewTransitionOpts:j.viewTransitionOpts,flushSync:j.flushSync===!0})),K.forEach(ct=>yr(ct)),at.forEach(ct=>M.fetchers.delete(ct))}function Wt(F,j,{flushSync:K}={}){var ft,yt;let at=M.actionData!=null&&M.navigation.formMethod!=null&&Ls(M.navigation.formMethod)&&M.navigation.state==="loading"&&((ft=F.state)==null?void 0:ft._isRedirect)!==!0,ct;j.actionData?Object.keys(j.actionData).length>0?ct=j.actionData:ct=null:at?ct=M.actionData:ct=null;let zt=j.loaderData?U1(M.loaderData,j.loaderData,j.matches||[],j.errors):M.loaderData,Lt=M.blockers;Lt.size>0&&(Lt=new Map(Lt),Lt.forEach((vt,Ht)=>Lt.set(Ht,Td)));let Et=U===!0||M.navigation.formMethod!=null&&Ls(M.navigation.formMethod)&&((yt=F.state)==null?void 0:yt._isRedirect)!==!0;o&&(l=o,o=void 0),Mt||k==="POP"||(k==="PUSH"?h.history.push(F,F.state):k==="REPLACE"&&h.history.replace(F,F.state));let Tt;if(k==="POP"){let vt=Z.get(M.location.pathname);vt&&vt.has(F.pathname)?Tt={currentLocation:M.location,nextLocation:F}:Z.has(F.pathname)&&(Tt={currentLocation:F,nextLocation:M.location})}else if(G){let vt=Z.get(M.location.pathname);vt?vt.add(F.pathname):(vt=new Set([F.pathname]),Z.set(M.location.pathname,vt)),Tt={currentLocation:M.location,nextLocation:F}}Xt({...j,actionData:ct,loaderData:zt,historyAction:k,location:F,initialized:!0,navigation:Ub,revalidation:"idle",restoreScrollPosition:kl(F,j.matches||M.matches),preventScrollReset:Et,blockers:Lt},{viewTransitionOpts:Tt,flushSync:K===!0}),k="POP",U=!1,G=!1,Mt=!1,Rt=!1,Ot==null||Ot.resolve(),Ot=null}async function Ai(F,j){if(typeof F=="number"){h.history.go(F);return}let K=Qb(M.location,M.matches,d,F,j==null?void 0:j.fromRouteId,j==null?void 0:j.relative),{path:at,submission:ct,error:zt}=L1(!1,K,j),Lt=M.location,Et=Jd(M.location,at,j&&j.state);Et={...Et,...h.history.encodeLocation(Et)};let Tt=j&&j.replace!=null?j.replace:void 0,ft="PUSH";Tt===!0?ft="REPLACE":Tt===!1||ct!=null&&Ls(ct.formMethod)&&ct.formAction===M.location.pathname+M.location.search&&(ft="REPLACE");let yt=j&&"preventScrollReset"in j?j.preventScrollReset===!0:void 0,vt=(j&&j.flushSync)===!0,Ht=Pi({currentLocation:Lt,nextLocation:Et,historyAction:ft});if(Ht){fn(Ht,{state:"blocked",location:Et,proceed(){fn(Ht,{state:"proceeding",proceed:void 0,reset:void 0,location:Et}),Ai(F,j)},reset(){let he=new Map(M.blockers);he.set(Ht,Td),Xt({blockers:he})}});return}await ei(ft,Et,{submission:ct,pendingError:zt,preventScrollReset:yt,replace:j&&j.replace,enableViewTransition:j&&j.viewTransition,flushSync:vt})}function en(){Ot||(Ot=rD()),nn(),Xt({revalidation:"loading"});let F=Ot.promise;return M.navigation.state==="submitting"?F:M.navigation.state==="idle"?(ei(M.historyAction,M.location,{startUninterruptedRevalidation:!0}),F):(ei(k||M.historyAction,M.navigation.location,{overrideNavigation:M.navigation,enableViewTransition:G===!0}),F)}async function ei(F,j,K){$&&$.abort(),$=null,k=F,Mt=(K&&K.startUninterruptedRevalidation)===!0,Cu(M.location,M.matches),U=(K&&K.preventScrollReset)===!0,G=(K&&K.enableViewTransition)===!0;let at=o||l,ct=K&&K.overrideNavigation,zt=K!=null&&K.initialHydration&&M.matches&&M.matches.length>0&&!R?M.matches:jr(at,j,d),Lt=(K&&K.flushSync)===!0;if(zt&&M.initialized&&!Rt&&JM(M.location,j)&&!(K&&K.submission&&Ls(K.submission.formMethod))){Wt(j,{matches:zt},{flushSync:Lt});return}let Et=Hn(zt,at,j.pathname);if(Et.active&&Et.matches&&(zt=Et.matches),!zt){let{error:ze,notFoundMatches:xe,route:Fe}=Lh(j.pathname);Wt(j,{matches:xe,loaderData:{},errors:{[Fe.id]:ze}},{flushSync:Lt});return}$=new AbortController;let Tt=rc(h.history,j,$.signal,K&&K.submission),ft=new M1(h.unstable_getContext?await h.unstable_getContext():void 0),yt;if(K&&K.pendingError)yt=[lo(zt).route.id,{type:"error",error:K.pendingError}];else if(K&&K.submission&&Ls(K.submission.formMethod)){let ze=await mr(Tt,j,K.submission,zt,ft,Et.active,{replace:K.replace,flushSync:Lt});if(ze.shortCircuited)return;if(ze.pendingActionResult){let[xe,Fe]=ze.pendingActionResult;if(kn(Fe)&&tf(Fe.error)&&Fe.error.status===404){$=null,Wt(j,{matches:ze.matches,loaderData:{},errors:{[xe]:Fe.error}});return}}zt=ze.matches||zt,yt=ze.pendingActionResult,ct=Ib(j,K.submission),Lt=!1,Et.active=!1,Tt=rc(h.history,Tt.url,Tt.signal)}let{shortCircuited:vt,matches:Ht,loaderData:he,errors:Ye}=await xu(Tt,j,zt,ft,Et.active,ct,K&&K.submission,K&&K.fetcherSubmission,K&&K.replace,K&&K.initialHydration===!0,Lt,yt);vt||($=null,Wt(j,{matches:Ht||zt,...I1(yt),loaderData:he,errors:Ye}))}async function mr(F,j,K,at,ct,zt,Lt={}){nn();let Et=iD(j,K);if(Xt({navigation:Et},{flushSync:Lt.flushSync===!0}),zt){let yt=await da(at,j.pathname,F.signal);if(yt.type==="aborted")return{shortCircuited:!0};if(yt.type==="error"){let vt=lo(yt.partialMatches).route.id;return{matches:yt.partialMatches,pendingActionResult:[vt,{type:"error",error:yt.error}]}}else if(yt.matches)at=yt.matches;else{let{notFoundMatches:vt,error:Ht,route:he}=Lh(j.pathname);return{matches:vt,pendingActionResult:[he.id,{type:"error",error:Ht}]}}}let Tt,ft=kd(at,j);if(!ft.route.action&&!ft.route.lazy)Tt={type:"error",error:os(405,{method:F.method,pathname:j.pathname,routeId:ft.route.id})};else{let yt=await Nl("action",F,[ft],at,ct,null);if(Tt=yt[ft.route.id],!Tt){for(let vt of at)if(yt[vt.route.id]){Tt=yt[vt.route.id];break}}if(F.signal.aborted)return{shortCircuited:!0}}if(co(Tt)){let yt;return Lt&&Lt.replace!=null?yt=Lt.replace:yt=F1(Tt.response.headers.get("Location"),new URL(F.url),d)===M.location.pathname+M.location.search,await ds(F,Tt,!0,{submission:K,replace:yt}),{shortCircuited:!0}}if(kn(Tt)){let yt=lo(at,ft.route.id);return(Lt&&Lt.replace)!==!0&&(k="PUSH"),{matches:at,pendingActionResult:[yt.route.id,Tt]}}return{matches:at,pendingActionResult:[ft.route.id,Tt]}}async function xu(F,j,K,at,ct,zt,Lt,Et,Tt,ft,yt,vt){let Ht=zt||Ib(j,Lt),he=Lt||Et||q1(Ht),Ye=!Mt&&!ft;if(ct){if(Ye){let Le=ha(vt);Xt({navigation:Ht,...Le!==void 0?{actionData:Le}:{}},{flushSync:yt})}let ne=await da(K,j.pathname,F.signal);if(ne.type==="aborted")return{shortCircuited:!0};if(ne.type==="error"){let Le=lo(ne.partialMatches).route.id;return{matches:ne.partialMatches,loaderData:{},errors:{[Le]:ne.error}}}else if(ne.matches)K=ne.matches;else{let{error:Le,notFoundMatches:sn,route:Hl}=Lh(j.pathname);return{matches:sn,loaderData:{},errors:{[Hl.id]:Le}}}}let ze=o||l,[xe,Fe]=N1(h.history,M,K,he,j,ft===!0,Rt,ht,lt,z,Pt,ze,d,vt);if(nt=++Y,xe.length===0&&Fe.length===0){let ne=Bg();return Wt(j,{matches:K,loaderData:{},errors:vt&&kn(vt[1])?{[vt[0]]:vt[1].error}:null,...I1(vt),...ne?{fetchers:new Map(M.fetchers)}:{}},{flushSync:yt}),{shortCircuited:!0}}if(Ye){let ne={};if(!ct){ne.navigation=Ht;let Le=ha(vt);Le!==void 0&&(ne.actionData=Le)}Fe.length>0&&(ne.fetchers=Ch(Fe)),Xt(ne,{flushSync:yt})}Fe.forEach(ne=>{fs(ne.key),ne.controller&&St.set(ne.key,ne.controller)});let Bn=()=>Fe.forEach(ne=>fs(ne.key));$&&$.signal.addEventListener("abort",Bn);let{loaderResults:fa,fetcherResults:Si}=await Fg(K,xe,Fe,F,at);if(F.signal.aborted)return{shortCircuited:!0};$&&$.signal.removeEventListener("abort",Bn),Fe.forEach(ne=>St.delete(ne.key));let wi=Kp(fa);if(wi)return await ds(F,wi.result,!0,{replace:Tt}),{shortCircuited:!0};if(wi=Kp(Si),wi)return Pt.add(wi.key),await ds(F,wi.result,!0,{replace:Tt}),{shortCircuited:!0};let{loaderData:ga,errors:Un}=B1(M,K,fa,vt,Fe,Si);ft&&M.errors&&(Un={...M.errors,...Un});let Ae=Bg(),zl=vr(nt),Fl=Ae||zl||Fe.length>0;return{matches:K,loaderData:ga,errors:Un,...Fl?{fetchers:new Map(M.fetchers)}:{}}}function ha(F){if(F&&!kn(F[1]))return{[F[0]]:F[1].data};if(M.actionData)return Object.keys(M.actionData).length===0?null:M.actionData}function Ch(F){return F.forEach(j=>{let K=M.fetchers.get(j.key),at=Cd(void 0,K?K.data:void 0);M.fetchers.set(j.key,at)}),new Map(M.fetchers)}async function Tu(F,j,K,at){fs(F);let ct=(at&&at.flushSync)===!0,zt=o||l,Lt=Qb(M.location,M.matches,d,K,j,at==null?void 0:at.relative),Et=jr(zt,Lt,d),Tt=Hn(Et,zt,Lt);if(Tt.active&&Tt.matches&&(Et=Tt.matches),!Et){Fn(F,j,os(404,{pathname:Lt}),{flushSync:ct});return}let{path:ft,submission:yt,error:vt}=L1(!0,Lt,at);if(vt){Fn(F,j,vt,{flushSync:ct});return}let Ht=kd(Et,ft),he=new M1(h.unstable_getContext?await h.unstable_getContext():void 0),Ye=(at&&at.preventScrollReset)===!0;if(yt&&Ls(yt.formMethod)){await Rh(F,j,ft,Ht,Et,he,Tt.active,ct,Ye,yt);return}z.set(F,{routeId:j,path:ft}),await Mh(F,j,ft,Ht,Et,he,Tt.active,ct,Ye,yt)}async function Rh(F,j,K,at,ct,zt,Lt,Et,Tt,ft){nn(),z.delete(F);function yt(Oe){if(!Oe.route.action&&!Oe.route.lazy){let pa=os(405,{method:ft.formMethod,pathname:K,routeId:j});return Fn(F,j,pa,{flushSync:Et}),!0}return!1}if(!Lt&&yt(at))return;let vt=M.fetchers.get(F);Fs(F,nD(ft,vt),{flushSync:Et});let Ht=new AbortController,he=rc(h.history,K,Ht.signal,ft);if(Lt){let Oe=await da(ct,K,he.signal,F);if(Oe.type==="aborted")return;if(Oe.type==="error"){Fn(F,j,Oe.error,{flushSync:Et});return}else if(Oe.matches){if(ct=Oe.matches,at=kd(ct,K),yt(at))return}else{Fn(F,j,os(404,{pathname:K}),{flushSync:Et});return}}St.set(F,Ht);let Ye=Y,xe=(await Nl("action",he,[at],ct,zt,F))[at.route.id];if(he.signal.aborted){St.get(F)===Ht&&St.delete(F);return}if(lt.has(F)){if(co(xe)||kn(xe)){Fs(F,Ur(void 0));return}}else{if(co(xe))if(St.delete(F),nt>Ye){Fs(F,Ur(void 0));return}else return Pt.add(F),Fs(F,Cd(ft)),ds(he,xe,!1,{fetcherSubmission:ft,preventScrollReset:Tt});if(kn(xe)){Fn(F,j,xe.error);return}}let Fe=M.navigation.location||M.location,Bn=rc(h.history,Fe,Ht.signal),fa=o||l,Si=M.navigation.state!=="idle"?jr(fa,M.navigation.location,d):M.matches;Jt(Si,"Didn't find any matches after fetcher action");let wi=++Y;dt.set(F,wi);let ga=Cd(ft,xe.data);M.fetchers.set(F,ga);let[Un,Ae]=N1(h.history,M,Si,ft,Fe,!1,Rt,ht,lt,z,Pt,fa,d,[at.route.id,xe]);Ae.filter(Oe=>Oe.key!==F).forEach(Oe=>{let pa=Oe.key,jg=M.fetchers.get(pa),Ru=Cd(void 0,jg?jg.data:void 0);M.fetchers.set(pa,Ru),fs(pa),Oe.controller&&St.set(pa,Oe.controller)}),Xt({fetchers:new Map(M.fetchers)});let zl=()=>Ae.forEach(Oe=>fs(Oe.key));Ht.signal.addEventListener("abort",zl);let{loaderResults:Fl,fetcherResults:ne}=await Fg(Si,Un,Ae,Bn,zt);if(Ht.signal.aborted)return;Ht.signal.removeEventListener("abort",zl),dt.delete(F),St.delete(F),Ae.forEach(Oe=>St.delete(Oe.key));let Le=Kp(Fl);if(Le)return ds(Bn,Le.result,!1,{preventScrollReset:Tt});if(Le=Kp(ne),Le)return Pt.add(Le.key),ds(Bn,Le.result,!1,{preventScrollReset:Tt});let{loaderData:sn,errors:Hl}=B1(M,Si,Fl,void 0,Ae,ne);if(M.fetchers.has(F)){let Oe=Ur(xe.data);M.fetchers.set(F,Oe)}vr(wi),M.navigation.state==="loading"&&wi>nt?(Jt(k,"Expected pending action"),$&&$.abort(),Wt(M.navigation.location,{matches:Si,loaderData:sn,errors:Hl,fetchers:new Map(M.fetchers)})):(Xt({errors:Hl,loaderData:U1(M.loaderData,sn,Si,Hl),fetchers:new Map(M.fetchers)}),Rt=!1)}async function Mh(F,j,K,at,ct,zt,Lt,Et,Tt,ft){let yt=M.fetchers.get(F);Fs(F,Cd(ft,yt?yt.data:void 0),{flushSync:Et});let vt=new AbortController,Ht=rc(h.history,K,vt.signal);if(Lt){let xe=await da(ct,K,Ht.signal,F);if(xe.type==="aborted")return;if(xe.type==="error"){Fn(F,j,xe.error,{flushSync:Et});return}else if(xe.matches)ct=xe.matches,at=kd(ct,K);else{Fn(F,j,os(404,{pathname:K}),{flushSync:Et});return}}St.set(F,vt);let he=Y,ze=(await Nl("loader",Ht,[at],ct,zt,F))[at.route.id];if(St.get(F)===vt&&St.delete(F),!Ht.signal.aborted){if(lt.has(F)){Fs(F,Ur(void 0));return}if(co(ze))if(nt>he){Fs(F,Ur(void 0));return}else{Pt.add(F),await ds(Ht,ze,!1,{preventScrollReset:Tt});return}if(kn(ze)){Fn(F,j,ze.error);return}Fs(F,Ur(ze.data))}}async function ds(F,j,K,{submission:at,fetcherSubmission:ct,preventScrollReset:zt,replace:Lt}={}){j.response.headers.has("X-Remix-Revalidate")&&(Rt=!0);let Et=j.response.headers.get("Location");Jt(Et,"Expected a Location header on the redirect Response"),Et=F1(Et,new URL(F.url),d);let Tt=Jd(M.location,Et,{_isRedirect:!0});if(e){let Ye=!1;if(j.response.headers.has("X-Remix-Reload-Document"))Ye=!0;else if(SA.test(Et)){const ze=h.history.createURL(Et);Ye=ze.origin!==t.location.origin||hs(ze.pathname,d)==null}if(Ye){Lt?t.location.replace(Et):t.location.assign(Et);return}}$=null;let ft=Lt===!0||j.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:yt,formAction:vt,formEncType:Ht}=M.navigation;!at&&!ct&&yt&&vt&&Ht&&(at=q1(M.navigation));let he=at||ct;if(HM.has(j.response.status)&&he&&Ls(he.formMethod))await ei(ft,Tt,{submission:{...he,formAction:Et},preventScrollReset:zt||U,enableViewTransition:K?G:void 0});else{let Ye=Ib(Tt,at);await ei(ft,Tt,{overrideNavigation:Ye,fetcherSubmission:ct,preventScrollReset:zt||U,enableViewTransition:K?G:void 0})}}async function Nl(F,j,K,at,ct,zt){let Lt,Et={};try{Lt=await $M(f,F,j,K,at,zt,a,s,ct,g.unstable_middleware)}catch(Tt){return K.forEach(ft=>{Et[ft.route.id]={type:"error",error:Tt}}),Et}for(let[Tt,ft]of Object.entries(Lt))if(tD(ft)){let yt=ft.result;Et[Tt]={type:"redirect",response:QM(yt,j,Tt,at,d)}}else Et[Tt]=await WM(ft);return Et}async function Fg(F,j,K,at,ct){let zt=Nl("loader",at,j,F,ct,null),Lt=Promise.all(K.map(async ft=>{if(ft.matches&&ft.match&&ft.controller){let vt=(await Nl("loader",rc(h.history,ft.path,ft.controller.signal),[ft.match],ft.matches,ct,ft.key))[ft.match.route.id];return{[ft.key]:vt}}else return Promise.resolve({[ft.key]:{type:"error",error:os(404,{pathname:ft.path})}})})),Et=await zt,Tt=(await Lt).reduce((ft,yt)=>Object.assign(ft,yt),{});return{loaderResults:Et,fetcherResults:Tt}}function nn(){Rt=!0,z.forEach((F,j)=>{St.has(j)&&ht.add(j),fs(j)})}function Fs(F,j,K={}){M.fetchers.set(F,j),Xt({fetchers:new Map(M.fetchers)},{flushSync:(K&&K.flushSync)===!0})}function Fn(F,j,K,at={}){let ct=lo(M.matches,j);yr(F),Xt({errors:{[ct.route.id]:K},fetchers:new Map(M.fetchers)},{flushSync:(at&&at.flushSync)===!0})}function Dh(F){return et.set(F,(et.get(F)||0)+1),lt.has(F)&&lt.delete(F),M.fetchers.get(F)||BM}function yr(F){let j=M.fetchers.get(F);St.has(F)&&!(j&&j.state==="loading"&&dt.has(F))&&fs(F),z.delete(F),dt.delete(F),Pt.delete(F),lt.delete(F),ht.delete(F),M.fetchers.delete(F)}function Ty(F){let j=(et.get(F)||0)-1;j<=0?(et.delete(F),lt.add(F)):et.set(F,j),Xt({fetchers:new Map(M.fetchers)})}function fs(F){let j=St.get(F);j&&(j.abort(),St.delete(F))}function Hg(F){for(let j of F){let K=Dh(j),at=Ur(K.data);M.fetchers.set(j,at)}}function Bg(){let F=[],j=!1;for(let K of Pt){let at=M.fetchers.get(K);Jt(at,`Expected fetcher: ${K}`),at.state==="loading"&&(Pt.delete(K),F.push(K),j=!0)}return Hg(F),j}function vr(F){let j=[];for(let[K,at]of dt)if(at<F){let ct=M.fetchers.get(K);Jt(ct,`Expected fetcher: ${K}`),ct.state==="loading"&&(fs(K),dt.delete(K),j.push(K))}return Hg(j),j.length>0}function qi(F,j){let K=M.blockers.get(F)||Td;return rt.get(F)!==j&&rt.set(F,j),K}function Ug(F){M.blockers.delete(F),rt.delete(F)}function fn(F,j){let K=M.blockers.get(F)||Td;Jt(K.state==="unblocked"&&j.state==="blocked"||K.state==="blocked"&&j.state==="blocked"||K.state==="blocked"&&j.state==="proceeding"||K.state==="blocked"&&j.state==="unblocked"||K.state==="proceeding"&&j.state==="unblocked",`Invalid blocker state transition: ${K.state} -> ${j.state}`);let at=new Map(M.blockers);at.set(F,j),Xt({blockers:at})}function Pi({currentLocation:F,nextLocation:j,historyAction:K}){if(rt.size===0)return;rt.size>1&&bi(!1,"A router only supports one blocker at a time");let at=Array.from(rt.entries()),[ct,zt]=at[at.length-1],Lt=M.blockers.get(ct);if(!(Lt&&Lt.state==="proceeding")&&zt({currentLocation:F,nextLocation:j,historyAction:K}))return ct}function Lh(F){let j=os(404,{pathname:F}),K=o||l,{matches:at,route:ct}=j1(K);return{notFoundMatches:at,route:ct,error:j}}function Cy(F,j,K){if(b=F,E=j,A=K||null,!_&&M.navigation===Ub){_=!0;let at=kl(M.location,M.matches);at!=null&&Xt({restoreScrollPosition:at})}return()=>{b=null,E=null,A=null}}function Ig(F,j){return A&&A(F,j.map(at=>mM(at,M.loaderData)))||F.key}function Cu(F,j){if(b&&E){let K=Ig(F,j);b[K]=E()}}function kl(F,j){if(b){let K=Ig(F,j),at=b[K];if(typeof at=="number")return at}return null}function Hn(F,j,K){if(h.patchRoutesOnNavigation)if(F){if(Object.keys(F[0].params).length>0)return{active:!0,matches:am(j,K,d,!0)}}else return{active:!0,matches:am(j,K,d,!0)||[]};return{active:!1,matches:null}}async function da(F,j,K,at){if(!h.patchRoutesOnNavigation)return{type:"success",matches:F};let ct=F;for(;;){let zt=o==null,Lt=o||l,Et=a;try{await h.patchRoutesOnNavigation({signal:K,path:j,matches:ct,fetcherKey:at,patch:(yt,vt)=>{K.aborted||P1(yt,vt,Lt,Et,s)}})}catch(yt){return{type:"error",error:yt,partialMatches:ct}}finally{zt&&!K.aborted&&(l=[...l])}if(K.aborted)return{type:"aborted"};let Tt=jr(Lt,j,d);if(Tt)return{type:"success",matches:Tt};let ft=am(Lt,j,d,!0);if(!ft||ct.length===ft.length&&ct.every((yt,vt)=>yt.route.id===ft[vt].route.id))return{type:"success",matches:null};ct=ft}}function Pl(F){a={},o=Bm(F,s,void 0,a)}function Ry(F,j){let K=o==null;P1(F,j,o||l,a,s),K&&(l=[...l],Xt({}))}return P={get basename(){return d},get future(){return g},get state(){return M},get routes(){return l},get window(){return t},initialize:Dt,subscribe:ie,enableScrollRestoration:Cy,navigate:Ai,fetch:Tu,revalidate:en,createHref:F=>h.history.createHref(F),encodeLocation:F=>h.history.encodeLocation(F),getFetcher:Dh,deleteFetcher:Ty,dispose:qt,getBlocker:qi,deleteBlocker:Ug,patchRoutes:Ry,_internalFetchControllers:St,_internalSetRoutes:Pl},P}function jM(h){return h!=null&&("formData"in h&&h.formData!=null||"body"in h&&h.body!==void 0)}function Qb(h,t,e,s,a,l){let o,d;if(a){o=[];for(let g of t)if(o.push(g),g.route.id===a){d=g;break}}else o=t,d=t[t.length-1];let f=yy(s||".",my(o),hs(h.pathname,e)||h.pathname,l==="path");if(s==null&&(f.search=h.search,f.hash=h.hash),(s==null||s===""||s===".")&&d){let g=wA(f.search);if(d.route.index&&!g)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&g){let m=new URLSearchParams(f.search),v=m.getAll("index");m.delete("index"),v.filter(A=>A).forEach(A=>m.append("index",A));let b=m.toString();f.search=b?`?${b}`:""}}return e!=="/"&&(f.pathname=f.pathname==="/"?e:oa([e,f.pathname])),Tl(f)}function L1(h,t,e){if(!e||!jM(e))return{path:t};if(e.formMethod&&!eD(e.formMethod))return{path:t,error:os(405,{method:e.formMethod})};let s=()=>({path:t,error:os(400,{type:"invalid-body"})}),l=(e.formMethod||"get").toUpperCase(),o=M_(t);if(e.body!==void 0){if(e.formEncType==="text/plain"){if(!Ls(l))return s();let v=typeof e.body=="string"?e.body:e.body instanceof FormData||e.body instanceof URLSearchParams?Array.from(e.body.entries()).reduce((b,[A,E])=>`${b}${A}=${E}
`,""):String(e.body);return{path:t,submission:{formMethod:l,formAction:o,formEncType:e.formEncType,formData:void 0,json:void 0,text:v}}}else if(e.formEncType==="application/json"){if(!Ls(l))return s();try{let v=typeof e.body=="string"?JSON.parse(e.body):e.body;return{path:t,submission:{formMethod:l,formAction:o,formEncType:e.formEncType,formData:void 0,json:v,text:void 0}}}catch{return s()}}}Jt(typeof FormData=="function","FormData is not available in this environment");let d,f;if(e.formData)d=t0(e.formData),f=e.formData;else if(e.body instanceof FormData)d=t0(e.body),f=e.body;else if(e.body instanceof URLSearchParams)d=e.body,f=H1(d);else if(e.body==null)d=new URLSearchParams,f=new FormData;else try{d=new URLSearchParams(e.body),f=H1(d)}catch{return s()}let g={formMethod:l,formAction:o,formEncType:e&&e.formEncType||"application/x-www-form-urlencoded",formData:f,json:void 0,text:void 0};if(Ls(g.formMethod))return{path:t,submission:g};let m=Ol(t);return h&&m.search&&wA(m.search)&&d.append("index",""),m.search=`?${d}`,{path:Tl(m),submission:g}}function O1(h,t,e=!1){let s=h.findIndex(a=>a.route.id===t);return s>=0?h.slice(0,e?s+1:s):h}function N1(h,t,e,s,a,l,o,d,f,g,m,v,b,A){let E=A?kn(A[1])?A[1].error:A[1].data:void 0,_=h.createURL(t.location),C=h.createURL(a),R=e;l&&t.errors?R=O1(e,Object.keys(t.errors)[0],!0):A&&kn(A[1])&&(R=O1(e,A[0]));let L=A?A[1].statusCode:void 0,O=L&&L>=400,P=R.filter((k,U)=>{let{route:$}=k;if($.lazy)return!0;if($.loader==null)return!1;if(l)return Zb($,t.loaderData,t.errors);if(GM(t.loaderData,t.matches[U],k))return!0;let G=t.matches[U],Z=k;return k1(k,{currentUrl:_,currentParams:G.params,nextUrl:C,nextParams:Z.params,...s,actionResult:E,actionStatus:L,defaultShouldRevalidate:O?!1:o||_.pathname+_.search===C.pathname+C.search||_.search!==C.search||qM(G,Z)})}),M=[];return g.forEach((k,U)=>{if(l||!e.some(Mt=>Mt.route.id===k.routeId)||f.has(U))return;let $=jr(v,k.path,b);if(!$){M.push({key:U,routeId:k.routeId,path:k.path,matches:null,match:null,controller:null});return}let G=t.fetchers.get(U),Z=kd($,k.path),it=!1;m.has(U)?it=!1:d.has(U)?(d.delete(U),it=!0):G&&G.state!=="idle"&&G.data===void 0?it=o:it=k1(Z,{currentUrl:_,currentParams:t.matches[t.matches.length-1].params,nextUrl:C,nextParams:e[e.length-1].params,...s,actionResult:E,actionStatus:L,defaultShouldRevalidate:O?!1:o}),it&&M.push({key:U,routeId:k.routeId,path:k.path,matches:$,match:Z,controller:new AbortController})}),[P,M]}function Zb(h,t,e){if(h.lazy)return!0;if(!h.loader)return!1;let s=t!=null&&t[h.id]!==void 0,a=e!=null&&e[h.id]!==void 0;return!s&&a?!1:typeof h.loader=="function"&&h.loader.hydrate===!0?!0:!s&&!a}function GM(h,t,e){let s=!t||e.route.id!==t.route.id,a=!h.hasOwnProperty(e.route.id);return s||a}function qM(h,t){let e=h.route.path;return h.pathname!==t.pathname||e!=null&&e.endsWith("*")&&h.params["*"]!==t.params["*"]}function k1(h,t){if(h.route.shouldRevalidate){let e=h.route.shouldRevalidate(t);if(typeof e=="boolean")return e}return t.defaultShouldRevalidate}function P1(h,t,e,s,a){let l;if(h){let f=s[h];Jt(f,`No route found to patch children into: routeId = ${h}`),f.children||(f.children=[]),l=f.children}else l=e;let o=t.filter(f=>!l.some(g=>C_(f,g))),d=Bm(o,a,[h||"_","patch",String((l==null?void 0:l.length)||"0")],s);l.push(...d)}function C_(h,t){return"id"in h&&"id"in t&&h.id===t.id?!0:h.index===t.index&&h.path===t.path&&h.caseSensitive===t.caseSensitive?(!h.children||h.children.length===0)&&(!t.children||t.children.length===0)?!0:h.children.every((e,s)=>{var a;return(a=t.children)==null?void 0:a.some(l=>C_(e,l))}):!1}async function VM(h,t,e){if(!h.lazy)return;let s=await h.lazy();if(!h.lazy)return;let a=e[h.id];Jt(a,"No route found in manifest");let l={};for(let o in s){let f=a[o]!==void 0&&o!=="hasErrorBoundary";bi(!f,`Route "${a.id}" has a static property "${o}" defined but its lazy function is also returning a value for this property. The lazy route property "${o}" will be ignored.`),!f&&!gM.has(o)&&(l[o]=s[o])}Object.assign(a,l),Object.assign(a,{...t(a),lazy:void 0})}async function z1(h){let t=h.matches.filter(a=>a.shouldLoad),e={};return(await Promise.all(t.map(a=>a.resolve()))).forEach((a,l)=>{e[t[l].route.id]=a}),e}async function YM(h){return h.matches.some(t=>t.route.unstable_middleware)?XM(h,!1,()=>z1(h),t=>({[t.routeId]:{type:"error",result:t.error}})):z1(h)}async function XM(h,t,e,s){let{matches:a,request:l,params:o,context:d}=h,f={handlerResult:void 0,propagateResult:t};try{let g=a.flatMap(v=>v.route.unstable_middleware?v.route.unstable_middleware.map(b=>[v.route.id,b]):[]),m=await R_({request:l,params:o,context:d},g,f,e);return f.propagateResult?m:f.handlerResult}catch(g){if(!(g instanceof Jb))throw g;let m=await s(g);return f.handlerResult?Object.assign(f.handlerResult,m):m}}var Jb=class{constructor(h,t){this.routeId=h,this.error=t}};async function R_(h,t,e,s,a=0){let{request:l}=h;if(l.signal.aborted)throw l.signal.reason?l.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${l.method} ${l.url}`);let o=t[a];if(!o)return e.handlerResult=await s(),e.handlerResult;let[d,f]=o,g=!1,m,v=async()=>{if(g)throw new Error("You may only call `next()` once per middleware");g=!0;let b=await R_(h,t,e,s,a+1);if(e.propagateResult)return m=b,m};try{let b=await f({request:h.request,params:h.params,context:h.context},v);return g?b===void 0?m:b:v()}catch(b){throw b instanceof Jb?b:new Jb(d,b)}}async function $M(h,t,e,s,a,l,o,d,f,g){let m=a.map(A=>A.route.lazy?VM(A.route,d,o):void 0);g&&await Promise.all(m);let v=a.map((A,E)=>{let _=m[E],C=s.some(L=>L.route.id===A.route.id);return{...A,shouldLoad:C,resolve:async L=>(L&&e.method==="GET"&&(A.route.lazy||A.route.loader)&&(C=!0),C?KM(t,e,A,_,L,f):Promise.resolve({type:"data",result:void 0}))}}),b=await h({matches:v,request:e,params:a[0].params,fetcherKey:l,context:f});try{await Promise.all(m)}catch{}return b}async function KM(h,t,e,s,a,l){let o,d,f=g=>{let m,v=new Promise((E,_)=>m=_);d=()=>m(),t.signal.addEventListener("abort",d);let b=E=>typeof g!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${h}" [routeId: ${e.route.id}]`)):g({request:t,params:e.params,context:l},...E!==void 0?[E]:[]),A=(async()=>{try{return{type:"data",result:await(a?a(_=>b(_)):b())}}catch(E){return{type:"error",result:E}}})();return Promise.race([A,v])};try{let g=e.route[h];if(s)if(g){let m,[v]=await Promise.all([f(g).catch(b=>{m=b}),s]);if(m!==void 0)throw m;o=v}else if(await s,g=e.route[h],g)o=await f(g);else if(h==="action"){let m=new URL(t.url),v=m.pathname+m.search;throw os(405,{method:t.method,pathname:v,routeId:e.route.id})}else return{type:"data",result:void 0};else if(g)o=await f(g);else{let m=new URL(t.url),v=m.pathname+m.search;throw os(404,{pathname:v})}}catch(g){return{type:"error",result:g}}finally{d&&t.signal.removeEventListener("abort",d)}return o}async function WM(h){var s,a,l,o,d,f;let{result:t,type:e}=h;if(D_(t)){let g;try{let m=t.headers.get("Content-Type");m&&/\bapplication\/json\b/.test(m)?t.body==null?g=null:g=await t.json():g=await t.text()}catch(m){return{type:"error",error:m}}return e==="error"?{type:"error",error:new Im(t.status,t.statusText,g),statusCode:t.status,headers:t.headers}:{type:"data",data:g,statusCode:t.status,headers:t.headers}}return e==="error"?G1(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:(s=t.init)==null?void 0:s.status,headers:(a=t.init)!=null&&a.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new Im(((l=t.init)==null?void 0:l.status)||500,void 0,t.data),statusCode:tf(t)?t.status:void 0,headers:(o=t.init)!=null&&o.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:tf(t)?t.status:void 0}:G1(t)?{type:"data",data:t.data,statusCode:(d=t.init)==null?void 0:d.status,headers:(f=t.init)!=null&&f.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function QM(h,t,e,s,a){let l=h.headers.get("Location");if(Jt(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!SA.test(l)){let o=s.slice(0,s.findIndex(d=>d.route.id===e)+1);l=Qb(new URL(t.url),o,a,l),h.headers.set("Location",l)}return h}function F1(h,t,e){if(SA.test(h)){let s=h,a=s.startsWith("//")?new URL(t.protocol+s):new URL(s),l=hs(a.pathname,e)!=null;if(a.origin===t.origin&&l)return a.pathname+a.search+a.hash}return h}function rc(h,t,e,s){let a=h.createURL(M_(t)).toString(),l={signal:e};if(s&&Ls(s.formMethod)){let{formMethod:o,formEncType:d}=s;l.method=o.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(s.json)):d==="text/plain"?l.body=s.text:d==="application/x-www-form-urlencoded"&&s.formData?l.body=t0(s.formData):l.body=s.formData}return new Request(a,l)}function t0(h){let t=new URLSearchParams;for(let[e,s]of h.entries())t.append(e,typeof s=="string"?s:s.name);return t}function H1(h){let t=new FormData;for(let[e,s]of h.entries())t.append(e,s);return t}function ZM(h,t,e,s=!1,a=!1){let l={},o=null,d,f=!1,g={},m=e&&kn(e[1])?e[1].error:void 0;return h.forEach(v=>{if(!(v.route.id in t))return;let b=v.route.id,A=t[b];if(Jt(!co(A),"Cannot handle redirect results in processLoaderData"),kn(A)){let E=A.error;if(m!==void 0&&(E=m,m=void 0),o=o||{},a)o[b]=E;else{let _=lo(h,b);o[_.route.id]==null&&(o[_.route.id]=E)}s||(l[b]=T_),f||(f=!0,d=tf(A.error)?A.error.status:500),A.headers&&(g[b]=A.headers)}else l[b]=A.data,A.statusCode&&A.statusCode!==200&&!f&&(d=A.statusCode),A.headers&&(g[b]=A.headers)}),m!==void 0&&e&&(o={[e[0]]:m},l[e[0]]=void 0),{loaderData:l,errors:o,statusCode:d||200,loaderHeaders:g}}function B1(h,t,e,s,a,l){let{loaderData:o,errors:d}=ZM(t,e,s);return a.forEach(f=>{let{key:g,match:m,controller:v}=f,b=l[g];if(Jt(b,"Did not find corresponding fetcher result"),!(v&&v.signal.aborted))if(kn(b)){let A=lo(h.matches,m==null?void 0:m.route.id);d&&d[A.route.id]||(d={...d,[A.route.id]:b.error}),h.fetchers.delete(g)}else if(co(b))Jt(!1,"Unhandled fetcher revalidation redirect");else{let A=Ur(b.data);h.fetchers.set(g,A)}}),{loaderData:o,errors:d}}function U1(h,t,e,s){let a=Object.entries(t).filter(([,l])=>l!==T_).reduce((l,[o,d])=>(l[o]=d,l),{});for(let l of e){let o=l.route.id;if(!t.hasOwnProperty(o)&&h.hasOwnProperty(o)&&l.route.loader&&(a[o]=h[o]),s&&s.hasOwnProperty(o))break}return a}function I1(h){return h?kn(h[1])?{actionData:{}}:{actionData:{[h[0]]:h[1].data}}:{}}function lo(h,t){return(t?h.slice(0,h.findIndex(s=>s.route.id===t)+1):[...h]).reverse().find(s=>s.route.hasErrorBoundary===!0)||h[0]}function j1(h){let t=h.length===1?h[0]:h.find(e=>e.index||!e.path||e.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function os(h,{pathname:t,routeId:e,method:s,type:a,message:l}={}){let o="Unknown Server Error",d="Unknown @remix-run/router error";return h===400?(o="Bad Request",s&&t&&e?d=`You made a ${s} request to "${t}" but did not provide a \`loader\` for route "${e}", so there is no way to handle the request.`:a==="invalid-body"&&(d="Unable to encode submission body")):h===403?(o="Forbidden",d=`Route "${e}" does not match URL "${t}"`):h===404?(o="Not Found",d=`No route matches URL "${t}"`):h===405&&(o="Method Not Allowed",s&&t&&e?d=`You made a ${s.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${e}", so there is no way to handle the request.`:s&&(d=`Invalid request method "${s.toUpperCase()}"`)),new Im(h||500,o,new Error(d),!0)}function Kp(h){let t=Object.entries(h);for(let e=t.length-1;e>=0;e--){let[s,a]=t[e];if(co(a))return{key:s,result:a}}}function M_(h){let t=typeof h=="string"?Ol(h):h;return Tl({...t,hash:""})}function JM(h,t){return h.pathname!==t.pathname||h.search!==t.search?!1:h.hash===""?t.hash!=="":h.hash===t.hash?!0:t.hash!==""}function tD(h){return D_(h.result)&&FM.has(h.result.status)}function kn(h){return h.type==="error"}function co(h){return(h&&h.type)==="redirect"}function G1(h){return typeof h=="object"&&h!=null&&"type"in h&&"data"in h&&"init"in h&&h.type==="DataWithResponseInit"}function D_(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.headers=="object"&&typeof h.body<"u"}function eD(h){return zM.has(h.toUpperCase())}function Ls(h){return kM.has(h.toUpperCase())}function wA(h){return new URLSearchParams(h).getAll("index").some(t=>t==="")}function kd(h,t){let e=typeof t=="string"?Ol(t).search:t.search;if(h[h.length-1].route.index&&wA(e||""))return h[h.length-1];let s=E_(h);return s[s.length-1]}function q1(h){let{formMethod:t,formAction:e,formEncType:s,text:a,formData:l,json:o}=h;if(!(!t||!e||!s)){if(a!=null)return{formMethod:t,formAction:e,formEncType:s,formData:void 0,json:void 0,text:a};if(l!=null)return{formMethod:t,formAction:e,formEncType:s,formData:l,json:void 0,text:void 0};if(o!==void 0)return{formMethod:t,formAction:e,formEncType:s,formData:void 0,json:o,text:void 0}}}function Ib(h,t){return t?{state:"loading",location:h,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:h,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function iD(h,t){return{state:"submitting",location:h,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Cd(h,t){return h?{state:"loading",formMethod:h.formMethod,formAction:h.formAction,formEncType:h.formEncType,formData:h.formData,json:h.json,text:h.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function nD(h,t){return{state:"submitting",formMethod:h.formMethod,formAction:h.formAction,formEncType:h.formEncType,formData:h.formData,json:h.json,text:h.text,data:t?t.data:void 0}}function Ur(h){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:h}}function sD(h,t){try{let e=h.sessionStorage.getItem(x_);if(e){let s=JSON.parse(e);for(let[a,l]of Object.entries(s||{}))l&&Array.isArray(l)&&t.set(a,new Set(l||[]))}}catch{}}function aD(h,t){if(t.size>0){let e={};for(let[s,a]of t)e[s]=[...a];try{h.sessionStorage.setItem(x_,JSON.stringify(e))}catch(s){bi(!1,`Failed to save applied view transitions in sessionStorage (${s}).`)}}}function rD(){let h,t,e=new Promise((s,a)=>{h=async l=>{s(l);try{await e}catch{}},t=async l=>{a(l);try{await e}catch{}}});return{promise:e,resolve:h,reject:t}}var wu=q.createContext(null);wu.displayName="DataRouter";var Cg=q.createContext(null);Cg.displayName="DataRouterState";var EA=q.createContext({isTransitioning:!1});EA.displayName="ViewTransition";var L_=q.createContext(new Map);L_.displayName="Fetchers";var lD=q.createContext(null);lD.displayName="Await";var Ps=q.createContext(null);Ps.displayName="Navigation";var vy=q.createContext(null);vy.displayName="Location";var zs=q.createContext({outlet:null,matches:[],isDataRoute:!1});zs.displayName="Route";var _A=q.createContext(null);_A.displayName="RouteError";function oD(h,{relative:t}={}){Jt(Th(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:s}=q.useContext(Ps),{hash:a,pathname:l,search:o}=Mg(h,{relative:t}),d=l;return e!=="/"&&(d=l==="/"?e:oa([e,l])),s.createHref({pathname:d,search:o,hash:a})}function Th(){return q.useContext(vy)!=null}function ca(){return Jt(Th(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(vy).location}var O_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function N_(h){q.useContext(Ps).static||q.useLayoutEffect(h)}function Rg(){let{isDataRoute:h}=q.useContext(zs);return h?ED():uD()}function uD(){Jt(Th(),"useNavigate() may be used only in the context of a <Router> component.");let h=q.useContext(wu),{basename:t,navigator:e}=q.useContext(Ps),{matches:s}=q.useContext(zs),{pathname:a}=ca(),l=JSON.stringify(my(s)),o=q.useRef(!1);return N_(()=>{o.current=!0}),q.useCallback((f,g={})=>{if(bi(o.current,O_),!o.current)return;if(typeof f=="number"){e.go(f);return}let m=yy(f,JSON.parse(l),a,g.relative==="path");h==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:oa([t,m.pathname])),(g.replace?e.replace:e.push)(m,g.state,g)},[t,e,l,a,h])}var cD=q.createContext(null);function hD(h){let t=q.useContext(zs).outlet;return t&&q.createElement(cD.Provider,{value:h},t)}function Mg(h,{relative:t}={}){let{matches:e}=q.useContext(zs),{pathname:s}=ca(),a=JSON.stringify(my(e));return q.useMemo(()=>yy(h,JSON.parse(a),s,t==="path"),[h,a,s,t])}function dD(h,t,e,s){Jt(Th(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=q.useContext(Ps),{matches:o}=q.useContext(zs),d=o[o.length-1],f=d?d.params:{},g=d?d.pathname:"/",m=d?d.pathnameBase:"/",v=d&&d.route;{let L=v&&v.path||"";k_(g,!v||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let b=ca(),A;A=b;let E=A.pathname||"/",_=E;if(m!=="/"){let L=m.replace(/^\//,"").split("/");_="/"+E.replace(/^\//,"").split("/").slice(L.length).join("/")}let C=!l&&e&&e.matches&&e.matches.length>0?e.matches:jr(h,{pathname:_});return bi(v||C!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),bi(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),yD(C&&C.map(L=>Object.assign({},L,{params:Object.assign({},f,L.params),pathname:oa([m,a.encodeLocation?a.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?m:oa([m,a.encodeLocation?a.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),o,e,s)}function fD(){let h=wD(),t=tf(h)?`${h.status} ${h.statusText}`:h instanceof Error?h.message:JSON.stringify(h),e=h instanceof Error?h.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",h),o=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:l},"ErrorBoundary")," or"," ",q.createElement("code",{style:l},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},t),e?q.createElement("pre",{style:a},e):null,o)}var gD=q.createElement(fD,null),pD=class extends q.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,t){return t.location!==h.location||t.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:t.error,location:t.location,revalidation:h.revalidation||t.revalidation}}componentDidCatch(h,t){console.error("React Router caught the following error during render",h,t)}render(){return this.state.error!==void 0?q.createElement(zs.Provider,{value:this.props.routeContext},q.createElement(_A.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function mD({routeContext:h,match:t,children:e}){let s=q.useContext(wu);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),q.createElement(zs.Provider,{value:h},e)}function yD(h,t=[],e=null,s=null){if(h==null){if(!e)return null;if(e.errors)h=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)h=e.matches;else return null}let a=h,l=e==null?void 0:e.errors;if(l!=null){let f=a.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);Jt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,d=-1;if(e)for(let f=0;f<a.length;f++){let g=a[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=f),g.route.id){let{loaderData:m,errors:v}=e,b=g.route.loader&&!m.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||b){o=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,g,m)=>{let v,b=!1,A=null,E=null;e&&(v=l&&g.route.id?l[g.route.id]:void 0,A=g.route.errorElement||gD,o&&(d<0&&m===0?(k_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,E=null):d===m&&(b=!0,E=g.route.hydrateFallbackElement||null)));let _=t.concat(a.slice(0,m+1)),C=()=>{let R;return v?R=A:b?R=E:g.route.Component?R=q.createElement(g.route.Component,null):g.route.element?R=g.route.element:R=f,q.createElement(mD,{match:g,routeContext:{outlet:f,matches:_,isDataRoute:e!=null},children:R})};return e&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?q.createElement(pD,{location:e.location,revalidation:e.revalidation,component:A,error:v,children:C(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):C()},null)}function xA(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vD(h){let t=q.useContext(wu);return Jt(t,xA(h)),t}function bD(h){let t=q.useContext(Cg);return Jt(t,xA(h)),t}function AD(h){let t=q.useContext(zs);return Jt(t,xA(h)),t}function TA(h){let t=AD(h),e=t.matches[t.matches.length-1];return Jt(e.route.id,`${h} can only be used on routes that contain a unique "id"`),e.route.id}function SD(){return TA("useRouteId")}function wD(){var s;let h=q.useContext(_A),t=bD("useRouteError"),e=TA("useRouteError");return h!==void 0?h:(s=t.errors)==null?void 0:s[e]}function ED(){let{router:h}=vD("useNavigate"),t=TA("useNavigate"),e=q.useRef(!1);return N_(()=>{e.current=!0}),q.useCallback(async(a,l={})=>{bi(e.current,O_),e.current&&(typeof a=="number"?h.navigate(a):await h.navigate(a,{fromRouteId:t,...l}))},[h,t])}var V1={};function k_(h,t,e){!t&&!V1[h]&&(V1[h]=!0,bi(!1,e))}var Y1={};function X1(h,t){!h&&!Y1[t]&&(Y1[t]=!0,console.warn(t))}function _D(h){let t={hasErrorBoundary:h.hasErrorBoundary||h.ErrorBoundary!=null||h.errorElement!=null};return h.Component&&(h.element&&bi(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:q.createElement(h.Component),Component:void 0})),h.HydrateFallback&&(h.hydrateFallbackElement&&bi(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:q.createElement(h.HydrateFallback),HydrateFallback:void 0})),h.ErrorBoundary&&(h.errorElement&&bi(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:q.createElement(h.ErrorBoundary),ErrorBoundary:void 0})),t}var xD=class{constructor(){this.status="pending",this.promise=new Promise((h,t)=>{this.resolve=e=>{this.status==="pending"&&(this.status="resolved",h(e))},this.reject=e=>{this.status==="pending"&&(this.status="rejected",t(e))}})}};function TD({router:h,flushSync:t}){let[e,s]=q.useState(h.state),[a,l]=q.useState(),[o,d]=q.useState({isTransitioning:!1}),[f,g]=q.useState(),[m,v]=q.useState(),[b,A]=q.useState(),E=q.useRef(new Map),_=q.useCallback((O,{deletedFetchers:P,flushSync:M,viewTransitionOpts:k})=>{O.fetchers.forEach(($,G)=>{$.data!==void 0&&E.current.set(G,$.data)}),P.forEach($=>E.current.delete($)),X1(M===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let U=h.window!=null&&h.window.document!=null&&typeof h.window.document.startViewTransition=="function";if(X1(k==null||U,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!k||!U){t&&M?t(()=>s(O)):q.startTransition(()=>s(O));return}if(t&&M){t(()=>{m&&(f&&f.resolve(),m.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:k.currentLocation,nextLocation:k.nextLocation})});let $=h.window.document.startViewTransition(()=>{t(()=>s(O))});$.finished.finally(()=>{t(()=>{g(void 0),v(void 0),l(void 0),d({isTransitioning:!1})})}),t(()=>v($));return}m?(f&&f.resolve(),m.skipTransition(),A({state:O,currentLocation:k.currentLocation,nextLocation:k.nextLocation})):(l(O),d({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}))},[h.window,t,m,f]);q.useLayoutEffect(()=>h.subscribe(_),[h,_]),q.useEffect(()=>{o.isTransitioning&&!o.flushSync&&g(new xD)},[o]),q.useEffect(()=>{if(f&&a&&h.window){let O=a,P=f.promise,M=h.window.document.startViewTransition(async()=>{q.startTransition(()=>s(O)),await P});M.finished.finally(()=>{g(void 0),v(void 0),l(void 0),d({isTransitioning:!1})}),v(M)}},[a,f,h.window]),q.useEffect(()=>{f&&a&&e.location.key===a.location.key&&f.resolve()},[f,m,e.location,a]),q.useEffect(()=>{!o.isTransitioning&&b&&(l(b.state),d({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}),A(void 0))},[o.isTransitioning,b]);let C=q.useMemo(()=>({createHref:h.createHref,encodeLocation:h.encodeLocation,go:O=>h.navigate(O),push:(O,P,M)=>h.navigate(O,{state:P,preventScrollReset:M==null?void 0:M.preventScrollReset}),replace:(O,P,M)=>h.navigate(O,{replace:!0,state:P,preventScrollReset:M==null?void 0:M.preventScrollReset})}),[h]),R=h.basename||"/",L=q.useMemo(()=>({router:h,navigator:C,static:!1,basename:R}),[h,C,R]);return q.createElement(q.Fragment,null,q.createElement(wu.Provider,{value:L},q.createElement(Cg.Provider,{value:e},q.createElement(L_.Provider,{value:E.current},q.createElement(EA.Provider,{value:o},q.createElement(LD,{basename:R,location:e.location,navigationType:e.historyAction,navigator:C},q.createElement(CD,{routes:h.routes,future:h.future,state:e})))))),null)}var CD=q.memo(RD);function RD({routes:h,future:t,state:e}){return dD(h,void 0,e,t)}function MD({to:h,replace:t,state:e,relative:s}){Jt(Th(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=q.useContext(Ps);bi(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=q.useContext(zs),{pathname:o}=ca(),d=Rg(),f=yy(h,my(l),o,s==="path"),g=JSON.stringify(f);return q.useEffect(()=>{d(JSON.parse(g),{replace:t,state:e,relative:s})},[d,g,s,t,e]),null}function DD(h){return hD(h.context)}function LD({basename:h="/",children:t=null,location:e,navigationType:s="POP",navigator:a,static:l=!1}){Jt(!Th(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=h.replace(/^\/*/,"/"),d=q.useMemo(()=>({basename:o,navigator:a,static:l,future:{}}),[o,a,l]);typeof e=="string"&&(e=Ol(e));let{pathname:f="/",search:g="",hash:m="",state:v=null,key:b="default"}=e,A=q.useMemo(()=>{let E=hs(f,o);return E==null?null:{location:{pathname:E,search:g,hash:m,state:v,key:b},navigationType:s}},[o,f,g,m,v,b,s]);return bi(A!=null,`<Router basename="${o}"> is not able to match the URL "${f}${g}${m}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:q.createElement(Ps.Provider,{value:d},q.createElement(vy.Provider,{children:t,value:A}))}var rm="get",lm="application/x-www-form-urlencoded";function by(h){return h!=null&&typeof h.tagName=="string"}function OD(h){return by(h)&&h.tagName.toLowerCase()==="button"}function ND(h){return by(h)&&h.tagName.toLowerCase()==="form"}function kD(h){return by(h)&&h.tagName.toLowerCase()==="input"}function PD(h){return!!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)}function zD(h,t){return h.button===0&&(!t||t==="_self")&&!PD(h)}var Wp=null;function FD(){if(Wp===null)try{new FormData(document.createElement("form"),0),Wp=!1}catch{Wp=!0}return Wp}var HD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jb(h){return h!=null&&!HD.has(h)?(bi(!1,`"${h}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${lm}"`),null):h}function BD(h,t){let e,s,a,l,o;if(ND(h)){let d=h.getAttribute("action");s=d?hs(d,t):null,e=h.getAttribute("method")||rm,a=jb(h.getAttribute("enctype"))||lm,l=new FormData(h)}else if(OD(h)||kD(h)&&(h.type==="submit"||h.type==="image")){let d=h.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=h.getAttribute("formaction")||d.getAttribute("action");if(s=f?hs(f,t):null,e=h.getAttribute("formmethod")||d.getAttribute("method")||rm,a=jb(h.getAttribute("formenctype"))||jb(d.getAttribute("enctype"))||lm,l=new FormData(d,h),!FD()){let{name:g,type:m,value:v}=h;if(m==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,v)}}else{if(by(h))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=rm,s=null,a=lm,o=h}return l&&a==="text/plain"&&(o=l,l=void 0),{action:s,method:e.toLowerCase(),encType:a,formData:l,body:o}}function CA(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}async function UD(h,t){if(h.id in t)return t[h.id];try{let e=await import(h.module);return t[h.id]=e,e}catch(e){return console.error(`Error loading route module \`${h.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ID(h){return h==null?!1:h.href==null?h.rel==="preload"&&typeof h.imageSrcSet=="string"&&typeof h.imageSizes=="string":typeof h.rel=="string"&&typeof h.href=="string"}async function jD(h,t,e){let s=await Promise.all(h.map(async a=>{let l=t.routes[a.route.id];if(l){let o=await UD(l,e);return o.links?o.links():[]}return[]}));return YD(s.flat(1).filter(ID).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function $1(h,t,e,s,a,l){let o=(f,g)=>e[g]?f.route.id!==e[g].route.id:!0,d=(f,g)=>{var m;return e[g].pathname!==f.pathname||((m=e[g].route.path)==null?void 0:m.endsWith("*"))&&e[g].params["*"]!==f.params["*"]};return l==="assets"?t.filter((f,g)=>o(f,g)||d(f,g)):l==="data"?t.filter((f,g)=>{var v;let m=s.routes[f.route.id];if(!m||!m.hasLoader)return!1;if(o(f,g)||d(f,g))return!0;if(f.route.shouldRevalidate){let b=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=e[0])==null?void 0:v.params)||{},nextUrl:new URL(h,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function GD(h,t,{includeHydrateFallback:e}={}){return qD(h.map(s=>{let a=t.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function qD(h){return[...new Set(h)]}function VD(h){let t={},e=Object.keys(h).sort();for(let s of e)t[s]=h[s];return t}function YD(h,t){let e=new Set;return new Set(t),h.reduce((s,a)=>{let l=JSON.stringify(VD(a));return e.has(l)||(e.add(l),s.push({key:l,link:a})),s},[])}function XD(h,t){let e=typeof h=="string"?new URL(h,typeof window>"u"?"server://singlefetch/":window.location.origin):h;return e.pathname==="/"?e.pathname="_root.data":t&&hs(e.pathname,t)==="/"?e.pathname=`${t.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function P_(){let h=q.useContext(wu);return CA(h,"You must render this element inside a <DataRouterContext.Provider> element"),h}function $D(){let h=q.useContext(Cg);return CA(h,"You must render this element inside a <DataRouterStateContext.Provider> element"),h}var RA=q.createContext(void 0);RA.displayName="FrameworkContext";function z_(){let h=q.useContext(RA);return CA(h,"You must render this element inside a <HydratedRouter> element"),h}function KD(h,t){let e=q.useContext(RA),[s,a]=q.useState(!1),[l,o]=q.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:g,onMouseLeave:m,onTouchStart:v}=t,b=q.useRef(null);q.useEffect(()=>{if(h==="render"&&o(!0),h==="viewport"){let _=R=>{R.forEach(L=>{o(L.isIntersecting)})},C=new IntersectionObserver(_,{threshold:.5});return b.current&&C.observe(b.current),()=>{C.disconnect()}}},[h]),q.useEffect(()=>{if(s){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[s]);let A=()=>{a(!0)},E=()=>{a(!1),o(!1)};return e?h!=="intent"?[l,b,{}]:[l,b,{onFocus:Rd(d,A),onBlur:Rd(f,E),onMouseEnter:Rd(g,A),onMouseLeave:Rd(m,E),onTouchStart:Rd(v,A)}]:[!1,b,{}]}function Rd(h,t){return e=>{h&&h(e),e.defaultPrevented||t(e)}}function WD({page:h,...t}){let{router:e}=P_(),s=q.useMemo(()=>jr(e.routes,h,e.basename),[e.routes,h,e.basename]);return s?q.createElement(ZD,{page:h,matches:s,...t}):null}function QD(h){let{manifest:t,routeModules:e}=z_(),[s,a]=q.useState([]);return q.useEffect(()=>{let l=!1;return jD(h,t,e).then(o=>{l||a(o)}),()=>{l=!0}},[h,t,e]),s}function ZD({page:h,matches:t,...e}){let s=ca(),{manifest:a,routeModules:l}=z_(),{basename:o}=P_(),{loaderData:d,matches:f}=$D(),g=q.useMemo(()=>$1(h,t,f,a,s,"data"),[h,t,f,a,s]),m=q.useMemo(()=>$1(h,t,f,a,s,"assets"),[h,t,f,a,s]),v=q.useMemo(()=>{if(h===s.pathname+s.search+s.hash)return[];let E=new Set,_=!1;if(t.forEach(R=>{var O;let L=a.routes[R.route.id];!L||!L.hasLoader||(!g.some(P=>P.route.id===R.route.id)&&R.route.id in d&&((O=l[R.route.id])!=null&&O.shouldRevalidate)||L.hasClientLoader?_=!0:E.add(R.route.id))}),E.size===0)return[];let C=XD(h,o);return _&&E.size>0&&C.searchParams.set("_routes",t.filter(R=>E.has(R.route.id)).map(R=>R.route.id).join(",")),[C.pathname+C.search]},[o,d,s,a,g,t,h,l]),b=q.useMemo(()=>GD(m,a),[m,a]),A=QD(m);return q.createElement(q.Fragment,null,v.map(E=>q.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...e})),b.map(E=>q.createElement("link",{key:E,rel:"modulepreload",href:E,...e})),A.map(({key:E,link:_})=>q.createElement("link",{key:E,..._})))}function JD(...h){return t=>{h.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var F_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{F_&&(window.__reactRouterVersion="7.3.0")}catch{}function t2(h,t){return IM({basename:t==null?void 0:t.basename,unstable_getContext:t==null?void 0:t.unstable_getContext,future:t==null?void 0:t.future,history:hM({window:t==null?void 0:t.window}),hydrationData:e2(),routes:h,mapRouteProperties:_D,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function e2(){let h=window==null?void 0:window.__staticRouterHydrationData;return h&&h.errors&&(h={...h,errors:i2(h.errors)}),h}function i2(h){if(!h)return null;let t=Object.entries(h),e={};for(let[s,a]of t)if(a&&a.__type==="RouteErrorResponse")e[s]=new Im(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let l=window[a.__subType];if(typeof l=="function")try{let o=new l(a.message);o.stack="",e[s]=o}catch{}}if(e[s]==null){let l=new Error(a.message);l.stack="",e[s]=l}}else e[s]=a;return e}var H_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xh=q.forwardRef(function({onClick:t,discover:e="render",prefetch:s="none",relative:a,reloadDocument:l,replace:o,state:d,target:f,to:g,preventScrollReset:m,viewTransition:v,...b},A){let{basename:E}=q.useContext(Ps),_=typeof g=="string"&&H_.test(g),C,R=!1;if(typeof g=="string"&&_&&(C=g,F_))try{let G=new URL(window.location.href),Z=g.startsWith("//")?new URL(G.protocol+g):new URL(g),it=hs(Z.pathname,E);Z.origin===G.origin&&it!=null?g=it+Z.search+Z.hash:R=!0}catch{bi(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=oD(g,{relative:a}),[O,P,M]=KD(s,b),k=r2(g,{replace:o,state:d,target:f,preventScrollReset:m,relative:a,viewTransition:v});function U(G){t&&t(G),G.defaultPrevented||k(G)}let $=q.createElement("a",{...b,...M,href:C||L,onClick:R||l?t:U,ref:JD(A,P),target:f,"data-discover":!_&&e==="render"?"true":void 0});return O&&!_?q.createElement(q.Fragment,null,$,q.createElement(WD,{page:L})):$});xh.displayName="Link";var n2=q.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:s="",end:a=!1,style:l,to:o,viewTransition:d,children:f,...g},m){let v=Mg(o,{relative:g.relative}),b=ca(),A=q.useContext(Cg),{navigator:E,basename:_}=q.useContext(Ps),C=A!=null&&h2(v)&&d===!0,R=E.encodeLocation?E.encodeLocation(v).pathname:v.pathname,L=b.pathname,O=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;e||(L=L.toLowerCase(),O=O?O.toLowerCase():null,R=R.toLowerCase()),O&&_&&(O=hs(O,_)||O);const P=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let M=L===R||!a&&L.startsWith(R)&&L.charAt(P)==="/",k=O!=null&&(O===R||!a&&O.startsWith(R)&&O.charAt(R.length)==="/"),U={isActive:M,isPending:k,isTransitioning:C},$=M?t:void 0,G;typeof s=="function"?G=s(U):G=[s,M?"active":null,k?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let Z=typeof l=="function"?l(U):l;return q.createElement(xh,{...g,"aria-current":$,className:G,ref:m,style:Z,to:o,viewTransition:d},typeof f=="function"?f(U):f)});n2.displayName="NavLink";var s2=q.forwardRef(({discover:h="render",fetcherKey:t,navigate:e,reloadDocument:s,replace:a,state:l,method:o=rm,action:d,onSubmit:f,relative:g,preventScrollReset:m,viewTransition:v,...b},A)=>{let E=u2(),_=c2(d,{relative:g}),C=o.toLowerCase()==="get"?"get":"post",R=typeof d=="string"&&H_.test(d),L=O=>{if(f&&f(O),O.defaultPrevented)return;O.preventDefault();let P=O.nativeEvent.submitter,M=(P==null?void 0:P.getAttribute("formmethod"))||o;E(P||O.currentTarget,{fetcherKey:t,method:M,navigate:e,replace:a,state:l,relative:g,preventScrollReset:m,viewTransition:v})};return q.createElement("form",{ref:A,method:C,action:_,onSubmit:s?f:L,...b,"data-discover":!R&&h==="render"?"true":void 0})});s2.displayName="Form";function a2(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function B_(h){let t=q.useContext(wu);return Jt(t,a2(h)),t}function r2(h,{target:t,replace:e,state:s,preventScrollReset:a,relative:l,viewTransition:o}={}){let d=Rg(),f=ca(),g=Mg(h,{relative:l});return q.useCallback(m=>{if(zD(m,t)){m.preventDefault();let v=e!==void 0?e:Tl(f)===Tl(g);d(h,{replace:v,state:s,preventScrollReset:a,relative:l,viewTransition:o})}},[f,d,g,e,s,t,h,a,l,o])}var l2=0,o2=()=>`__${String(++l2)}__`;function u2(){let{router:h}=B_("useSubmit"),{basename:t}=q.useContext(Ps),e=SD();return q.useCallback(async(s,a={})=>{let{action:l,method:o,encType:d,formData:f,body:g}=BD(s,t);if(a.navigate===!1){let m=a.fetcherKey||o2();await h.fetch(m,e,a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:g,formMethod:a.method||o,formEncType:a.encType||d,flushSync:a.flushSync})}else await h.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:g,formMethod:a.method||o,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[h,t,e])}function c2(h,{relative:t}={}){let{basename:e}=q.useContext(Ps),s=q.useContext(zs);Jt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...Mg(h||".",{relative:t})},o=ca();if(h==null){l.search=o.search;let d=new URLSearchParams(l.search),f=d.getAll("index");if(f.some(m=>m==="")){d.delete("index"),f.filter(v=>v).forEach(v=>d.append("index",v));let m=d.toString();l.search=m?`?${m}`:""}}return(!h||h===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(l.pathname=l.pathname==="/"?e:oa([e,l.pathname])),Tl(l)}function h2(h,t={}){let e=q.useContext(EA);Jt(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=B_("useViewTransitionState"),a=Mg(h,{relative:t.relative});if(!e.isTransitioning)return!1;let l=hs(e.currentLocation.pathname,s)||e.currentLocation.pathname,o=hs(e.nextLocation.pathname,s)||e.nextLocation.pathname;return Um(a.pathname,o)!=null||Um(a.pathname,l)!=null}new TextEncoder;var d2=b_();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function f2(h){return q.createElement(TD,{flushSync:d2.flushSync,...h})}/*! js-cookie v3.0.5 | MIT */function Qp(h){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var s in e)h[s]=e[s]}return h}var g2={read:function(h){return h[0]==='"'&&(h=h.slice(1,-1)),h.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(h){return encodeURIComponent(h).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function e0(h,t){function e(a,l,o){if(!(typeof document>"u")){o=Qp({},t,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var f in o)o[f]&&(d+="; "+f,o[f]!==!0&&(d+="="+o[f].split(";")[0]));return document.cookie=a+"="+h.write(l,a)+d}}function s(a){if(!(typeof document>"u"||arguments.length&&!a)){for(var l=document.cookie?document.cookie.split("; "):[],o={},d=0;d<l.length;d++){var f=l[d].split("="),g=f.slice(1).join("=");try{var m=decodeURIComponent(f[0]);if(o[m]=h.read(g,m),a===m)break}catch{}}return a?o[a]:o}}return Object.create({set:e,get:s,remove:function(a,l){e(a,"",Qp({},l,{expires:-1}))},withAttributes:function(a){return e0(this.converter,Qp({},this.attributes,a))},withConverter:function(a){return e0(Qp({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(h)}})}var vu=e0(g2,{path:"/"});const p2=()=>{const[h,t]=q.useState(""),[e,s]=q.useState(""),a=Rg(),l=async o=>{o.preventDefault();try{const d=await fetch("http://localhost:5000/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h,password:e})}),f=await d.json();d.ok?(vu.set("userEmail",h),a("/")):alert(f.message)}catch(d){console.error("Error:",d)}};return J.jsx("div",{children:J.jsxs("div",{className:"fram",children:[J.jsx("div",{id:"ffc",className:"fc",children:J.jsxs("div",{id:"ff",children:[J.jsx("h3",{children:"Welcome to Chatbot Creator"}),J.jsxs("div",{children:[J.jsx(xh,{to:"/login",children:J.jsx("button",{children:"Login"})}),J.jsx(xh,{to:"/register",children:J.jsx("button",{children:"Register"})})]}),J.jsx("div",{children:J.jsxs("form",{onSubmit:l,id:"form",children:[J.jsx("input",{type:"email",placeholder:"Email",value:h,onChange:o=>t(o.target.value),required:!0}),J.jsx("input",{type:"password",placeholder:"Password",value:e,onChange:o=>s(o.target.value),required:!0}),J.jsx("button",{id:"login",type:"submit",children:"Login"})]})})]})}),J.jsxs("div",{id:"sfc",className:"fc",children:[J.jsx("h1",{children:"Create Custom Chatbots"}),J.jsx("p",{children:"Build an intelligent chatbot powered by OpenAI without writing any code."})]})]})})};var Zd={};Zd.d=(h,t)=>{for(var e in t)Zd.o(t,e)&&!Zd.o(h,e)&&Object.defineProperty(h,e,{enumerable:!0,get:t[e]})};Zd.o=(h,t)=>Object.prototype.hasOwnProperty.call(h,t);var kt=globalThis.pdfjsLib={};Zd.d(kt,{AbortException:()=>Cl,AnnotationEditorLayer:()=>gA,AnnotationEditorParamsType:()=>ee,AnnotationEditorType:()=>Bt,AnnotationEditorUIManager:()=>Au,AnnotationLayer:()=>G0,AnnotationMode:()=>Gr,AnnotationType:()=>Qe,ColorPicker:()=>$m,DOMSVGFactory:()=>Ym,DrawLayer:()=>yA,FeatureTest:()=>ki,GlobalWorkerOptions:()=>cr,ImageKind:()=>om,InvalidPDFException:()=>n0,MathClamp:()=>Ji,OPS:()=>jm,OutputScale:()=>gr,PDFDataRangeTransport:()=>jx,PDFDateString:()=>NA,PDFWorker:()=>vc,PasswordResponses:()=>v2,PermissionFlag:()=>y2,PixelsPerInch:()=>Rl,RenderingCancelledException:()=>LA,ResponseException:()=>Gm,SignatureExtractor:()=>hr,SupportedImageMimeTypes:()=>a0,TextLayer:()=>ef,TouchManager:()=>Vm,Util:()=>wt,VerbosityLevel:()=>Ay,XfaLayer:()=>qx,build:()=>UL,createValidAbsoluteUrl:()=>w2,fetchData:()=>Lg,getDocument:()=>ML,getFilenameFromUrl:()=>L2,getPdfFilenameFromUrl:()=>O2,getUuid:()=>j_,getXfaPageViewport:()=>N2,isDataScheme:()=>Ey,isPdfFile:()=>OA,isValidExplicitDest:()=>NL,noContextMenu:()=>Ns,normalizeUnicode:()=>R2,setLayerDimensions:()=>bu,shadow:()=>Zt,stopEvent:()=>Ze,version:()=>BL});const Di=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),U_=[1,0,0,1,0,0],i0=[.001,0,0,.001,0,0],Gb=1.35,Nn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Gr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},m2="pdfjs_internal_editor_",Bt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},ee={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},y2={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Hi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},om={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Qe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},lc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Ay={ERRORS:0,WARNINGS:1,INFOS:5},jm={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Zp={moveTo:0,lineTo:1,curveTo:2,closePath:3},v2={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Sy=Ay.WARNINGS;function b2(h){Number.isInteger(h)&&(Sy=h)}function A2(){return Sy}function wy(h){Sy>=Ay.INFOS&&console.log(`Info: ${h}`)}function It(h){Sy>=Ay.WARNINGS&&console.log(`Warning: ${h}`)}function ye(h){throw new Error(h)}function Je(h,t){h||ye(t)}function S2(h){switch(h==null?void 0:h.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function w2(h,t=null,e=null){if(!h)return null;if(e&&typeof h=="string"){if(e.addDefaultProtocol&&h.startsWith("www.")){const a=h.match(/\./g);(a==null?void 0:a.length)>=2&&(h=`http://${h}`)}if(e.tryConvertEncoding)try{h=C2(h)}catch{}}const s=t?URL.parse(h,t):URL.parse(h);return S2(s)?s:null}function Zt(h,t,e,s=!1){return Object.defineProperty(h,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const Eu=function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class K1 extends Eu{constructor(t,e){super(t,"PasswordException"),this.code=e}}class qb extends Eu{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class n0 extends Eu{constructor(t){super(t,"InvalidPDFException")}}class Gm extends Eu{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class E2 extends Eu{constructor(t){super(t,"FormatError")}}class Cl extends Eu{constructor(t){super(t,"AbortException")}}function I_(h){(typeof h!="object"||(h==null?void 0:h.length)===void 0)&&ye("Invalid argument for bytesToString");const t=h.length,e=8192;if(t<e)return String.fromCharCode.apply(null,h);const s=[];for(let a=0;a<t;a+=e){const l=Math.min(a+e,t),o=h.subarray(a,l);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function Dg(h){typeof h!="string"&&ye("Invalid argument for stringToBytes");const t=h.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=h.charCodeAt(s)&255;return e}function _2(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function MA(h){const t=Object.create(null);for(const[e,s]of h)t[e]=s;return t}function x2(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function T2(){try{return new Function(""),!0}catch{return!1}}class ki{static get isLittleEndian(){return Zt(this,"isLittleEndian",x2())}static get isEvalSupported(){return Zt(this,"isEvalSupported",T2())}static get isOffscreenCanvasSupported(){return Zt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Zt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){if(typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"){const{platform:t,userAgent:e}=navigator;return Zt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}return Zt(this,"platform",{isAndroid:!1,isLinux:!1,isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Zt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Vb=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));var dr,um,s0;class wt{static makeHexColor(t,e,s){return`#${Vb[t]}${Vb[e]}${Vb[s]}`}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const s=t[0]*e[0]+t[1]*e[2]+e[4],a=t[0]*e[1]+t[1]*e[3]+e[5];return[s,a]}static applyInverseTransform(t,e){const s=e[0]*e[3]-e[1]*e[2],a=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/s,l=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/s;return[a,l]}static getAxialAlignedBoundingBox(t,e){const s=this.applyTransform(t,e),a=this.applyTransform(t.slice(2,4),e),l=this.applyTransform([t[0],t[3]],e),o=this.applyTransform([t[2],t[1]],e);return[Math.min(s[0],a[0],l[0],o[0]),Math.min(s[1],a[1],l[1],o[1]),Math.max(s[0],a[0],l[0],o[0]),Math.max(s[1],a[1],l[1],o[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],s=t[0]*e[0]+t[1]*e[2],a=t[0]*e[1]+t[1]*e[3],l=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],d=(s+o)/2,f=Math.sqrt((s+o)**2-4*(s*o-l*a))/2,g=d+f||1,m=d-f||1;return[Math.sqrt(g),Math.sqrt(m)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>a)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return l>o?null:[s,l,a,o]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,a,l){l[0]=Math.min(l[0],t,s),l[1]=Math.min(l[1],e,a),l[2]=Math.max(l[2],t,s),l[3]=Math.max(l[3],e,a)}static bezierBoundingBox(t,e,s,a,l,o,d,f,g){g[0]=Math.min(g[0],t,d),g[1]=Math.min(g[1],e,f),g[2]=Math.max(g[2],t,d),g[3]=Math.max(g[3],e,f),T(this,dr,s0).call(this,t,s,l,d,e,a,o,f,3*(-t+3*(s-l)+d),6*(t-2*s+l),3*(s-t),g),T(this,dr,s0).call(this,t,s,l,d,e,a,o,f,3*(-e+3*(a-o)+f),6*(e-2*a+o),3*(a-e),g)}}dr=new WeakSet,um=function(t,e,s,a,l,o,d,f,g,m){if(g<=0||g>=1)return;const v=1-g,b=g*g,A=b*g,E=v*(v*(v*t+3*g*e)+3*b*s)+A*a,_=v*(v*(v*l+3*g*o)+3*b*d)+A*f;m[0]=Math.min(m[0],E),m[1]=Math.min(m[1],_),m[2]=Math.max(m[2],E),m[3]=Math.max(m[3],_)},s0=function(t,e,s,a,l,o,d,f,g,m,v,b){if(Math.abs(g)<1e-12){Math.abs(m)>=1e-12&&T(this,dr,um).call(this,t,e,s,a,l,o,d,f,-v/m,b);return}const A=m**2-4*v*g;if(A<0)return;const E=Math.sqrt(A),_=2*g;T(this,dr,um).call(this,t,e,s,a,l,o,d,f,(-m+E)/_,b),T(this,dr,um).call(this,t,e,s,a,l,o,d,f,(-m-E)/_,b)},x(wt,dr);function C2(h){return decodeURIComponent(escape(h))}let Yb=null,W1=null;function R2(h){return Yb||(Yb=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,W1=new Map([["","t"]])),h.replaceAll(Yb,(t,e,s)=>e?e.normalize("NFKC"):W1.get(s))}function j_(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),I_(h)}const DA="pdfjs_internal_id_";function M2(h,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,a,...l]=e;if(!h(s)&&!Number.isInteger(s)||!t(a))return!1;const o=l.length;let d=!0;switch(a.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;d=!1;break;default:return!1}for(const f of l)if(!(typeof f=="number"||d&&f===null))return!1;return!0}function Ji(h,t,e){return Math.min(Math.max(h,t),e)}function G_(h){return Uint8Array.prototype.toBase64?h.toBase64():btoa(I_(h))}function D2(h){return Uint8Array.fromBase64?Uint8Array.fromBase64(h):Dg(atob(h))}typeof Promise.try!="function"&&(Promise.try=function(h,...t){return new Promise(e=>{e(h(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(h){return h.reduce((t,e)=>t+e,0)});const Oa="http://www.w3.org/2000/svg",oo=class oo{};At(oo,"CSS",96),At(oo,"PDF",72),At(oo,"PDF_TO_CSS_UNITS",oo.CSS/oo.PDF);let Rl=oo;async function Lg(h,t="text"){if(oc(h,document.baseURI)){const e=await fetch(h);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const a=new XMLHttpRequest;a.open("GET",h,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}s(new Error(a.statusText))}},a.send(null)})}class Og{constructor({viewBox:t,userUnit:e,scale:s,rotation:a,offsetX:l=0,offsetY:o=0,dontFlip:d=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=a,this.offsetX=l,this.offsetY=o,s*=e;const f=(t[2]+t[0])/2,g=(t[3]+t[1])/2;let m,v,b,A;switch(a%=360,a<0&&(a+=360),a){case 180:m=-1,v=0,b=0,A=1;break;case 90:m=0,v=1,b=1,A=0;break;case 270:m=0,v=-1,b=-1,A=0;break;case 0:m=1,v=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}d&&(b=-b,A=-A);let E,_,C,R;m===0?(E=Math.abs(g-t[1])*s+l,_=Math.abs(f-t[0])*s+o,C=(t[3]-t[1])*s,R=(t[2]-t[0])*s):(E=Math.abs(f-t[0])*s+l,_=Math.abs(g-t[1])*s+o,C=(t[2]-t[0])*s,R=(t[3]-t[1])*s),this.transform=[m*s,v*s,b*s,A*s,E-m*s*f-b*s*g,_-v*s*f-A*s*g],this.width=C,this.height=R}get rawDims(){const t=this.viewBox;return Zt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:a=this.offsetY,dontFlip:l=!1}={}){return new Og({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:a,dontFlip:l})}convertToViewportPoint(t,e){return wt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=wt.applyTransform([t[0],t[1]],this.transform),s=wt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){return wt.applyInverseTransform([t,e],this.transform)}}class LA extends Eu{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Ey(h){const t=h.length;let e=0;for(;e<t&&h[e].trim()==="";)e++;return h.substring(e,e+5).toLowerCase()==="data:"}function OA(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function L2(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function O2(h,t="document.pdf"){if(typeof h!="string")return t;if(Ey(h))return It('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=e.exec(h);let l=s.exec(a[1])||s.exec(a[2])||s.exec(a[3]);if(l&&(l=l[0],l.includes("%")))try{l=s.exec(decodeURIComponent(l))[0]}catch{}return l||t}class Q1{constructor(){At(this,"started",Object.create(null));At(this,"times",[])}time(t){t in this.started&&It(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||It(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:a,end:l}of this.times)t.push(`${s.padEnd(e)} ${l-a}ms
`);return t.join("")}}function oc(h,t){const e=t?URL.parse(h,t):URL.parse(h);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Ns(h){h.preventDefault()}function Ze(h){h.preventDefault(),h.stopPropagation()}var sf;class NA{static toDateObject(t){if(!t||typeof t!="string")return null;c(this,sf)||S(this,sf,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=c(this,sf).exec(t);if(!e)return null;const s=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let l=parseInt(e[3],10);l=l>=1&&l<=31?l:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let d=parseInt(e[5],10);d=d>=0&&d<=59?d:0;let f=parseInt(e[6],10);f=f>=0&&f<=59?f:0;const g=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let v=parseInt(e[9],10)||0;return v=v>=0&&v<=59?v:0,g==="-"?(o+=m,d+=v):g==="+"&&(o-=m,d-=v),new Date(Date.UTC(s,a,l,o,d,f))}}sf=new WeakMap,x(NA,sf);function N2(h,{scale:t=1,rotation:e=0}){const{width:s,height:a}=h.attributes.style,l=[0,0,parseInt(s),parseInt(a)];return new Og({viewBox:l,userUnit:1,scale:t,rotation:e})}function kA(h){if(h.startsWith("#")){const t=parseInt(h.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(t=>parseInt(t)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(It(`Not a valid color format: "${h}"`),[0,0,0])}function k2(h){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of h.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;h.set(e,kA(s))}t.remove()}function Re(h){const{a:t,b:e,c:s,d:a,e:l,f:o}=h.getTransform();return[t,e,s,a,l,o]}function Gs(h){const{a:t,b:e,c:s,d:a,e:l,f:o}=h.getTransform().invertSelf();return[t,e,s,a,l,o]}function bu(h,t,e=!1,s=!0){if(t instanceof Og){const{pageWidth:a,pageHeight:l}=t.rawDims,{style:o}=h,d=ki.isCSSRoundSupported,f=`var(--total-scale-factor) * ${a}px`,g=`var(--total-scale-factor) * ${l}px`,m=d?`round(down, ${f}, var(--scale-round-x))`:`calc(${f})`,v=d?`round(down, ${g}, var(--scale-round-y))`:`calc(${g})`;!e||t.rotation%180===0?(o.width=m,o.height=v):(o.width=v,o.height=m)}s&&h.setAttribute("data-main-rotation",t.rotation)}class gr{constructor(){const{pixelRatio:t}=gr;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,a){let l=1/0,o=1/0,d=1/0;s>0&&(l=Math.sqrt(s/(t*e))),a!==-1&&(o=a/t,d=a/e);const f=Math.min(l,o,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}}const a0=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var qr,ho,ts,Vr,af,bc,rf,Qm,q_,Ni,V_,Y_,Pd,X_,cm;const Pa=class Pa{constructor(t){x(this,Ni);x(this,qr,null);x(this,ho,null);x(this,ts);x(this,Vr,null);x(this,af,null);x(this,bc,null);S(this,ts,t),c(Pa,rf)||S(Pa,rf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=S(this,qr,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=c(this,ts)._uiManager._signal;t.addEventListener("contextmenu",Ns,{signal:e}),t.addEventListener("pointerdown",T(Pa,Qm,q_),{signal:e});const s=S(this,Vr,document.createElement("div"));s.className="buttons",t.append(s);const a=c(this,ts).toolbarPosition;if(a){const{style:l}=t,o=c(this,ts)._uiManager.direction==="ltr"?1-a[0]:a[0];l.insetInlineEnd=`${100*o}%`,l.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return T(this,Ni,X_).call(this),t}get div(){return c(this,qr)}hide(){var t;c(this,qr).classList.add("hidden"),(t=c(this,ho))==null||t.hideDropdown()}show(){var t;c(this,qr).classList.remove("hidden"),(t=c(this,af))==null||t.shown()}async addAltText(t){const e=await t.render();T(this,Ni,Pd).call(this,e),c(this,Vr).prepend(e,c(this,Ni,cm)),S(this,af,t)}addColorPicker(t){S(this,ho,t);const e=t.renderButton();T(this,Ni,Pd).call(this,e),c(this,Vr).prepend(e,c(this,Ni,cm))}async addEditSignatureButton(t){const e=S(this,bc,await t.renderEditButton(c(this,ts)));T(this,Ni,Pd).call(this,e),c(this,Vr).prepend(e,c(this,Ni,cm))}updateEditSignatureButton(t){c(this,bc)&&(c(this,bc).title=t)}remove(){var t;c(this,qr).remove(),(t=c(this,ho))==null||t.destroy(),S(this,ho,null)}};qr=new WeakMap,ho=new WeakMap,ts=new WeakMap,Vr=new WeakMap,af=new WeakMap,bc=new WeakMap,rf=new WeakMap,Qm=new WeakSet,q_=function(t){t.stopPropagation()},Ni=new WeakSet,V_=function(t){c(this,ts)._focusEventsAllowed=!1,Ze(t)},Y_=function(t){c(this,ts)._focusEventsAllowed=!0,Ze(t)},Pd=function(t){const e=c(this,ts)._uiManager._signal;t.addEventListener("focusin",T(this,Ni,V_).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",T(this,Ni,Y_).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ns,{signal:e})},X_=function(){const{editorType:t,_uiManager:e}=c(this,ts),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",c(Pa,rf)[t]),T(this,Ni,Pd).call(this,s),s.addEventListener("click",a=>{e.delete()},{signal:e._signal}),c(this,Vr).append(s)},cm=function(){const t=document.createElement("div");return t.className="divider",t},x(Pa,Qm),x(Pa,rf,null);let r0=Pa;var lf,fo,go,Ml,$_,K_,W_;class P2{constructor(t){x(this,Ml);x(this,lf,null);x(this,fo,null);x(this,go);S(this,go,t)}show(t,e,s){const[a,l]=T(this,Ml,K_).call(this,e,s),{style:o}=c(this,fo)||S(this,fo,T(this,Ml,$_).call(this));t.append(c(this,fo)),o.insetInlineEnd=`${100*a}%`,o.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,fo).remove()}}lf=new WeakMap,fo=new WeakMap,go=new WeakMap,Ml=new WeakSet,$_=function(){const t=S(this,fo,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ns,{signal:c(this,go)._signal});const e=S(this,lf,document.createElement("div"));return e.className="buttons",t.append(e),T(this,Ml,W_).call(this),t},K_=function(t,e){let s=0,a=0;for(const l of t){const o=l.y+l.height;if(o<s)continue;const d=l.x+(e?l.width:0);if(o>s){a=d,s=o;continue}e?d>a&&(a=d):d<a&&(a=d)}return[e?1-a:a,s]},W_=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=c(this,go)._signal;t.addEventListener("contextmenu",Ns,{signal:s}),t.addEventListener("click",()=>{c(this,go).highlightSelection("floating_button")},{signal:s}),c(this,lf).append(t)};function PA(h,t,e){for(const s of e)t.addEventListener(s,h[s].bind(h))}var Zm;class z2{constructor(){x(this,Zm,0)}get id(){return`${m2}${Xi(this,Zm)._++}`}}Zm=new WeakMap;var Ac,of,Ui,Sc,hm;const jA=class jA{constructor(){x(this,Sc);x(this,Ac,j_());x(this,of,0);x(this,Ui,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const l=a.decode().then(()=>(s.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Zt(this,"_isSVGFittingCanvas",l)}async getFromFile(t){const{lastModified:e,name:s,size:a,type:l}=t;return T(this,Sc,hm).call(this,`${e}_${s}_${a}_${l}`,t)}async getFromUrl(t){return T(this,Sc,hm).call(this,t,t)}async getFromBlob(t,e){const s=await e;return T(this,Sc,hm).call(this,t,s)}async getFromId(t){c(this,Ui)||S(this,Ui,new Map);const e=c(this,Ui).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){c(this,Ui)||S(this,Ui,new Map);let s=c(this,Ui).get(t);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),s={bitmap:a.transferToImageBitmap(),id:`image_${c(this,Ac)}_${Xi(this,of)._++}`,refCounter:1,isSvg:!1},c(this,Ui).set(t,s),c(this,Ui).set(s.id,s),s}getSvgUrl(t){const e=c(this,Ui).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var a;c(this,Ui)||S(this,Ui,new Map);const e=c(this,Ui).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const l=new OffscreenCanvas(s.width,s.height);l.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=l.convertToBlob()}(a=s.close)==null||a.call(s),e.bitmap=null}isValidId(t){return t.startsWith(`image_${c(this,Ac)}_`)}};Ac=new WeakMap,of=new WeakMap,Ui=new WeakMap,Sc=new WeakSet,hm=async function(t,e){c(this,Ui)||S(this,Ui,new Map);let s=c(this,Ui).get(t);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${c(this,Ac)}_${Xi(this,of)._++}`,refCounter:0,isSvg:!1});let a;if(typeof e=="string"?(s.url=e,a=await Lg(e,"blob")):e instanceof File?a=s.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const l=jA._isSVGFittingCanvas,o=new FileReader,d=new Image,f=new Promise((g,m)=>{d.onload=()=>{s.bitmap=d,s.isSvg=!0,g()},o.onload=async()=>{const v=s.svgUrl=o.result;d.src=await l?`${v}#svgView(preserveAspectRatio(none))`:v},d.onerror=o.onerror=m});o.readAsDataURL(a),await f}else s.bitmap=await createImageBitmap(a);s.refCounter=1}catch(a){It(a),s=null}return c(this,Ui).set(t,s),s&&c(this,Ui).set(s.id,s),s};let l0=jA;var Ge,Yr,uf,Pe;class F2{constructor(t=128){x(this,Ge,[]);x(this,Yr,!1);x(this,uf);x(this,Pe,-1);S(this,uf,t)}add({cmd:t,undo:e,post:s,mustExec:a,type:l=NaN,overwriteIfSameType:o=!1,keepUndo:d=!1}){if(a&&t(),c(this,Yr))return;const f={cmd:t,undo:e,post:s,type:l};if(c(this,Pe)===-1){c(this,Ge).length>0&&(c(this,Ge).length=0),S(this,Pe,0),c(this,Ge).push(f);return}if(o&&c(this,Ge)[c(this,Pe)].type===l){d&&(f.undo=c(this,Ge)[c(this,Pe)].undo),c(this,Ge)[c(this,Pe)]=f;return}const g=c(this,Pe)+1;g===c(this,uf)?c(this,Ge).splice(0,1):(S(this,Pe,g),g<c(this,Ge).length&&c(this,Ge).splice(g)),c(this,Ge).push(f)}undo(){if(c(this,Pe)===-1)return;S(this,Yr,!0);const{undo:t,post:e}=c(this,Ge)[c(this,Pe)];t(),e==null||e(),S(this,Yr,!1),S(this,Pe,c(this,Pe)-1)}redo(){if(c(this,Pe)<c(this,Ge).length-1){S(this,Pe,c(this,Pe)+1),S(this,Yr,!0);const{cmd:t,post:e}=c(this,Ge)[c(this,Pe)];t(),e==null||e(),S(this,Yr,!1)}}hasSomethingToUndo(){return c(this,Pe)!==-1}hasSomethingToRedo(){return c(this,Pe)<c(this,Ge).length-1}cleanType(t){if(c(this,Pe)!==-1){for(let e=c(this,Pe);e>=0;e--)if(c(this,Ge)[e].type!==t){c(this,Ge).splice(e+1,c(this,Pe)-e),S(this,Pe,e);return}c(this,Ge).length=0,S(this,Pe,-1)}}destroy(){S(this,Ge,null)}}Ge=new WeakMap,Yr=new WeakMap,uf=new WeakMap,Pe=new WeakMap;var Jm,Q_;class Ng{constructor(t){x(this,Jm);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=ki.platform;for(const[s,a,l={}]of t)for(const o of s){const d=o.startsWith("mac+");e&&d?(this.callbacks.set(o.slice(4),{callback:a,options:l}),this.allKeys.add(o.split("+").at(-1))):!e&&!d&&(this.callbacks.set(o,{callback:a,options:l}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(T(this,Jm,Q_).call(this,e));if(!s)return;const{callback:a,options:{bubbles:l=!1,args:o=[],checker:d=null}}=s;d&&!d(t,e)||(a.bind(t,...o,e)(),l||Ze(e))}}Jm=new WeakSet,Q_=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const ty=class ty{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return k2(t),Zt(this,"_colors",t)}convert(t){const e=kA(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,a]of this._colors)if(a.every((l,o)=>l===e[o]))return ty._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?wt.makeHexColor(...e):t}};At(ty,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let o0=ty;var wc,An,ri,Ti,Ec,Fa,_c,es,Xr,po,xc,mo,Ys,bs,yo,cf,hf,Tc,df,Xs,$r,Cc,Kr,$s,ey,Wr,ff,Qr,vo,bo,Zr,gf,di,de,Ha,Jr,Ao,pf,mf,tl,Ks,Ba,yf,is,ut,dm,u0,Z_,J_,fm,tx,ex,ix,c0,nx,h0,d0,sx,$i,Na,ax,rx,f0,lx,zd,g0;const pc=class pc{constructor(t,e,s,a,l,o,d,f,g,m,v,b,A,E){x(this,ut);x(this,wc,new AbortController);x(this,An,null);x(this,ri,new Map);x(this,Ti,new Map);x(this,Ec,null);x(this,Fa,null);x(this,_c,null);x(this,es,new F2);x(this,Xr,null);x(this,po,null);x(this,xc,0);x(this,mo,new Set);x(this,Ys,null);x(this,bs,null);x(this,yo,new Set);At(this,"_editorUndoBar",null);x(this,cf,!1);x(this,hf,!1);x(this,Tc,!1);x(this,df,null);x(this,Xs,null);x(this,$r,null);x(this,Cc,null);x(this,Kr,!1);x(this,$s,null);x(this,ey,new z2);x(this,Wr,!1);x(this,ff,!1);x(this,Qr,null);x(this,vo,null);x(this,bo,null);x(this,Zr,null);x(this,gf,null);x(this,di,Bt.NONE);x(this,de,new Set);x(this,Ha,null);x(this,Jr,null);x(this,Ao,null);x(this,pf,null);x(this,mf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,tl,[0,0]);x(this,Ks,null);x(this,Ba,null);x(this,yf,null);x(this,is,null);const _=this._signal=c(this,wc).signal;S(this,Ba,t),S(this,yf,e),S(this,Ec,s),S(this,Jr,a),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:_}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),l._on("setpreference",this.onSetPreference.bind(this),{signal:_}),l._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:_}),T(this,ut,tx).call(this),T(this,ut,sx).call(this),T(this,ut,c0).call(this),S(this,Fa,o.annotationStorage),S(this,df,o.filterFactory),S(this,Ao,d),S(this,Cc,f||null),S(this,cf,g),S(this,hf,m),S(this,Tc,v),S(this,gf,b||null),this.viewParameters={realScale:Rl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=A||null,this._supportsPinchToZoom=E!==!1}static get _keyboardManager(){const t=pc.prototype,e=o=>c(o,Ba).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:d})=>{if(d instanceof HTMLInputElement){const{type:f}=d;return f!=="text"&&f!=="number"}return!0},a=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return Zt(this,"_keyboardManager",new Ng([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:d})=>!(d instanceof HTMLButtonElement)&&c(o,Ba).contains(d)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:d})=>!(d instanceof HTMLButtonElement)&&c(o,Ba).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:e}]]))}destroy(){var t,e,s,a,l,o,d,f;(t=c(this,is))==null||t.resolve(),S(this,is,null),(e=c(this,wc))==null||e.abort(),S(this,wc,null),this._signal=null;for(const g of c(this,Ti).values())g.destroy();c(this,Ti).clear(),c(this,ri).clear(),c(this,yo).clear(),(s=c(this,Zr))==null||s.clear(),S(this,An,null),c(this,de).clear(),c(this,es).destroy(),(a=c(this,Ec))==null||a.destroy(),(l=c(this,Jr))==null||l.destroy(),(o=c(this,$s))==null||o.hide(),S(this,$s,null),(d=c(this,bo))==null||d.destroy(),S(this,bo,null),c(this,Xs)&&(clearTimeout(c(this,Xs)),S(this,Xs,null)),c(this,Ks)&&(clearTimeout(c(this,Ks)),S(this,Ks,null)),(f=this._editorUndoBar)==null||f.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return c(this,gf)}get useNewAltTextFlow(){return c(this,hf)}get useNewAltTextWhenAddingImage(){return c(this,Tc)}get hcmFilter(){return Zt(this,"hcmFilter",c(this,Ao)?c(this,df).addHCMFilter(c(this,Ao).foreground,c(this,Ao).background):"none")}get direction(){return Zt(this,"direction",getComputedStyle(c(this,Ba)).direction)}get highlightColors(){return Zt(this,"highlightColors",c(this,Cc)?new Map(c(this,Cc).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Zt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),S(this,po,t)}setMainHighlightColorPicker(t){S(this,bo,t)}editAltText(t,e=!1){var s;(s=c(this,Ec))==null||s.editAltText(this,t,e)}getSignature(t){var e;(e=c(this,Jr))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return c(this,Jr)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":S(this,Tc,e);break}}onPageChanging({pageNumber:t}){S(this,xc,t-1)}focusMainContainer(){c(this,Ba).focus()}findParent(t,e){for(const s of c(this,Ti).values()){const{x:a,y:l,width:o,height:d}=s.div.getBoundingClientRect();if(t>=a&&t<=a+o&&e>=l&&e<=l+d)return s}return null}disableUserSelect(t=!1){c(this,yf).classList.toggle("noUserSelect",t)}addShouldRescale(t){c(this,yo).add(t)}removeShouldRescale(t){c(this,yo).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Rl.PDF_TO_CSS_UNITS;for(const s of c(this,yo))s.onScaleChanging();(e=c(this,po))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:s,anchorOffset:a,focusNode:l,focusOffset:o}=e,d=e.toString(),g=T(this,ut,dm).call(this,e).closest(".textLayer"),m=this.getSelectionBoxes(g);if(!m)return;e.empty();const v=T(this,ut,u0).call(this,g),b=c(this,di)===Bt.NONE,A=()=>{v==null||v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:s,anchorOffset:a,focusNode:l,focusOffset:o,text:d}),b&&this.showAllEditors("highlight",!0,!0)};if(b){this.switchToMode(Bt.HIGHLIGHT,A);return}A()}addToAnnotationStorage(t){!t.isEmpty()&&c(this,Fa)&&!c(this,Fa).has(t.id)&&c(this,Fa).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,c(this,Kr)&&(S(this,Kr,!1),T(this,ut,fm).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of c(this,de))if(e.div.contains(t)){S(this,vo,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!c(this,vo))return;const[t,e]=c(this,vo);S(this,vo,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){T(this,ut,c0).call(this),T(this,ut,h0).call(this)}removeEditListeners(){T(this,ut,nx).call(this),T(this,ut,d0).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of c(this,bs))if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of c(this,bs))if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var s;if(t.preventDefault(),(s=c(this,An))==null||s.commitOrRemove(),!this.hasSelection)return;const e=[];for(const a of c(this,de)){const l=a.serialize(!0);l&&e.push(l)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const l of e.items)for(const o of c(this,bs))if(o.isHandlingMimeForPasting(l.type)){o.paste(l,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(l){It(`paste: "${l.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const a=this.currentLayer;try{const l=[];for(const f of s){const g=await a.deserialize(f);if(!g)return;l.push(g)}const o=()=>{for(const f of l)T(this,ut,f0).call(this,f);T(this,ut,g0).call(this,l)},d=()=>{for(const f of l)f.remove()};this.addCommands({cmd:o,undo:d,mustExec:!0})}catch(l){It(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,di)!==Bt.NONE&&!this.isEditorHandlingKeyboard&&pc._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,Kr)&&(S(this,Kr,!1),T(this,ut,fm).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(T(this,ut,ex).call(this),T(this,ut,h0).call(this),T(this,ut,$i).call(this,{isEditing:c(this,di)!==Bt.NONE,isEmpty:T(this,ut,zd).call(this),hasSomethingToUndo:c(this,es).hasSomethingToUndo(),hasSomethingToRedo:c(this,es).hasSomethingToRedo(),hasSelectedEditor:!1})):(T(this,ut,ix).call(this),T(this,ut,d0).call(this),T(this,ut,$i).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!c(this,bs)){S(this,bs,t);for(const e of c(this,bs))T(this,ut,Na).call(this,e.defaultPropertiesToUpdate)}}getId(){return c(this,ey).id}get currentLayer(){return c(this,Ti).get(c(this,xc))}getLayer(t){return c(this,Ti).get(t)}get currentPageIndex(){return c(this,xc)}addLayer(t){c(this,Ti).set(t.pageIndex,t),c(this,Wr)?t.enable():t.disable()}removeLayer(t){c(this,Ti).delete(t.pageIndex)}async updateMode(t,e=null,s=!1){var a,l;if(c(this,di)!==t&&!(c(this,is)&&(await c(this,is).promise,!c(this,is)))){if(S(this,is,Promise.withResolvers()),S(this,di,t),t===Bt.NONE){this.setEditingState(!1),T(this,ut,rx).call(this),(a=this._editorUndoBar)==null||a.hide(),c(this,is).resolve();return}t===Bt.SIGNATURE&&await((l=c(this,Jr))==null?void 0:l.loadSignatures()),this.setEditingState(!0),await T(this,ut,ax).call(this),this.unselectAll();for(const o of c(this,Ti).values())o.updateMode(t);if(!e){s&&this.addNewEditorFromKeyboard(),c(this,is).resolve();return}for(const o of c(this,ri).values())o.annotationElementId===e?(this.setSelected(o),o.enterInEditMode()):o.unselect();c(this,is).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==c(this,di)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var s;if(c(this,bs)){switch(t){case ee.CREATE:this.currentLayer.addNewEditor(e);return;case ee.HIGHLIGHT_DEFAULT_COLOR:(s=c(this,bo))==null||s.updateColor(e);break;case ee.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,pf)||S(this,pf,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const a of c(this,de))a.updateParams(t,e);for(const a of c(this,bs))a.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){var l;for(const o of c(this,ri).values())o.editorType===t&&o.show(e);(((l=c(this,pf))==null?void 0:l.get(ee.HIGHLIGHT_SHOW_ALL))??!0)!==e&&T(this,ut,Na).call(this,[[ee.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(c(this,ff)!==t){S(this,ff,t);for(const e of c(this,Ti).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const s of c(this,ri).values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return c(this,ri).get(t)}addEditor(t){c(this,ri).set(t.id,t)}removeEditor(t){var e,s;t.div.contains(document.activeElement)&&(c(this,Xs)&&clearTimeout(c(this,Xs)),S(this,Xs,setTimeout(()=>{this.focusMainContainer(),S(this,Xs,null)},0))),c(this,ri).delete(t.id),t.annotationElementId&&((e=c(this,Zr))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!c(this,mo).has(t.annotationElementId))&&((s=c(this,Fa))==null||s.remove(t.id))}addDeletedAnnotationElement(t){c(this,mo).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return c(this,mo).has(t)}removeDeletedAnnotationElement(t){c(this,mo).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){c(this,An)!==t&&(S(this,An,t),t&&T(this,ut,Na).call(this,t.propertiesToUpdate))}updateUI(t){c(this,ut,lx)===t&&T(this,ut,Na).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){T(this,ut,Na).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(c(this,de).has(t)){c(this,de).delete(t),t.unselect(),T(this,ut,$i).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,de).add(t),t.select(),T(this,ut,Na).call(this,t.propertiesToUpdate),T(this,ut,$i).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=c(this,po))==null||e.commitOrRemove();for(const s of c(this,de))s!==t&&s.unselect();c(this,de).clear(),c(this,de).add(t),t.select(),T(this,ut,Na).call(this,t.propertiesToUpdate),T(this,ut,$i).call(this,{hasSelectedEditor:!0})}isSelected(t){return c(this,de).has(t)}get firstSelectedEditor(){return c(this,de).values().next().value}unselect(t){t.unselect(),c(this,de).delete(t),T(this,ut,$i).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,de).size!==0}get isEnterHandled(){return c(this,de).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;c(this,es).undo(),T(this,ut,$i).call(this,{hasSomethingToUndo:c(this,es).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:T(this,ut,zd).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){c(this,es).redo(),T(this,ut,$i).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,es).hasSomethingToRedo(),isEmpty:T(this,ut,zd).call(this)})}addCommands(t){c(this,es).add(t),T(this,ut,$i).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:T(this,ut,zd).call(this)})}cleanUndoStack(t){c(this,es).cleanType(t)}delete(){var l;this.commitOrRemove();const t=(l=this.currentLayer)==null?void 0:l.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...c(this,de)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(a,e.length===1?e[0].editorType:e.length);for(const d of e)d.remove()},a=()=>{for(const o of e)T(this,ut,f0).call(this,o)};this.addCommands({cmd:s,undo:a,mustExec:!0})}commitOrRemove(){var t;(t=c(this,An))==null||t.commitOrRemove()}hasSomethingToControl(){return c(this,An)||this.hasSelection}selectAll(){for(const t of c(this,de))t.commit();T(this,ut,g0).call(this,c(this,ri).values())}unselectAll(){var t;if(!(c(this,An)&&(c(this,An).commitOrRemove(),c(this,di)!==Bt.NONE))&&!((t=c(this,po))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of c(this,de))e.unselect();c(this,de).clear(),T(this,ut,$i).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;c(this,tl)[0]+=t,c(this,tl)[1]+=e;const[a,l]=c(this,tl),o=[...c(this,de)],d=1e3;c(this,Ks)&&clearTimeout(c(this,Ks)),S(this,Ks,setTimeout(()=>{S(this,Ks,null),c(this,tl)[0]=c(this,tl)[1]=0,this.addCommands({cmd:()=>{for(const f of o)c(this,ri).has(f.id)&&(f.translateInPage(a,l),f.translationDone())},undo:()=>{for(const f of o)c(this,ri).has(f.id)&&(f.translateInPage(-a,-l),f.translationDone())},mustExec:!1})},d));for(const f of o)f.translateInPage(t,e),f.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,Ys,new Map);for(const t of c(this,de))c(this,Ys).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,Ys))return!1;this.disableUserSelect(!1);const t=c(this,Ys);S(this,Ys,null);let e=!1;for(const[{x:a,y:l,pageIndex:o},d]of t)d.newX=a,d.newY=l,d.newPageIndex=o,e||(e=a!==d.savedX||l!==d.savedY||o!==d.savedPageIndex);if(!e)return!1;const s=(a,l,o,d)=>{if(c(this,ri).has(a.id)){const f=c(this,Ti).get(d);f?a._setParentAndPosition(f,l,o):(a.pageIndex=d,a.x=l,a.y=o)}};return this.addCommands({cmd:()=>{for(const[a,{newX:l,newY:o,newPageIndex:d}]of t)s(a,l,o,d)},undo:()=>{for(const[a,{savedX:l,savedY:o,savedPageIndex:d}]of t)s(a,l,o,d)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(c(this,Ys))for(const s of c(this,Ys).keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||c(this,de).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return c(this,An)===t}getActive(){return c(this,An)}getMode(){return c(this,di)}get imageManager(){return Zt(this,"imageManager",new l0)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let g=0,m=e.rangeCount;g<m;g++)if(!t.contains(e.getRangeAt(g).commonAncestorContainer))return null;const{x:s,y:a,width:l,height:o}=t.getBoundingClientRect();let d;switch(t.getAttribute("data-main-rotation")){case"90":d=(g,m,v,b)=>({x:(m-a)/o,y:1-(g+v-s)/l,width:b/o,height:v/l});break;case"180":d=(g,m,v,b)=>({x:1-(g+v-s)/l,y:1-(m+b-a)/o,width:v/l,height:b/o});break;case"270":d=(g,m,v,b)=>({x:1-(m+b-a)/o,y:(g-s)/l,width:b/o,height:v/l});break;default:d=(g,m,v,b)=>({x:(g-s)/l,y:(m-a)/o,width:v/l,height:b/o});break}const f=[];for(let g=0,m=e.rangeCount;g<m;g++){const v=e.getRangeAt(g);if(!v.collapsed)for(const{x:b,y:A,width:E,height:_}of v.getClientRects())E===0||_===0||f.push(d(b,A,E,_))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:e}){(c(this,_c)||S(this,_c,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=c(this,_c))==null||e.delete(t)}renderAnnotationElement(t){var a;const e=(a=c(this,_c))==null?void 0:a.get(t.data.id);if(!e)return;const s=c(this,Fa).getRawValue(e);s&&(c(this,di)===Bt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){var l;const a=(l=c(this,Zr))==null?void 0:l.get(t);a&&(a.setCanvas(e,s),c(this,Zr).delete(t))}addMissingCanvas(t,e){(c(this,Zr)||S(this,Zr,new Map)).set(t,e)}};wc=new WeakMap,An=new WeakMap,ri=new WeakMap,Ti=new WeakMap,Ec=new WeakMap,Fa=new WeakMap,_c=new WeakMap,es=new WeakMap,Xr=new WeakMap,po=new WeakMap,xc=new WeakMap,mo=new WeakMap,Ys=new WeakMap,bs=new WeakMap,yo=new WeakMap,cf=new WeakMap,hf=new WeakMap,Tc=new WeakMap,df=new WeakMap,Xs=new WeakMap,$r=new WeakMap,Cc=new WeakMap,Kr=new WeakMap,$s=new WeakMap,ey=new WeakMap,Wr=new WeakMap,ff=new WeakMap,Qr=new WeakMap,vo=new WeakMap,bo=new WeakMap,Zr=new WeakMap,gf=new WeakMap,di=new WeakMap,de=new WeakMap,Ha=new WeakMap,Jr=new WeakMap,Ao=new WeakMap,pf=new WeakMap,mf=new WeakMap,tl=new WeakMap,Ks=new WeakMap,Ba=new WeakMap,yf=new WeakMap,is=new WeakMap,ut=new WeakSet,dm=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},u0=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of c(this,Ti).values())if(s.hasTextLayer(t))return s;return null},Z_=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=T(this,ut,dm).call(this,t).closest(".textLayer"),a=this.getSelectionBoxes(s);a&&(c(this,$s)||S(this,$s,new P2(this)),c(this,$s).show(s,a,this.direction==="ltr"))},J_=function(){var l,o,d;const t=document.getSelection();if(!t||t.isCollapsed){c(this,Ha)&&((l=c(this,$s))==null||l.hide(),S(this,Ha,null),T(this,ut,$i).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===c(this,Ha))return;const a=T(this,ut,dm).call(this,t).closest(".textLayer");if(!a){c(this,Ha)&&((o=c(this,$s))==null||o.hide(),S(this,Ha,null),T(this,ut,$i).call(this,{hasSelectedText:!1}));return}if((d=c(this,$s))==null||d.hide(),S(this,Ha,e),T(this,ut,$i).call(this,{hasSelectedText:!0}),!(c(this,di)!==Bt.HIGHLIGHT&&c(this,di)!==Bt.NONE)&&(c(this,di)===Bt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,Kr,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=c(this,di)===Bt.HIGHLIGHT?T(this,ut,u0).call(this,a):null;f==null||f.toggleDrawing();const g=new AbortController,m=this.combinedSignal(g),v=b=>{b.type==="pointerup"&&b.button!==0||(g.abort(),f==null||f.toggleDrawing(!0),b.type==="pointerup"&&T(this,ut,fm).call(this,"main_toolbar"))};window.addEventListener("pointerup",v,{signal:m}),window.addEventListener("blur",v,{signal:m})}},fm=function(t=""){c(this,di)===Bt.HIGHLIGHT?this.highlightSelection(t):c(this,cf)&&T(this,ut,Z_).call(this)},tx=function(){document.addEventListener("selectionchange",T(this,ut,J_).bind(this),{signal:this._signal})},ex=function(){if(c(this,$r))return;S(this,$r,new AbortController);const t=this.combinedSignal(c(this,$r));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},ix=function(){var t;(t=c(this,$r))==null||t.abort(),S(this,$r,null)},c0=function(){if(c(this,Qr))return;S(this,Qr,new AbortController);const t=this.combinedSignal(c(this,Qr));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},nx=function(){var t;(t=c(this,Qr))==null||t.abort(),S(this,Qr,null)},h0=function(){if(c(this,Xr))return;S(this,Xr,new AbortController);const t=this.combinedSignal(c(this,Xr));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},d0=function(){var t;(t=c(this,Xr))==null||t.abort(),S(this,Xr,null)},sx=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},$i=function(t){Object.entries(t).some(([s,a])=>c(this,mf)[s]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,mf),t)}),c(this,di)===Bt.HIGHLIGHT&&t.hasSelectedEditor===!1&&T(this,ut,Na).call(this,[[ee.HIGHLIGHT_FREE,!0]]))},Na=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},ax=async function(){if(!c(this,Wr)){S(this,Wr,!0);const t=[];for(const e of c(this,Ti).values())t.push(e.enable());await Promise.all(t);for(const e of c(this,ri).values())e.enable()}},rx=function(){if(this.unselectAll(),c(this,Wr)){S(this,Wr,!1);for(const t of c(this,Ti).values())t.disable();for(const t of c(this,ri).values())t.disable()}},f0=function(t){const e=c(this,Ti).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},lx=function(){let t=null;for(t of c(this,de));return t},zd=function(){if(c(this,ri).size===0)return!0;if(c(this,ri).size===1)for(const t of c(this,ri).values())return t.isEmpty();return!1},g0=function(t){for(const e of c(this,de))e.unselect();c(this,de).clear();for(const e of t)e.isEmpty()||(c(this,de).add(e),e.select());T(this,ut,$i).call(this,{hasSelectedEditor:this.hasSelection})},At(pc,"TRANSLATE_SMALL",1),At(pc,"TRANSLATE_BIG",10);let Au=pc;var fi,Ws,As,Rc,Qs,Sn,Mc,Zs,un,Ua,So,Js,el,Os,Fd,gm;const Ki=class Ki{constructor(t){x(this,Os);x(this,fi,null);x(this,Ws,!1);x(this,As,null);x(this,Rc,null);x(this,Qs,null);x(this,Sn,null);x(this,Mc,!1);x(this,Zs,null);x(this,un,null);x(this,Ua,null);x(this,So,null);x(this,Js,!1);S(this,un,t),S(this,Js,t._uiManager.useNewAltTextFlow),c(Ki,el)||S(Ki,el,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Ki._l10n??(Ki._l10n=t)}async render(){const t=S(this,As,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=S(this,Rc,document.createElement("span"));t.append(e),c(this,Js)?(t.classList.add("new"),t.setAttribute("data-l10n-id",c(Ki,el).missing),e.setAttribute("data-l10n-id",c(Ki,el)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=c(this,un)._uiManager._signal;t.addEventListener("contextmenu",Ns,{signal:s}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:s});const a=l=>{l.preventDefault(),c(this,un)._uiManager.editAltText(c(this,un)),c(this,Js)&&c(this,un)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Os,Fd)}})};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(S(this,Mc,!0),a(l))},{signal:s}),await T(this,Os,gm).call(this),t}finish(){c(this,As)&&(c(this,As).focus({focusVisible:c(this,Mc)}),S(this,Mc,!1))}isEmpty(){return c(this,Js)?c(this,fi)===null:!c(this,fi)&&!c(this,Ws)}hasData(){return c(this,Js)?c(this,fi)!==null||!!c(this,Ua):this.isEmpty()}get guessedText(){return c(this,Ua)}async setGuessedText(t){c(this,fi)===null&&(S(this,Ua,t),S(this,So,await Ki._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),T(this,Os,gm).call(this))}toggleAltTextBadge(t=!1){var e;if(!c(this,Js)||c(this,fi)){(e=c(this,Zs))==null||e.remove(),S(this,Zs,null);return}if(!c(this,Zs)){const s=S(this,Zs,document.createElement("div"));s.className="noAltTextBadge",c(this,un).div.append(s)}c(this,Zs).classList.toggle("hidden",!t)}serialize(t){let e=c(this,fi);return!t&&c(this,Ua)===e&&(e=c(this,So)),{altText:e,decorative:c(this,Ws),guessedText:c(this,Ua),textWithDisclaimer:c(this,So)}}get data(){return{altText:c(this,fi),decorative:c(this,Ws)}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:a,cancel:l=!1}){s&&(S(this,Ua,s),S(this,So,a)),!(c(this,fi)===t&&c(this,Ws)===e)&&(l||(S(this,fi,t),S(this,Ws,e)),T(this,Os,gm).call(this))}toggle(t=!1){c(this,As)&&(!t&&c(this,Sn)&&(clearTimeout(c(this,Sn)),S(this,Sn,null)),c(this,As).disabled=!t)}shown(){c(this,un)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Os,Fd)}})}destroy(){var t,e;(t=c(this,As))==null||t.remove(),S(this,As,null),S(this,Rc,null),S(this,Qs,null),(e=c(this,Zs))==null||e.remove(),S(this,Zs,null)}};fi=new WeakMap,Ws=new WeakMap,As=new WeakMap,Rc=new WeakMap,Qs=new WeakMap,Sn=new WeakMap,Mc=new WeakMap,Zs=new WeakMap,un=new WeakMap,Ua=new WeakMap,So=new WeakMap,Js=new WeakMap,el=new WeakMap,Os=new WeakSet,Fd=function(){return c(this,fi)&&"added"||c(this,fi)===null&&this.guessedText&&"review"||"missing"},gm=async function(){var a,l,o;const t=c(this,As);if(!t)return;if(c(this,Js)){if(t.classList.toggle("done",!!c(this,fi)),t.setAttribute("data-l10n-id",c(Ki,el)[c(this,Os,Fd)]),(a=c(this,Rc))==null||a.setAttribute("data-l10n-id",c(Ki,el)[`${c(this,Os,Fd)}-label`]),!c(this,fi)){(l=c(this,Qs))==null||l.remove();return}}else{if(!c(this,fi)&&!c(this,Ws)){t.classList.remove("done"),(o=c(this,Qs))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=c(this,Qs);if(!e){S(this,Qs,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${c(this,un).id}`;const d=100,f=c(this,un)._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(c(this,Sn)),S(this,Sn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{S(this,Sn,setTimeout(()=>{S(this,Sn,null),c(this,Qs).classList.add("show"),c(this,un)._reportTelemetry({action:"alt_text_tooltip"})},d))},{signal:f}),t.addEventListener("mouseleave",()=>{var g;c(this,Sn)&&(clearTimeout(c(this,Sn)),S(this,Sn,null)),(g=c(this,Qs))==null||g.classList.remove("show")},{signal:f})}c(this,Ws)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=c(this,fi)),e.parentNode||t.append(e);const s=c(this,un).getElementForAltText();s==null||s.setAttribute("aria-describedby",e.id)},x(Ki,el,null),At(Ki,"_l10n",null);let qm=Ki;var Dc,wo,vf,bf,Af,Sf,wf,Ia,Eo,ja,_o,il,Dl,ox,ux,cx;const GA=class GA{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:a=null,onPinching:l=null,onPinchEnd:o=null,signal:d}){x(this,Dl);x(this,Dc);x(this,wo,!1);x(this,vf,null);x(this,bf);x(this,Af);x(this,Sf);x(this,wf);x(this,Ia,null);x(this,Eo);x(this,ja,null);x(this,_o);x(this,il,null);S(this,Dc,t),S(this,vf,s),S(this,bf,e),S(this,Af,a),S(this,Sf,l),S(this,wf,o),S(this,_o,new AbortController),S(this,Eo,AbortSignal.any([d,c(this,_o).signal])),t.addEventListener("touchstart",T(this,Dl,ox).bind(this),{passive:!1,signal:c(this,Eo)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/gr.pixelRatio}destroy(){var t,e;(t=c(this,_o))==null||t.abort(),S(this,_o,null),(e=c(this,Ia))==null||e.abort(),S(this,Ia,null)}};Dc=new WeakMap,wo=new WeakMap,vf=new WeakMap,bf=new WeakMap,Af=new WeakMap,Sf=new WeakMap,wf=new WeakMap,Ia=new WeakMap,Eo=new WeakMap,ja=new WeakMap,_o=new WeakMap,il=new WeakMap,Dl=new WeakSet,ox=function(t){var a,l,o;if((a=c(this,bf))!=null&&a.call(this))return;if(t.touches.length===1){if(c(this,Ia))return;const d=S(this,Ia,new AbortController),f=AbortSignal.any([c(this,Eo),d.signal]),g=c(this,Dc),m={capture:!0,signal:f,passive:!1},v=b=>{var A;b.pointerType==="touch"&&((A=c(this,Ia))==null||A.abort(),S(this,Ia,null))};g.addEventListener("pointerdown",b=>{b.pointerType==="touch"&&(Ze(b),v(b))},m),g.addEventListener("pointerup",v,m),g.addEventListener("pointercancel",v,m);return}if(!c(this,il)){S(this,il,new AbortController);const d=AbortSignal.any([c(this,Eo),c(this,il).signal]),f=c(this,Dc),g={signal:d,capture:!1,passive:!1};f.addEventListener("touchmove",T(this,Dl,ux).bind(this),g);const m=T(this,Dl,cx).bind(this);f.addEventListener("touchend",m,g),f.addEventListener("touchcancel",m,g),g.capture=!0,f.addEventListener("pointerdown",Ze,g),f.addEventListener("pointermove",Ze,g),f.addEventListener("pointercancel",Ze,g),f.addEventListener("pointerup",Ze,g),(l=c(this,Af))==null||l.call(this)}if(Ze(t),t.touches.length!==2||(o=c(this,vf))!=null&&o.call(this)){S(this,ja,null);return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),S(this,ja,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY})},ux=function(t){var P;if(!c(this,ja)||t.touches.length!==2)return;Ze(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:a,screenY:l}=e,{screenX:o,screenY:d}=s,f=c(this,ja),{touch0X:g,touch0Y:m,touch1X:v,touch1Y:b}=f,A=v-g,E=b-m,_=o-a,C=d-l,R=Math.hypot(_,C)||1,L=Math.hypot(A,E)||1;if(!c(this,wo)&&Math.abs(L-R)<=GA.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(f.touch0X=a,f.touch0Y=l,f.touch1X=o,f.touch1Y=d,!c(this,wo)){S(this,wo,!0);return}const O=[(a+o)/2,(l+d)/2];(P=c(this,Sf))==null||P.call(this,O,L,R)},cx=function(t){var e;t.touches.length>=2||(c(this,il).abort(),S(this,il,null),(e=c(this,wf))==null||e.call(this),c(this,ja)&&(Ze(t),S(this,ja,null),S(this,wo,!1)))};let Vm=GA;var xo,Ss,_e,Lc,nl,Ef,To,Ci,Co,Ga,sl,_f,Ro,wn,xf,Mo,qa,ta,Oc,Nc,ns,Do,Tf,iy,Nt,p0,Cf,m0,pm,hx,dx,y0,mm,v0,fx,gx,px,b0,mx,A0,yx,vx,bx,S0,Hd;const Vt=class Vt{constructor(t){x(this,Nt);x(this,xo,null);x(this,Ss,null);x(this,_e,null);x(this,Lc,!1);x(this,nl,null);x(this,Ef,"");x(this,To,!1);x(this,Ci,null);x(this,Co,null);x(this,Ga,null);x(this,sl,null);x(this,_f,"");x(this,Ro,!1);x(this,wn,null);x(this,xf,!1);x(this,Mo,!1);x(this,qa,!1);x(this,ta,null);x(this,Oc,0);x(this,Nc,0);x(this,ns,null);x(this,Do,null);At(this,"_isCopy",!1);At(this,"_editToolbar",null);At(this,"_initialOptions",Object.create(null));At(this,"_initialData",null);At(this,"_isVisible",!0);At(this,"_uiManager",null);At(this,"_focusEventsAllowed",!0);x(this,Tf,!1);x(this,iy,Vt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:a,pageX:l,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,a],this.pageTranslation=[l,o];const[d,f]=this.parentDimensions;this.x=t.x/d,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Vt.prototype._resizeWithKeyboard,e=Au.TRANSLATE_SMALL,s=Au.TRANSLATE_BIG;return Zt(this,"_resizerKeyboardManager",new Ng([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],Vt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Zt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new H2({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Vt._l10n??(Vt._l10n=t),Vt._l10nResizer||(Vt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Vt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Vt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ye("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Tf)}set _isDraggable(t){var e;S(this,Tf,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,iy)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):T(this,Nt,Hd).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(c(this,Ro)?S(this,Ro,!1):this.parent.setSelected(this))}focusout(t){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,a){const[l,o]=this.parentDimensions;[s,a]=this.screenToPageTranslation(s,a),this.x=(t+s)/l,this.y=(e+a)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,a]=this.parentDimensions;this.setAt(t*s,e*a,this.width*s,this.height*a),this._onTranslated()}translate(t,e){T(this,Nt,p0).call(this,this.parentDimensions,t,e)}translateInPage(t,e){c(this,wn)||S(this,wn,[this.x,this.y,this.width,this.height]),T(this,Nt,p0).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){c(this,wn)||S(this,wn,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[a,l]}=this;if(this.x+=t/a,this.y+=e/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:v,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,v,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:d}=this;const[f,g]=this.getBaseTranslation();o+=f,d+=g;const{style:m}=s;m.left=`${(100*o).toFixed(2)}%`,m.top=`${(100*d).toFixed(2)}%`,this._onTranslating(o,d),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!c(this,wn)&&(c(this,wn)[0]!==this.x||c(this,wn)[1]!==this.y)}get _hasBeenResized(){return!!c(this,wn)&&(c(this,wn)[2]!==this.width||c(this,wn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=Vt,a=s/t,l=s/e;switch(this.rotation){case 90:return[-a,l];case 180:return[a,l];case 270:return[a,-l];default:return[-a,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,a]}=this;let{x:l,y:o,width:d,height:f}=this;if(d*=s,f*=a,l*=s,o*=a,this._mustFixPosition)switch(t){case 0:l=Ji(l,0,s-d),o=Ji(o,0,a-f);break;case 90:l=Ji(l,0,s-f),o=Ji(o,d,a);break;case 180:l=Ji(l,d,s),o=Ji(o,f,a);break;case 270:l=Ji(l,f,s),o=Ji(o,0,a-d);break}this.x=l/=s,this.y=o/=a;const[g,m]=this.getBaseTranslation();l+=g,o+=m,e.left=`${(100*l).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var s;return T(s=Vt,Cf,m0).call(s,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var s;return T(s=Vt,Cf,m0).call(s,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(t,e){const[s,a]=this.parentDimensions,{style:l}=this.div;l.width=`${(100*t/s).toFixed(2)}%`,c(this,To)||(l.height=`${(100*e/a).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,a=s.endsWith("%"),l=!c(this,To)&&e.endsWith("%");if(a&&l)return;const[o,d]=this.parentDimensions;a||(t.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!c(this,To)&&!l&&(t.height=`${(100*parseFloat(e)/d).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=c(this,_e))==null||t.finish()}async addEditToolbar(){return this._editToolbar||c(this,Mo)?this._editToolbar:(this._editToolbar=new r0(this),this.div.append(this._editToolbar.render()),c(this,_e)&&await this._editToolbar.addAltText(c(this,_e)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=c(this,_e))==null||t.destroy())}addContainer(t){var s;const e=(s=this._editToolbar)==null?void 0:s.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,_e)||(qm.initialize(Vt._l10n),S(this,_e,new qm(this)),c(this,xo)&&(c(this,_e).data=c(this,xo),S(this,xo,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=c(this,_e))==null?void 0:t.data}set altTextData(t){c(this,_e)&&(c(this,_e).data=t)}get guessedAltText(){var t;return(t=c(this,_e))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=c(this,_e))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=c(this,_e))==null?void 0:e.serialize(t)}hasAltText(){return!!c(this,_e)&&!c(this,_e).isEmpty()}hasAltTextData(){var t;return((t=c(this,_e))==null?void 0:t.hasData())??!1}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=c(this,Lc)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),T(this,Nt,A0).call(this);const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[a,l]=this.getInitialTranslation();return this.translate(a,l),PA(this,t,["keydown","pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,Do)||S(this,Do,new Vm({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:T(this,Nt,fx).bind(this),onPinching:T(this,Nt,gx).bind(this),onPinchEnd:T(this,Nt,px).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=ki.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(S(this,Ro,!0),this._isDraggable){T(this,Nt,mx).call(this,t);return}T(this,Nt,b0).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,ta)&&clearTimeout(c(this,ta)),S(this,ta,setTimeout(()=>{var t;S(this,ta,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const a=this.parentScale,[l,o]=this.pageDimensions,[d,f]=this.pageTranslation,g=t/a,m=e/a,v=this.x*l,b=this.y*o,A=this.width*l,E=this.height*o;switch(s){case 0:return[v+g+d,o-b-m-E+f,v+g+A+d,o-b-m+f];case 90:return[v+m+d,o-b+g+f,v+m+E+d,o-b+g+A+f];case 180:return[v-g-A+d,o-b+m+f,v-g+d,o-b+m+E+f];case 270:return[v-m-E+d,o-b-g-A+f,v-m+d,o-b-g+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,a,l,o]=t,d=l-s,f=o-a;switch(this.rotation){case 0:return[s,e-o,d,f];case 90:return[s,e-a,f,d];case 180:return[l,e-a,d,f];case 270:return[l,e-o,f,d];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){S(this,Mo,!0)}disableEditMode(){S(this,Mo,!1)}isInEditMode(){return c(this,Mo)}shouldGetKeyboardEvents(){return c(this,qa)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:a}=this.getClientDimensions(),{innerHeight:l,innerWidth:o}=window;return e<o&&a>0&&t<l&&s>0}rebuild(){T(this,Nt,A0).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){ye("An editor must be serializable")}static async deserialize(t,e,s){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s});a.rotation=t.rotation,S(a,xo,t.accessibilityData),a._isCopy=t.isCopy||!1;const[l,o]=a.pageDimensions,[d,f,g,m]=a.getRectInCurrentCoords(t.rect,o);return a.x=d/l,a.y=f/o,a.width=g/l,a.height=m/o,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=c(this,sl))==null||t.abort(),S(this,sl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,ta)&&(clearTimeout(c(this,ta)),S(this,ta,null)),T(this,Nt,Hd).call(this),this.removeEditToolbar(),c(this,ns)){for(const s of c(this,ns).values())clearTimeout(s);S(this,ns,null)}this.parent=null,(e=c(this,Do))==null||e.destroy(),S(this,Do,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(T(this,Nt,hx).call(this),c(this,Ci).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),S(this,Ga,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=c(this,Ci).children;if(!c(this,Ss)){S(this,Ss,Array.from(e));const o=T(this,Nt,yx).bind(this),d=T(this,Nt,vx).bind(this),f=this._uiManager._signal;for(const g of c(this,Ss)){const m=g.getAttribute("data-resizer-name");g.setAttribute("role","spinbutton"),g.addEventListener("keydown",o,{signal:f}),g.addEventListener("blur",d,{signal:f}),g.addEventListener("focus",T(this,Nt,bx).bind(this,m),{signal:f}),g.setAttribute("data-l10n-id",Vt._l10nResizer[m])}}const s=c(this,Ss)[0];let a=0;for(const o of e){if(o===s)break;a++}const l=(360-this.rotation+this.parentRotation)%360/90*(c(this,Ss).length/4);if(l!==a){if(l<a)for(let d=0;d<a-l;d++)c(this,Ci).append(c(this,Ci).firstChild);else if(l>a)for(let d=0;d<l-a;d++)c(this,Ci).firstChild.before(c(this,Ci).lastChild);let o=0;for(const d of e){const g=c(this,Ss)[o++].getAttribute("data-resizer-name");d.setAttribute("data-l10n-id",Vt._l10nResizer[g])}}T(this,Nt,S0).call(this,0),S(this,qa,!0),c(this,Ci).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){c(this,qa)&&T(this,Nt,v0).call(this,c(this,_f),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){T(this,Nt,Hd).call(this),this.div.focus()}select(){var t,e,s;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var a,l;(a=this.div)!=null&&a.classList.contains("selectedEditor")&&((l=this._editToolbar)==null||l.show())});return}(e=this._editToolbar)==null||e.show(),(s=c(this,_e))==null||s.toggleAltTextBadge(!1)}unselect(){var t,e,s,a,l;(t=c(this,Ci))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(a=this._editToolbar)==null||a.hide(),(l=c(this,_e))==null||l.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,xf)}set isEditing(t){S(this,xf,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){S(this,To,!0);const s=t/e,{style:a}=this.div;a.aspectRatio=s,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){c(this,ns)||S(this,ns,new Map);const{action:s}=t;let a=c(this,ns).get(s);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),c(this,ns).delete(s),c(this,ns).size===0&&S(this,ns,null)},Vt._telemetryTimeout),c(this,ns).set(s,a);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),S(this,Lc,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,Lc,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};xo=new WeakMap,Ss=new WeakMap,_e=new WeakMap,Lc=new WeakMap,nl=new WeakMap,Ef=new WeakMap,To=new WeakMap,Ci=new WeakMap,Co=new WeakMap,Ga=new WeakMap,sl=new WeakMap,_f=new WeakMap,Ro=new WeakMap,wn=new WeakMap,xf=new WeakMap,Mo=new WeakMap,qa=new WeakMap,ta=new WeakMap,Oc=new WeakMap,Nc=new WeakMap,ns=new WeakMap,Do=new WeakMap,Tf=new WeakMap,iy=new WeakMap,Nt=new WeakSet,p0=function([t,e],s,a){[s,a]=this.screenToPageTranslation(s,a),this.x+=s/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Cf=new WeakSet,m0=function(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},pm=function(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}},hx=function(){if(c(this,Ci))return;S(this,Ci,document.createElement("div")),c(this,Ci).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const a=document.createElement("div");c(this,Ci).append(a),a.classList.add("resizer",s),a.setAttribute("data-resizer-name",s),a.addEventListener("pointerdown",T(this,Nt,dx).bind(this,s),{signal:e}),a.addEventListener("contextmenu",Ns,{signal:e}),a.tabIndex=-1}this.div.prepend(c(this,Ci))},dx=function(t,e){var m;e.preventDefault();const{isMac:s}=ki.platform;if(e.button!==0||e.ctrlKey&&s)return;(m=c(this,_e))==null||m.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,S(this,Co,[e.screenX,e.screenY]);const l=new AbortController,o=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",T(this,Nt,v0).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Ze,{passive:!1,signal:o}),window.addEventListener("contextmenu",Ns,{signal:o}),S(this,Ga,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const d=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const g=()=>{var v;l.abort(),this.parent.togglePointerEvents(!0),(v=c(this,_e))==null||v.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=d,this.div.style.cursor=f,T(this,Nt,mm).call(this)};window.addEventListener("pointerup",g,{signal:o}),window.addEventListener("blur",g,{signal:o})},y0=function(t,e,s,a){this.width=s,this.height=a,this.x=t,this.y=e;const[l,o]=this.parentDimensions;this.setDims(l*s,o*a),this.fixAndSetPosition(),this._onResized()},mm=function(){if(!c(this,Ga))return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:a}=c(this,Ga);S(this,Ga,null);const l=this.x,o=this.y,d=this.width,f=this.height;l===t&&o===e&&d===s&&f===a||this.addCommands({cmd:T(this,Nt,y0).bind(this,l,o,d,f),undo:T(this,Nt,y0).bind(this,t,e,s,a),mustExec:!0})},v0=function(t,e){const[s,a]=this.parentDimensions,l=this.x,o=this.y,d=this.width,f=this.height,g=Vt.MIN_SIZE/s,m=Vt.MIN_SIZE/a,v=T(this,Nt,pm).call(this,this.rotation),b=(Y,nt)=>[v[0]*Y+v[2]*nt,v[1]*Y+v[3]*nt],A=T(this,Nt,pm).call(this,360-this.rotation),E=(Y,nt)=>[A[0]*Y+A[2]*nt,A[1]*Y+A[3]*nt];let _,C,R=!1,L=!1;switch(t){case"topLeft":R=!0,_=(Y,nt)=>[0,0],C=(Y,nt)=>[Y,nt];break;case"topMiddle":_=(Y,nt)=>[Y/2,0],C=(Y,nt)=>[Y/2,nt];break;case"topRight":R=!0,_=(Y,nt)=>[Y,0],C=(Y,nt)=>[0,nt];break;case"middleRight":L=!0,_=(Y,nt)=>[Y,nt/2],C=(Y,nt)=>[0,nt/2];break;case"bottomRight":R=!0,_=(Y,nt)=>[Y,nt],C=(Y,nt)=>[0,0];break;case"bottomMiddle":_=(Y,nt)=>[Y/2,nt],C=(Y,nt)=>[Y/2,0];break;case"bottomLeft":R=!0,_=(Y,nt)=>[0,nt],C=(Y,nt)=>[Y,0];break;case"middleLeft":L=!0,_=(Y,nt)=>[0,nt/2],C=(Y,nt)=>[Y,nt/2];break}const O=_(d,f),P=C(d,f);let M=b(...P);const k=Vt._round(l+M[0]),U=Vt._round(o+M[1]);let $=1,G=1,Z,it;if(e.fromKeyboard)({deltaX:Z,deltaY:it}=e);else{const{screenX:Y,screenY:nt}=e,[dt,Pt]=c(this,Co);[Z,it]=this.screenToPageTranslation(Y-dt,nt-Pt),c(this,Co)[0]=Y,c(this,Co)[1]=nt}if([Z,it]=E(Z/s,it/a),R){const Y=Math.hypot(d,f);$=G=Math.max(Math.min(Math.hypot(P[0]-O[0]-Z,P[1]-O[1]-it)/Y,1/d,1/f),g/d,m/f)}else L?$=Ji(Math.abs(P[0]-O[0]-Z),g,1)/d:G=Ji(Math.abs(P[1]-O[1]-it),m,1)/f;const Mt=Vt._round(d*$),Rt=Vt._round(f*G);M=b(...C(Mt,Rt));const ht=k-M[0],St=U-M[1];c(this,wn)||S(this,wn,[this.x,this.y,this.width,this.height]),this.width=Mt,this.height=Rt,this.x=ht,this.y=St,this.setDims(s*Mt,a*Rt),this.fixAndSetPosition(),this._onResizing()},fx=function(){var t;S(this,Ga,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=c(this,_e))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},gx=function(t,e,s){let l=.7*(s/e)+1-.7;if(l===1)return;const o=T(this,Nt,pm).call(this,this.rotation),d=(k,U)=>[o[0]*k+o[2]*U,o[1]*k+o[3]*U],[f,g]=this.parentDimensions,m=this.x,v=this.y,b=this.width,A=this.height,E=Vt.MIN_SIZE/f,_=Vt.MIN_SIZE/g;l=Math.max(Math.min(l,1/b,1/A),E/b,_/A);const C=Vt._round(b*l),R=Vt._round(A*l);if(C===b&&R===A)return;c(this,wn)||S(this,wn,[m,v,b,A]);const L=d(b/2,A/2),O=Vt._round(m+L[0]),P=Vt._round(v+L[1]),M=d(C/2,R/2);this.x=O-M[0],this.y=P-M[1],this.width=C,this.height=R,this.setDims(f*C,g*R),this.fixAndSetPosition(),this._onResizing()},px=function(){var t;(t=c(this,_e))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),T(this,Nt,mm).call(this)},b0=function(t){const{isMac:e}=ki.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},mx=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const a=new AbortController,l=this._uiManager.combinedSignal(a),o={capture:!0,passive:!1,signal:l},d=g=>{a.abort(),S(this,nl,null),S(this,Ro,!1),this._uiManager.endDragSession()||T(this,Nt,b0).call(this,g),s&&this._onStopDragging()};e&&(S(this,Oc,t.clientX),S(this,Nc,t.clientY),S(this,nl,t.pointerId),S(this,Ef,t.pointerType),window.addEventListener("pointermove",g=>{s||(s=!0,this._onStartDragging());const{clientX:m,clientY:v,pointerId:b}=g;if(b!==c(this,nl)){Ze(g);return}const[A,E]=this.screenToPageTranslation(m-c(this,Oc),v-c(this,Nc));S(this,Oc,m),S(this,Nc,v),this._uiManager.dragSelectedEditors(A,E)},o),window.addEventListener("touchmove",Ze,o),window.addEventListener("pointerdown",g=>{g.pointerType===c(this,Ef)&&(c(this,Do)||g.isPrimary)&&d(g),Ze(g)},o));const f=g=>{if(!c(this,nl)||c(this,nl)===g.pointerId){d(g);return}Ze(g)};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})},A0=function(){if(c(this,sl)||!this.div)return;S(this,sl,new AbortController);const t=this._uiManager.combinedSignal(c(this,sl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},yx=function(t){Vt._resizerKeyboardManager.exec(this,t)},vx=function(t){var e;c(this,qa)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==c(this,Ci)&&T(this,Nt,Hd).call(this)},bx=function(t){S(this,_f,c(this,qa)?t:"")},S0=function(t){if(c(this,Ss))for(const e of c(this,Ss))e.tabIndex=t},Hd=function(){S(this,qa,!1),T(this,Nt,S0).call(this,-1),T(this,Nt,mm).call(this)},x(Vt,Cf),At(Vt,"_l10n",null),At(Vt,"_l10nResizer",null),At(Vt,"_borderLineWidth",-1),At(Vt,"_colorManager",new o0),At(Vt,"_zIndex",1),At(Vt,"_telemetryTimeout",1e3);let De=Vt;class H2 extends De{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Z1=3285377520,Jn=4294901760,qs=65535;class Ax{constructor(t){this.h1=t?t&4294967295:Z1,this.h2=t?t&4294967295:Z1}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let _=0,C=t.length;_<C;_++){const R=t.charCodeAt(_);R<=255?e[s++]=R:(e[s++]=R>>>8,e[s++]=R&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=s>>2,l=s-a*4,o=new Uint32Array(e.buffer,0,a);let d=0,f=0,g=this.h1,m=this.h2;const v=3432918353,b=461845907,A=v&qs,E=b&qs;for(let _=0;_<a;_++)_&1?(d=o[_],d=d*v&Jn|d*A&qs,d=d<<15|d>>>17,d=d*b&Jn|d*E&qs,g^=d,g=g<<13|g>>>19,g=g*5+3864292196):(f=o[_],f=f*v&Jn|f*A&qs,f=f<<15|f>>>17,f=f*b&Jn|f*E&qs,m^=f,m=m<<13|m>>>19,m=m*5+3864292196);switch(d=0,l){case 3:d^=e[a*4+2]<<16;case 2:d^=e[a*4+1]<<8;case 1:d^=e[a*4],d=d*v&Jn|d*A&qs,d=d<<15|d>>>17,d=d*b&Jn|d*E&qs,a&1?g^=d:m^=d}this.h1=g,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Jn|t*36045&qs,e=e*4283543511&Jn|((e<<16|t>>>16)*2950163797&Jn)>>>16,t^=e>>>1,t=t*444984403&Jn|t*60499&qs,e=e*3301882366&Jn|((e<<16|t>>>16)*3120437893&Jn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const w0=Object.freeze({map:null,hash:"",transfer:void 0});var Lo,Oo,gi,ny,Sx;class zA{constructor(){x(this,ny);x(this,Lo,!1);x(this,Oo,null);x(this,gi,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=c(this,gi).get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return c(this,gi).get(t)}remove(t){if(c(this,gi).delete(t),c(this,gi).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of c(this,gi).values())if(e instanceof De)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=c(this,gi).get(t);let a=!1;if(s!==void 0)for(const[l,o]of Object.entries(e))s[l]!==o&&(a=!0,s[l]=o);else a=!0,c(this,gi).set(t,e);a&&T(this,ny,Sx).call(this),e instanceof De&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return c(this,gi).has(t)}getAll(){return c(this,gi).size>0?MA(c(this,gi)):null}setAll(t){for(const[e,s]of Object.entries(t))this.setValue(e,s)}get size(){return c(this,gi).size}resetModified(){c(this,Lo)&&(S(this,Lo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new wx(this)}get serializable(){if(c(this,gi).size===0)return w0;const t=new Map,e=new Ax,s=[],a=Object.create(null);let l=!1;for(const[o,d]of c(this,gi)){const f=d instanceof De?d.serialize(!1,a):d;f&&(t.set(o,f),e.update(`${o}:${JSON.stringify(f)}`),l||(l=!!f.bitmap))}if(l)for(const o of t.values())o.bitmap&&s.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:w0}get editorStats(){let t=null;const e=new Map;for(const s of c(this,gi).values()){if(!(s instanceof De))continue;const a=s.telemetryFinalData;if(!a)continue;const{type:l}=a;e.has(l)||e.set(l,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const o=t[l]||(t[l]=new Map);for(const[d,f]of Object.entries(a)){if(d==="type")continue;let g=o.get(d);g||(g=new Map,o.set(d,g));const m=g.get(f)??0;g.set(f,m+1)}}for(const[s,a]of e)t[s]=a.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){S(this,Oo,null)}get modifiedIds(){if(c(this,Oo))return c(this,Oo);const t=[];for(const e of c(this,gi).values())!(e instanceof De)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return S(this,Oo,{ids:new Set(t),hash:t.join(",")})}}Lo=new WeakMap,Oo=new WeakMap,gi=new WeakMap,ny=new WeakSet,Sx=function(){c(this,Lo)||(S(this,Lo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Rf;class wx extends zA{constructor(e){super();x(this,Rf);const{map:s,hash:a,transfer:l}=e.serializable,o=structuredClone(s,l?{transfer:l}:null);S(this,Rf,{map:o,hash:a,transfer:l})}get print(){ye("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Rf)}get modifiedIds(){return Zt(this,"modifiedIds",{ids:new Set,hash:""})}}Rf=new WeakMap;var kc;class B2{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){x(this,kc,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),c(this,kc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||c(this,kc).has(t.loadedName))){if(Je(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:l,style:o}=t,d=new FontFace(a,l,o);this.addNativeFontFace(d);try{await d.load(),c(this,kc).add(a),s==null||s(t)}catch{It(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(d)}return}ye("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(a){throw It(`Failed to load font '${s.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const a=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Zt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Zt(this,"isSyncFontLoadingSupported",Di||ki.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Je(!a.done,"completeRequest() cannot be called twice."),a.done=!0;s.length>0&&s[0].done;){const l=s.shift();setTimeout(l.callback,0)}}const{loadingRequests:s}=this,a={done:!1,complete:e,callback:t};return s.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Zt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(P,M){return P.charCodeAt(M)<<24|P.charCodeAt(M+1)<<16|P.charCodeAt(M+2)<<8|P.charCodeAt(M+3)&255}function a(P,M,k,U){const $=P.substring(0,M),G=P.substring(M+k);return $+U+G}let l,o;const d=this._document.createElement("canvas");d.width=1,d.height=1;const f=d.getContext("2d");let g=0;function m(P,M){if(++g>30){It("Load test font never loaded."),M();return}if(f.font="30px "+P,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){M();return}setTimeout(m.bind(null,P,M))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=a(b,976,v.length,v);const E=16,_=1482184792;let C=s(b,E);for(l=0,o=v.length-3;l<o;l+=4)C=C-_+s(v,l)|0;l<v.length&&(C=C-_+s(v+"XXX",l)|0),b=a(b,E,4,_2(C));const R=`url(data:font/opentype;base64,${btoa(b)});`,L=`@font-face {font-family:"${v}";src:${R}}`;this.insertRule(L);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const P of[t.loadedName,v]){const M=this._document.createElement("span");M.textContent="Hi",M.style.fontFamily=P,O.append(M)}this._document.body.append(O),m(v,()=>{O.remove(),e.complete()})}}kc=new WeakMap;class U2{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${G_(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let a;try{a=t.get(s)}catch(o){It(`getPathGenerator - ignoring character: "${o}".`)}const l=new Path2D(a||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=l}}const Jp={DATA:1,ERROR:2},We={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function J1(){}function ln(h){if(h instanceof Cl||h instanceof n0||h instanceof K1||h instanceof Gm||h instanceof qb)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||ye('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new Cl(h.message);case"InvalidPDFException":return new n0(h.message);case"PasswordException":return new K1(h.message,h.code);case"ResponseException":return new Gm(h.message,h.status,h.missing);case"UnknownErrorException":return new qb(h.message,h.details)}return new qb(h.message,h.toString())}var Pc,cs,Ex,_x,xx,ym;class Bd{constructor(t,e,s){x(this,cs);x(this,Pc,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",T(this,cs,Ex).bind(this),{signal:c(this,Pc).signal})}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const a=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[a]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},s)}catch(o){l.reject(o)}return l.promise}sendWithStream(t,e,s,a){const l=this.streamId++,o=this.sourceName,d=this.targetName,f=this.comObj;return new ReadableStream({start:g=>{const m=Promise.withResolvers();return this.streamControllers[l]={controller:g,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:o,targetName:d,action:t,streamId:l,data:e,desiredSize:g.desiredSize},a),m.promise},pull:g=>{const m=Promise.withResolvers();return this.streamControllers[l].pullCall=m,f.postMessage({sourceName:o,targetName:d,stream:We.PULL,streamId:l,desiredSize:g.desiredSize}),m.promise},cancel:g=>{Je(g instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[l].cancelCall=m,this.streamControllers[l].isClosed=!0,f.postMessage({sourceName:o,targetName:d,stream:We.CANCEL,streamId:l,reason:ln(g)}),m.promise}},s)}destroy(){var t;(t=c(this,Pc))==null||t.abort(),S(this,Pc,null)}}Pc=new WeakMap,cs=new WeakSet,Ex=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){T(this,cs,xx).call(this,t);return}if(t.callback){const s=t.callbackId,a=this.callbackCapabilities[s];if(!a)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===Jp.DATA)a.resolve(t.data);else if(t.callback===Jp.ERROR)a.reject(ln(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,a=t.sourceName,l=this.comObj;Promise.try(e,t.data).then(function(o){l.postMessage({sourceName:s,targetName:a,callback:Jp.DATA,callbackId:t.callbackId,data:o})},function(o){l.postMessage({sourceName:s,targetName:a,callback:Jp.ERROR,callbackId:t.callbackId,reason:ln(o)})});return}if(t.streamId){T(this,cs,_x).call(this,t);return}e(t.data)},_x=function(t){const e=t.streamId,s=this.sourceName,a=t.sourceName,l=this.comObj,o=this,d=this.actionHandler[t.action],f={enqueue(g,m=1,v){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=m,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:s,targetName:a,stream:We.ENQUEUE,streamId:e,chunk:g},v)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:a,stream:We.CLOSE,streamId:e}),delete o.streamSinks[e])},error(g){Je(g instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:a,stream:We.ERROR,streamId:e,reason:ln(g)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[e]=f,Promise.try(d,t.data,f).then(function(){l.postMessage({sourceName:s,targetName:a,stream:We.START_COMPLETE,streamId:e,success:!0})},function(g){l.postMessage({sourceName:s,targetName:a,stream:We.START_COMPLETE,streamId:e,reason:ln(g)})})},xx=function(t){const e=t.streamId,s=this.sourceName,a=t.sourceName,l=this.comObj,o=this.streamControllers[e],d=this.streamSinks[e];switch(t.stream){case We.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(ln(t.reason));break;case We.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(ln(t.reason));break;case We.PULL:if(!d){l.postMessage({sourceName:s,targetName:a,stream:We.PULL_COMPLETE,streamId:e,success:!0});break}d.desiredSize<=0&&t.desiredSize>0&&d.sinkCapability.resolve(),d.desiredSize=t.desiredSize,Promise.try(d.onPull||J1).then(function(){l.postMessage({sourceName:s,targetName:a,stream:We.PULL_COMPLETE,streamId:e,success:!0})},function(g){l.postMessage({sourceName:s,targetName:a,stream:We.PULL_COMPLETE,streamId:e,reason:ln(g)})});break;case We.ENQUEUE:if(Je(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case We.CLOSE:if(Je(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),T(this,cs,ym).call(this,o,e);break;case We.ERROR:Je(o,"error should have stream controller"),o.controller.error(ln(t.reason)),T(this,cs,ym).call(this,o,e);break;case We.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(ln(t.reason)),T(this,cs,ym).call(this,o,e);break;case We.CANCEL:if(!d)break;const f=ln(t.reason);Promise.try(d.onCancel||J1,f).then(function(){l.postMessage({sourceName:s,targetName:a,stream:We.CANCEL_COMPLETE,streamId:e,success:!0})},function(g){l.postMessage({sourceName:s,targetName:a,stream:We.CANCEL_COMPLETE,streamId:e,reason:ln(g)})}),d.sinkCapability.reject(f),d.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},ym=async function(t,e){var s,a,l;await Promise.allSettled([(s=t.startCall)==null?void 0:s.promise,(a=t.pullCall)==null?void 0:a.promise,(l=t.cancelCall)==null?void 0:l.promise]),delete this.streamControllers[e]};var Mf;class Tx{constructor({enableHWA:t=!1}){x(this,Mf,!1);S(this,Mf,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!c(this,Mf)})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ye("Abstract method `_createCanvas` called.")}}Mf=new WeakMap;class I2 extends Tx{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class Cx{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){ye("Abstract method `_fetch` called.")}}class t_ extends Cx{async _fetch(t){const e=await Lg(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Dg(e)}}class Rx{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,a,l){return"none"}destroy(t=!1){}}var No,zc,Va,Ya,Ii,ko,Po,gt,Bi,Ud,uc,vm,cc,Mx,E0,hc,Id,jd,_0,Gd;class j2 extends Rx{constructor({docId:e,ownerDocument:s=globalThis.document}){super();x(this,gt);x(this,No);x(this,zc);x(this,Va);x(this,Ya);x(this,Ii);x(this,ko);x(this,Po,0);S(this,Ya,e),S(this,Ii,s)}addFilter(e){if(!e)return"none";let s=c(this,gt,Bi).get(e);if(s)return s;const[a,l,o]=T(this,gt,vm).call(this,e),d=e.length===1?a:`${a}${l}${o}`;if(s=c(this,gt,Bi).get(d),s)return c(this,gt,Bi).set(e,s),s;const f=`g_${c(this,Ya)}_transfer_map_${Xi(this,Po)._++}`,g=T(this,gt,cc).call(this,f);c(this,gt,Bi).set(e,g),c(this,gt,Bi).set(d,g);const m=T(this,gt,hc).call(this,f);return T(this,gt,jd).call(this,a,l,o,m),g}addHCMFilter(e,s){var E;const a=`${e}-${s}`,l="base";let o=c(this,gt,Ud).get(l);if((o==null?void 0:o.key)===a||(o?((E=o.filter)==null||E.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},c(this,gt,Ud).set(l,o)),!e||!s))return o.url;const d=T(this,gt,Gd).call(this,e);e=wt.makeHexColor(...d);const f=T(this,gt,Gd).call(this,s);if(s=wt.makeHexColor(...f),c(this,gt,uc).style.color="",e==="#000000"&&s==="#ffffff"||e===s)return o.url;const g=new Array(256);for(let _=0;_<=255;_++){const C=_/255;g[_]=C<=.03928?C/12.92:((C+.055)/1.055)**2.4}const m=g.join(","),v=`g_${c(this,Ya)}_hcm_filter`,b=o.filter=T(this,gt,hc).call(this,v);T(this,gt,jd).call(this,m,m,m,b),T(this,gt,E0).call(this,b);const A=(_,C)=>{const R=d[_]/255,L=f[_]/255,O=new Array(C+1);for(let P=0;P<=C;P++)O[P]=R+P/C*(L-R);return O.join(",")};return T(this,gt,jd).call(this,A(0,5),A(1,5),A(2,5),b),o.url=T(this,gt,cc).call(this,v),o.url}addAlphaFilter(e){let s=c(this,gt,Bi).get(e);if(s)return s;const[a]=T(this,gt,vm).call(this,[e]),l=`alpha_${a}`;if(s=c(this,gt,Bi).get(l),s)return c(this,gt,Bi).set(e,s),s;const o=`g_${c(this,Ya)}_alpha_map_${Xi(this,Po)._++}`,d=T(this,gt,cc).call(this,o);c(this,gt,Bi).set(e,d),c(this,gt,Bi).set(l,d);const f=T(this,gt,hc).call(this,o);return T(this,gt,_0).call(this,a,f),d}addLuminosityFilter(e){let s=c(this,gt,Bi).get(e||"luminosity");if(s)return s;let a,l;if(e?([a]=T(this,gt,vm).call(this,[e]),l=`luminosity_${a}`):l="luminosity",s=c(this,gt,Bi).get(l),s)return c(this,gt,Bi).set(e,s),s;const o=`g_${c(this,Ya)}_luminosity_map_${Xi(this,Po)._++}`,d=T(this,gt,cc).call(this,o);c(this,gt,Bi).set(e,d),c(this,gt,Bi).set(l,d);const f=T(this,gt,hc).call(this,o);return T(this,gt,Mx).call(this,f),e&&T(this,gt,_0).call(this,a,f),d}addHighlightHCMFilter(e,s,a,l,o){var L;const d=`${s}-${a}-${l}-${o}`;let f=c(this,gt,Ud).get(e);if((f==null?void 0:f.key)===d||(f?((L=f.filter)==null||L.remove(),f.key=d,f.url="none",f.filter=null):(f={key:d,url:"none",filter:null},c(this,gt,Ud).set(e,f)),!s||!a))return f.url;const[g,m]=[s,a].map(T(this,gt,Gd).bind(this));let v=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),b=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[A,E]=[l,o].map(T(this,gt,Gd).bind(this));b<v&&([v,b,A,E]=[b,v,E,A]),c(this,gt,uc).style.color="";const _=(O,P,M)=>{const k=new Array(256),U=(b-v)/M,$=O/255,G=(P-O)/(255*M);let Z=0;for(let it=0;it<=M;it++){const Mt=Math.round(v+it*U),Rt=$+it*G;for(let ht=Z;ht<=Mt;ht++)k[ht]=Rt;Z=Mt+1}for(let it=Z;it<256;it++)k[it]=k[Z-1];return k.join(",")},C=`g_${c(this,Ya)}_hcm_${e}_filter`,R=f.filter=T(this,gt,hc).call(this,C);return T(this,gt,E0).call(this,R),T(this,gt,jd).call(this,_(A[0],E[0],5),_(A[1],E[1],5),_(A[2],E[2],5),R),f.url=T(this,gt,cc).call(this,C),f.url}destroy(e=!1){var s,a,l,o;e&&((s=c(this,ko))!=null&&s.size)||((a=c(this,Va))==null||a.parentNode.parentNode.remove(),S(this,Va,null),(l=c(this,zc))==null||l.clear(),S(this,zc,null),(o=c(this,ko))==null||o.clear(),S(this,ko,null),S(this,Po,0))}}No=new WeakMap,zc=new WeakMap,Va=new WeakMap,Ya=new WeakMap,Ii=new WeakMap,ko=new WeakMap,Po=new WeakMap,gt=new WeakSet,Bi=function(){return c(this,zc)||S(this,zc,new Map)},Ud=function(){return c(this,ko)||S(this,ko,new Map)},uc=function(){if(!c(this,Va)){const e=c(this,Ii).createElement("div"),{style:s}=e;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const a=c(this,Ii).createElementNS(Oa,"svg");a.setAttribute("width",0),a.setAttribute("height",0),S(this,Va,c(this,Ii).createElementNS(Oa,"defs")),e.append(a),a.append(c(this,Va)),c(this,Ii).body.append(e)}return c(this,Va)},vm=function(e){if(e.length===1){const g=e[0],m=new Array(256);for(let b=0;b<256;b++)m[b]=g[b]/255;const v=m.join(",");return[v,v,v]}const[s,a,l]=e,o=new Array(256),d=new Array(256),f=new Array(256);for(let g=0;g<256;g++)o[g]=s[g]/255,d[g]=a[g]/255,f[g]=l[g]/255;return[o.join(","),d.join(","),f.join(",")]},cc=function(e){if(c(this,No)===void 0){S(this,No,"");const s=c(this,Ii).URL;s!==c(this,Ii).baseURI&&(Ey(s)?It('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,No,s.split("#",1)[0]))}return`url(${c(this,No)}#${e})`},Mx=function(e){const s=c(this,Ii).createElementNS(Oa,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(s)},E0=function(e){const s=c(this,Ii).createElementNS(Oa,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(s)},hc=function(e){const s=c(this,Ii).createElementNS(Oa,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",e),c(this,gt,uc).append(s),s},Id=function(e,s,a){const l=c(this,Ii).createElementNS(Oa,s);l.setAttribute("type","discrete"),l.setAttribute("tableValues",a),e.append(l)},jd=function(e,s,a,l){const o=c(this,Ii).createElementNS(Oa,"feComponentTransfer");l.append(o),T(this,gt,Id).call(this,o,"feFuncR",e),T(this,gt,Id).call(this,o,"feFuncG",s),T(this,gt,Id).call(this,o,"feFuncB",a)},_0=function(e,s){const a=c(this,Ii).createElementNS(Oa,"feComponentTransfer");s.append(a),T(this,gt,Id).call(this,a,"feFuncA",e)},Gd=function(e){return c(this,gt,uc).style.color=e,kA(getComputedStyle(c(this,gt,uc)).getPropertyValue("color"))};class Dx{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){ye("Abstract method `_fetch` called.")}}class e_ extends Dx{async _fetch(t){const e=await Lg(t,"arraybuffer");return new Uint8Array(e)}}class Lx{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){ye("Abstract method `_fetch` called.")}}class i_ extends Lx{async _fetch(t){const e=await Lg(t,"arraybuffer");return new Uint8Array(e)}}Di&&It("Please use the `legacy` build in Node.js environments.");async function FA(h){const e=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(e)}class G2 extends Rx{}class q2 extends Tx{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class V2 extends Cx{async _fetch(t){return FA(t)}}class Y2 extends Dx{async _fetch(t){return FA(t)}}class X2 extends Lx{async _fetch(t){return FA(t)}}const Li={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function x0(h,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,s),h.clip(a)}class HA{isModifyingCurrentTransform(){return!1}getPattern(){ye("Abstract method `getPattern` called.")}}class $2 extends HA{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,a){let l;if(a===Li.STROKE||a===Li.FILL){const o=e.current.getClippedPathBoundingBox(a,Re(t))||[0,0,0,0],d=Math.ceil(o[2]-o[0])||1,f=Math.ceil(o[3]-o[1])||1,g=e.cachedCanvases.getCanvas("pattern",d,f),m=g.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-o[0],-o[1]),s=wt.transform(s,[1,0,0,1,o[0],o[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),x0(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),l=t.createPattern(g.canvas,"no-repeat");const v=new DOMMatrix(s);l.setTransform(v)}else x0(t,this._bbox),l=this._createGradient(t);return l}}function Xb(h,t,e,s,a,l,o,d){const f=t.coords,g=t.colors,m=h.data,v=h.width*4;let b;f[e+1]>f[s+1]&&(b=e,e=s,s=b,b=l,l=o,o=b),f[s+1]>f[a+1]&&(b=s,s=a,a=b,b=o,o=d,d=b),f[e+1]>f[s+1]&&(b=e,e=s,s=b,b=l,l=o,o=b);const A=(f[e]+t.offsetX)*t.scaleX,E=(f[e+1]+t.offsetY)*t.scaleY,_=(f[s]+t.offsetX)*t.scaleX,C=(f[s+1]+t.offsetY)*t.scaleY,R=(f[a]+t.offsetX)*t.scaleX,L=(f[a+1]+t.offsetY)*t.scaleY;if(E>=L)return;const O=g[l],P=g[l+1],M=g[l+2],k=g[o],U=g[o+1],$=g[o+2],G=g[d],Z=g[d+1],it=g[d+2],Mt=Math.round(E),Rt=Math.round(L);let ht,St,Y,nt,dt,Pt,z,et;for(let lt=Mt;lt<=Rt;lt++){if(lt<C){const qt=lt<E?0:(E-lt)/(E-C);ht=A-(A-_)*qt,St=O-(O-k)*qt,Y=P-(P-U)*qt,nt=M-(M-$)*qt}else{let qt;lt>L?qt=1:C===L?qt=0:qt=(C-lt)/(C-L),ht=_-(_-R)*qt,St=k-(k-G)*qt,Y=U-(U-Z)*qt,nt=$-($-it)*qt}let rt;lt<E?rt=0:lt>L?rt=1:rt=(E-lt)/(E-L),dt=A-(A-R)*rt,Pt=O-(O-G)*rt,z=P-(P-Z)*rt,et=M-(M-it)*rt;const ot=Math.round(Math.min(ht,dt)),Ot=Math.round(Math.max(ht,dt));let Dt=v*lt+ot*4;for(let qt=ot;qt<=Ot;qt++)rt=(ht-qt)/(ht-dt),rt<0?rt=0:rt>1&&(rt=1),m[Dt++]=St-(St-Pt)*rt|0,m[Dt++]=Y-(Y-z)*rt|0,m[Dt++]=nt-(nt-et)*rt|0,m[Dt++]=255}}function K2(h,t,e){const s=t.coords,a=t.colors;let l,o;switch(t.type){case"lattice":const d=t.verticesPerRow,f=Math.floor(s.length/d)-1,g=d-1;for(l=0;l<f;l++){let m=l*d;for(let v=0;v<g;v++,m++)Xb(h,e,s[m],s[m+1],s[m+d],a[m],a[m+1],a[m+d]),Xb(h,e,s[m+d+1],s[m+1],s[m+d],a[m+d+1],a[m+1],a[m+d])}break;case"triangles":for(l=0,o=s.length;l<o;l+=3)Xb(h,e,s[l],s[l+1],s[l+2],a[l],a[l+1],a[l+2]);break;default:throw new Error("illegal figure")}}class W2 extends HA{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const d=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),g=Math.ceil(this._bounds[2])-d,m=Math.ceil(this._bounds[3])-f,v=Math.min(Math.ceil(Math.abs(g*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),A=g/v,E=m/b,_={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-f,scaleX:1/A,scaleY:1/E},C=v+2*2,R=b+2*2,L=s.getCanvas("mesh",C,R),O=L.context,P=O.createImageData(v,b);if(e){const k=P.data;for(let U=0,$=k.length;U<$;U+=4)k[U]=e[0],k[U+1]=e[1],k[U+2]=e[2],k[U+3]=255}for(const k of this._figures)K2(P,k,_);return O.putImageData(P,2,2),{canvas:L.canvas,offsetX:d-2*A,offsetY:f-2*E,scaleX:A,scaleY:E}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,a){x0(t,this._bbox);let l;if(a===Li.SHADING)l=wt.singularValueDecompose2dScale(Re(t));else if(l=wt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const d=wt.singularValueDecompose2dScale(this.matrix);l=[l[0]*d[0],l[1]*d[1]]}const o=this._createMeshCanvas(l,a===Li.SHADING?null:this._background,e.cachedCanvases);return a!==Li.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class Q2 extends HA{getPattern(){return"hotpink"}}function Z2(h){switch(h[0]){case"RadialAxial":return new $2(h);case"Mesh":return new W2(h);case"Dummy":return new Q2}throw new Error(`Unknown IR type: ${h[0]}`)}const n_={COLORED:1,UNCOLORED:2},sy=class sy{constructor(t,e,s,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t){const{bbox:e,operatorList:s,paintType:a,tilingType:l,color:o,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),wy("TilingType: "+l);const m=e[0],v=e[1],b=e[2],A=e[3],E=b-m,_=A-v,C=wt.singularValueDecompose2dScale(this.matrix),R=wt.singularValueDecompose2dScale(this.baseTransform),L=C[0]*R[0],O=C[1]*R[1];let P=E,M=_,k=!1,U=!1;const $=Math.ceil(f*L),G=Math.ceil(g*O),Z=Math.ceil(E*L),it=Math.ceil(_*O);$>=Z?P=f:k=!0,G>=it?M=g:U=!0;const Mt=this.getSizeAndScale(P,this.ctx.canvas.width,L),Rt=this.getSizeAndScale(M,this.ctx.canvas.height,O),ht=t.cachedCanvases.getCanvas("pattern",Mt.size,Rt.size),St=ht.context,Y=d.createCanvasGraphics(St);if(Y.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Y,a,o),St.translate(-Mt.scale*m,-Rt.scale*v),Y.transform(Mt.scale,0,0,Rt.scale,0,0),St.save(),this.clipBbox(Y,m,v,b,A),Y.baseTransform=Re(Y.ctx),Y.executeOperatorList(s),Y.endDrawing(),St.restore(),k||U){const nt=ht.canvas;k&&(P=f),U&&(M=g);const dt=this.getSizeAndScale(P,this.ctx.canvas.width,L),Pt=this.getSizeAndScale(M,this.ctx.canvas.height,O),z=dt.size,et=Pt.size,lt=t.cachedCanvases.getCanvas("pattern-workaround",z,et),rt=lt.context,ot=k?Math.floor(E/f):0,Ot=U?Math.floor(_/g):0;for(let Dt=0;Dt<=ot;Dt++)for(let qt=0;qt<=Ot;qt++)rt.drawImage(nt,z*Dt,et*qt,z,et,0,0,z,et);return{canvas:lt.canvas,scaleX:dt.scale,scaleY:Pt.scale,offsetX:m,offsetY:v}}return{canvas:ht.canvas,scaleX:Mt.scale,scaleY:Rt.scale,offsetX:m,offsetY:v}}getSizeAndScale(t,e,s){const a=Math.max(sy.MAX_PATTERN_SIZE,e);let l=Math.ceil(t*s);return l>=a?l=a:s=l/t,{scale:s,size:l}}clipBbox(t,e,s,a,l){const o=a-e,d=l-s;t.ctx.rect(e,s,o,d),t.current.updateRectMinMax(Re(t.ctx),[e,s,a,l]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const a=t.ctx,l=t.current;switch(e){case n_.COLORED:const o=this.ctx;a.fillStyle=o.fillStyle,a.strokeStyle=o.strokeStyle,l.fillColor=o.fillStyle,l.strokeColor=o.strokeStyle;break;case n_.UNCOLORED:const d=wt.makeHexColor(s[0],s[1],s[2]);a.fillStyle=d,a.strokeStyle=d,l.fillColor=d,l.strokeColor=d;break;default:throw new E2(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,a){let l=s;a!==Li.SHADING&&(l=wt.transform(l,e.baseTransform),this.matrix&&(l=wt.transform(l,this.matrix)));const o=this.createPatternCanvas(e);let d=new DOMMatrix(l);d=d.translate(o.offsetX,o.offsetY),d=d.scale(1/o.scaleX,1/o.scaleY);const f=t.createPattern(o.canvas,"repeat");return f.setTransform(d),f}};At(sy,"MAX_PATTERN_SIZE",3e3);let T0=sy;function J2({src:h,srcPos:t=0,dest:e,width:s,height:a,nonBlackColor:l=4294967295,inverseDecode:o=!1}){const d=ki.isLittleEndian?4278190080:255,[f,g]=o?[l,d]:[d,l],m=s>>3,v=s&7,b=h.length;e=new Uint32Array(e.buffer);let A=0;for(let E=0;E<a;E++){for(const C=t+m;t<C;t++){const R=t<b?h[t]:255;e[A++]=R&128?g:f,e[A++]=R&64?g:f,e[A++]=R&32?g:f,e[A++]=R&16?g:f,e[A++]=R&8?g:f,e[A++]=R&4?g:f,e[A++]=R&2?g:f,e[A++]=R&1?g:f}if(v===0)continue;const _=t<b?h[t++]:255;for(let C=0;C<v;C++)e[A++]=_&1<<7-C?g:f}return{srcPos:t,destPos:A}}const s_=16,a_=100,tL=15,r_=10,l_=1e3,dn=16,$b=new DOMMatrix;function eL(h,t){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){t.save(),this.__originalSave()},h.restore=function(){t.restore(),this.__originalRestore()},h.translate=function(s,a){t.translate(s,a),this.__originalTranslate(s,a)},h.scale=function(s,a){t.scale(s,a),this.__originalScale(s,a)},h.transform=function(s,a,l,o,d,f){t.transform(s,a,l,o,d,f),this.__originalTransform(s,a,l,o,d,f)},h.setTransform=function(s,a,l,o,d,f){t.setTransform(s,a,l,o,d,f),this.__originalSetTransform(s,a,l,o,d,f)},h.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},h.rotate=function(s){t.rotate(s),this.__originalRotate(s)},h.clip=function(s){t.clip(s),this.__originalClip(s)},h.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},h.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},h.bezierCurveTo=function(e,s,a,l,o,d){t.bezierCurveTo(e,s,a,l,o,d),this.__originalBezierCurveTo(e,s,a,l,o,d)},h.rect=function(e,s,a,l){t.rect(e,s,a,l),this.__originalRect(e,s,a,l)},h.closePath=function(){t.closePath(),this.__originalClosePath()},h.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class iL{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,s)):(a=this.canvasFactory.create(e,s),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function tm(h,t,e,s,a,l,o,d,f,g){const[m,v,b,A,E,_]=Re(h);if(v===0&&b===0){const L=o*m+E,O=Math.round(L),P=d*A+_,M=Math.round(P),k=(o+f)*m+E,U=Math.abs(Math.round(k)-O)||1,$=(d+g)*A+_,G=Math.abs(Math.round($)-M)||1;return h.setTransform(Math.sign(m),0,0,Math.sign(A),O,M),h.drawImage(t,e,s,a,l,0,0,U,G),h.setTransform(m,v,b,A,E,_),[U,G]}if(m===0&&A===0){const L=d*b+E,O=Math.round(L),P=o*v+_,M=Math.round(P),k=(d+g)*b+E,U=Math.abs(Math.round(k)-O)||1,$=(o+f)*v+_,G=Math.abs(Math.round($)-M)||1;return h.setTransform(0,Math.sign(v),Math.sign(b),0,O,M),h.drawImage(t,e,s,a,l,0,0,G,U),h.setTransform(m,v,b,A,E,_),[G,U]}h.drawImage(t,e,s,a,l,o,d,f,g);const C=Math.hypot(m,v),R=Math.hypot(b,A);return[C*f,R*g]}function nL(h){const{width:t,height:e}=h;if(t>l_||e>l_)return null;const s=1e3,a=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),l=t+1,o=new Uint8Array(l*(e+1));let d,f,g;const m=t+7&-8,v=new Uint8Array(m*e);let b=0;for(const k of h.data){let U=128;for(;U>0;)v[b++]=k&U?0:255,U>>=1}let A=0;for(b=0,v[b]!==0&&(o[0]=1,++A),f=1;f<t;f++)v[b]!==v[b+1]&&(o[f]=v[b]?2:1,++A),b++;for(v[b]!==0&&(o[f]=2,++A),d=1;d<e;d++){b=d*m,g=d*l,v[b-m]!==v[b]&&(o[g]=v[b]?1:8,++A);let k=(v[b]?4:0)+(v[b-m]?8:0);for(f=1;f<t;f++)k=(k>>2)+(v[b+1]?4:0)+(v[b-m+1]?8:0),a[k]&&(o[g+f]=a[k],++A),b++;if(v[b-m]!==v[b]&&(o[g+f]=v[b]?2:4,++A),A>s)return null}for(b=m*(e-1),g=d*l,v[b]!==0&&(o[g]=8,++A),f=1;f<t;f++)v[b]!==v[b+1]&&(o[g+f]=v[b]?4:8,++A),b++;if(v[b]!==0&&(o[g+f]=4,++A),A>s)return null;const E=new Int32Array([0,l,-1,0,-l,0,0,0,1]),_=new Path2D,{a:C,b:R,c:L,d:O,e:P,f:M}=new DOMMatrix().scaleSelf(1/t,-1/e).translateSelf(0,-e);for(d=0;A&&d<=e;d++){let k=d*l;const U=k+t;for(;k<U&&!o[k];)k++;if(k===U)continue;let $=k%l,G=d;_.moveTo(C*$+L*G+P,R*$+O*G+M);const Z=k;let it=o[k];do{const Mt=E[it];do k+=Mt;while(!o[k]);const Rt=o[k];Rt!==5&&Rt!==10?(it=Rt,o[k]=0):(it=Rt&51*it>>4,o[k]&=it>>2|it<<2),$=k%l,G=k/l|0,_.lineTo(C*$+L*G+P,R*$+O*G+M),o[k]||--A}while(Z!==k);--d}return _}class o_{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=U_,this.textMatrixScale=1,this.fontMatrix=i0,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Hi.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}updateRectMinMax(t,e){const s=wt.applyTransform(e,t),a=wt.applyTransform(e.slice(2),t),l=wt.applyTransform([e[0],e[3]],t),o=wt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,s[0],a[0],l[0],o[0]),this.minY=Math.min(this.minY,s[1],a[1],l[1],o[1]),this.maxX=Math.max(this.maxX,s[0],a[0],l[0],o[0]),this.maxY=Math.max(this.maxY,s[1],a[1],l[1],o[1])}getPathBoundingBox(t=Li.FILL,e=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(t===Li.STROKE){e||ye("Stroke bounding box must include transform.");const a=wt.singularValueDecompose2dScale(e),l=a[0]*this.lineWidth/2,o=a[1]*this.lineWidth/2;s[0]-=l,s[1]-=o,s[2]+=l,s[3]+=o}return s}updateClipFromPath(){const t=wt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Li.FILL,e=null){return wt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function u_(h,t){if(t instanceof ImageData){h.putImageData(t,0,0);return}const e=t.height,s=t.width,a=e%dn,l=(e-a)/dn,o=a===0?l:l+1,d=h.createImageData(s,dn);let f=0,g;const m=t.data,v=d.data;let b,A,E,_;if(t.kind===om.GRAYSCALE_1BPP){const C=m.byteLength,R=new Uint32Array(v.buffer,0,v.byteLength>>2),L=R.length,O=s+7>>3,P=4294967295,M=ki.isLittleEndian?4278190080:255;for(b=0;b<o;b++){for(E=b<l?dn:a,g=0,A=0;A<E;A++){const k=C-f;let U=0;const $=k>O?s:k*8-7,G=$&-8;let Z=0,it=0;for(;U<G;U+=8)it=m[f++],R[g++]=it&128?P:M,R[g++]=it&64?P:M,R[g++]=it&32?P:M,R[g++]=it&16?P:M,R[g++]=it&8?P:M,R[g++]=it&4?P:M,R[g++]=it&2?P:M,R[g++]=it&1?P:M;for(;U<$;U++)Z===0&&(it=m[f++],Z=128),R[g++]=it&Z?P:M,Z>>=1}for(;g<L;)R[g++]=0;h.putImageData(d,0,b*dn)}}else if(t.kind===om.RGBA_32BPP){for(A=0,_=s*dn*4,b=0;b<l;b++)v.set(m.subarray(f,f+_)),f+=_,h.putImageData(d,0,A),A+=dn;b<o&&(_=s*a*4,v.set(m.subarray(f,f+_)),h.putImageData(d,0,A))}else if(t.kind===om.RGB_24BPP)for(E=dn,_=s*E,b=0;b<o;b++){for(b>=l&&(E=a,_=s*E),g=0,A=_;A--;)v[g++]=m[f++],v[g++]=m[f++],v[g++]=m[f++],v[g++]=255;h.putImageData(d,0,b*dn)}else throw new Error(`bad image kind: ${t.kind}`)}function c_(h,t){if(t.bitmap){h.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,a=e%dn,l=(e-a)/dn,o=a===0?l:l+1,d=h.createImageData(s,dn);let f=0;const g=t.data,m=d.data;for(let v=0;v<o;v++){const b=v<l?dn:a;({srcPos:f}=J2({src:g,srcPos:f,dest:m,width:s,height:b,nonBlackColor:0})),h.putImageData(d,0,v*dn)}}function Md(h,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)h[s]!==void 0&&(t[s]=h[s]);h.setLineDash!==void 0&&(t.setLineDash(h.getLineDash()),t.lineDashOffset=h.lineDashOffset)}function em(h){if(h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0),!Di){const{filter:t}=h;t!=="none"&&t!==""&&(h.filter="none")}}function h_(h,t){if(t)return!0;const e=wt.singularValueDecompose2dScale(h);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const s=Math.fround(gr.pixelRatio*Rl.PDF_TO_CSS_UNITS);return e[0]<=s&&e[1]<=s}const sL=["butt","round","square"],aL=["miter","round","bevel"],rL={},d_={};var ks,C0,R0,M0;const qA=class qA{constructor(t,e,s,a,l,{optionalContentConfig:o,markedContentStack:d=null},f,g){x(this,ks);this.ctx=t,this.current=new o_(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=a,this.filterFactory=l,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=o,this.cachedCanvases=new iL(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=g,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:a=null}){const l=this.ctx.canvas.width,o=this.ctx.canvas.height,d=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,l,o),this.ctx.fillStyle=d,s){const f=this.cachedCanvases.getCanvas("transparent",l,o);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...Re(this.compositeCtx))}this.ctx.save(),em(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Re(this.ctx)}executeOperatorList(t,e,s,a){const l=t.argsArray,o=t.fnArray;let d=e||0;const f=l.length;if(f===d)return d;const g=f-d>r_&&typeof s=="function",m=g?Date.now()+tL:0;let v=0;const b=this.commonObjs,A=this.objs;let E;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,s),d;if(E=o[d],E!==jm.dependency)this[E].apply(this,l[d]);else for(const _ of l[d]){const C=_.startsWith("g_")?b:A;if(!C.has(_))return C.get(_,s),d}if(d++,d===f)return d;if(g&&++v>r_){if(Date.now()>m)return s(),d;v=0}}}endDrawing(){T(this,ks,C0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),T(this,ks,R0).call(this)}_scaleImage(t,e){const s=t.width??t.displayWidth,a=t.height??t.displayHeight;let l=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),d=s,f=a,g="prescale1",m,v;for(;l>2&&d>1||o>2&&f>1;){let b=d,A=f;l>2&&d>1&&(b=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),l/=d/b),o>2&&f>1&&(A=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,o/=f/A),m=this.cachedCanvases.getCanvas(g,b,A),v=m.context,v.clearRect(0,0,b,A),v.drawImage(t,0,0,d,f,0,0,b,A),t=m.canvas,d=b,f=A,g=g==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:d,paintHeight:f}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:a}=t,l=this.current.fillColor,o=this.current.patternFill,d=Re(e);let f,g,m,v;if((t.bitmap||t.data)&&t.count>1){const $=t.bitmap||t.data.buffer;g=JSON.stringify(o?d:[d.slice(0,4),l]),f=this._cachedBitmapsMap.get($),f||(f=new Map,this._cachedBitmapsMap.set($,f));const G=f.get(g);if(G&&!o){const Z=Math.round(Math.min(d[0],d[2])+d[4]),it=Math.round(Math.min(d[1],d[3])+d[5]);return{canvas:G,offsetX:Z,offsetY:it}}m=G}m||(v=this.cachedCanvases.getCanvas("maskCanvas",s,a),c_(v.context,t));let b=wt.transform(d,[1/s,0,0,-1/a,0,0]);b=wt.transform(b,[1,0,0,1,0,-a]);const[A,E,_,C]=wt.getAxialAlignedBoundingBox([0,0,s,a],b),R=Math.round(_-A)||1,L=Math.round(C-E)||1,O=this.cachedCanvases.getCanvas("fillCanvas",R,L),P=O.context,M=A,k=E;P.translate(-M,-k),P.transform(...b),m||(m=this._scaleImage(v.canvas,Gs(P)),m=m.img,f&&o&&f.set(g,m)),P.imageSmoothingEnabled=h_(Re(P),t.interpolate),tm(P,m,0,0,m.width,m.height,0,0,s,a),P.globalCompositeOperation="source-in";const U=wt.transform(Gs(P),[1,0,0,1,-M,-k]);return P.fillStyle=o?l.getPattern(e,this,U,Li.FILL):l,P.fillRect(0,0,s,a),f&&!o&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,O.canvas)),{canvas:O.canvas,offsetX:Math.round(M),offsetY:Math.round(k)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=sL[t]}setLineJoin(t){this.ctx.lineJoin=aL[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx;const l=this.ctx=a.context;l.setTransform(this.suspendedCtx.getTransform()),Md(this.suspendedCtx,l),eL(l,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Md(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,a){const l=a[0],o=a[1],d=a[2]-l,f=a[3]-o;d===0||f===0||(this.genericComposeSMask(e.context,s,d,f,e.subtype,e.backdrop,e.transferMap,l,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,a,l,o,d,f,g,m,v){let b=t.canvas,A=f-m,E=g-v;if(o){const C=wt.makeHexColor(...o);if(A<0||E<0||A+s>b.width||E+a>b.height){const R=this.cachedCanvases.getCanvas("maskExtension",s,a),L=R.context;L.drawImage(b,-A,-E),L.globalCompositeOperation="destination-atop",L.fillStyle=C,L.fillRect(0,0,s,a),L.globalCompositeOperation="source-over",b=R.canvas,A=E=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const R=new Path2D;R.rect(A,E,s,a),t.clip(R),t.globalCompositeOperation="destination-atop",t.fillStyle=C,t.fillRect(A,E,s,a),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),l==="Alpha"&&d?e.filter=this.filterFactory.addAlphaFilter(d):l==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(d));const _=new Path2D;_.rect(f,g,s,a),e.clip(_),e.globalCompositeOperation="destination-in",e.drawImage(b,A,E,s,a,f,g,s,a),e.restore()}save(){this.inSMaskMode&&Md(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Md(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,a,l,o){this.ctx.transform(t,e,s,a,l,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){let[a]=e;if(!s){a||(a=e[0]=new Path2D),this[t](a);return}if(!(a instanceof Path2D)){const l=e[0]=new Path2D;for(let o=0,d=a.length;o<d;)switch(a[o++]){case Zp.moveTo:l.moveTo(a[o++],a[o++]);break;case Zp.lineTo:l.lineTo(a[o++],a[o++]);break;case Zp.curveTo:l.bezierCurveTo(a[o++],a[o++],a[o++],a[o++],a[o++],a[o++]);break;case Zp.closePath:l.closePath();break;default:It(`Unrecognized drawing path operator: ${a[o-1]}`);break}a=l}this.current.updateRectMinMax(Re(this.ctx),s),this[t](a)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const s=this.ctx,a=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&(a!=null&&a.getPattern)){const l=a.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=a.getPattern(s,this,Gs(s),Li.STROKE),l){const o=new Path2D;o.addPath(t,s.getTransform().invertSelf().multiplySelf(l)),t=o}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Li.STROKE,Re(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const s=this.ctx,a=this.current.fillColor,l=this.current.patternFill;let o=!1;if(l){const f=a.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=a.getPattern(s,this,Gs(s),Li.FILL),f){const g=new Path2D;g.addPath(t,s.getTransform().invertSelf().multiplySelf(f)),t=g}o=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),o&&s.restore(),e&&this.consumePath(t,d)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}clip(){this.pendingClip=rL}eoClip(){this.pendingClip=d_}beginText(){this.current.textMatrix=U_,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const s=new Path2D,a=e.getTransform().invertSelf();for(const{transform:l,x:o,y:d,fontSize:f,path:g}of t)s.addPath(g,new DOMMatrix(l).preMultiplySelf(a).translate(o,d).scale(f,-f));e.clip(s),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var m;const s=this.commonObjs.get(t),a=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=s.fontMatrix||i0,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&It("Invalid font matrix for font "+t),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const l=s.loadedName||"sans-serif",o=((m=s.systemFontInfo)==null?void 0:m.css)||`"${l}", ${s.fallbackName}`;let d="normal";s.black?d="900":s.bold&&(d="bold");const f=s.italic?"italic":"normal";let g=e;e<s_?g=s_:e>a_&&(g=a_),this.current.fontSizeScale=e/g,this.ctx.font=`${f} ${d} ${g}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,s,a,l,o){this.current.textMatrix=[t,e,s,a,l,o],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,a,l){const o=this.ctx,d=this.current,f=d.font,g=d.textRenderingMode,m=d.fontSize/d.fontSizeScale,v=g&Hi.FILL_STROKE_MASK,b=!!(g&Hi.ADD_TO_PATH_FLAG),A=d.patternFill&&!f.missingFile,E=d.patternStroke&&!f.missingFile;let _;if((f.disableFontFace||b||A||E)&&(_=f.getPathGenerator(this.commonObjs,t)),f.disableFontFace||A||E){o.save(),o.translate(e,s),o.scale(m,-m);let C;if((v===Hi.FILL||v===Hi.FILL_STROKE)&&(a?(C=o.getTransform(),o.setTransform(...a),o.fill(T(this,ks,M0).call(this,_,C,a))):o.fill(_)),v===Hi.STROKE||v===Hi.FILL_STROKE)if(l){C||(C=o.getTransform()),o.setTransform(...l);const{a:R,b:L,c:O,d:P}=C,M=wt.inverseTransform(l),k=wt.transform([R,L,O,P,0,0],M),[U,$]=wt.singularValueDecompose2dScale(k);o.lineWidth*=Math.max(U,$)/m,o.stroke(T(this,ks,M0).call(this,_,C,l))}else o.lineWidth/=m,o.stroke(_);o.restore()}else(v===Hi.FILL||v===Hi.FILL_STROKE)&&o.fillText(t,e,s),(v===Hi.STROKE||v===Hi.FILL_STROKE)&&o.strokeText(t,e,s);b&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Re(o),x:e,y:s,fontSize:m,path:_})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){s=!0;break}return Zt(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const a=e.fontSize;if(a===0)return;const l=this.ctx,o=e.fontSizeScale,d=e.charSpacing,f=e.wordSpacing,g=e.fontDirection,m=e.textHScale*g,v=t.length,b=s.vertical,A=b?1:-1,E=s.defaultVMetrics,_=a*e.fontMatrix[0],C=e.textRenderingMode===Hi.FILL&&!s.disableFontFace&&!e.patternFill;l.save(),l.transform(...e.textMatrix),l.translate(e.x,e.y+e.textRise),g>0?l.scale(m,-1):l.scale(m,1);let R,L;if(e.patternFill){l.save();const U=e.fillColor.getPattern(l,this,Gs(l),Li.FILL);R=Re(l),l.restore(),l.fillStyle=U}if(e.patternStroke){l.save();const U=e.strokeColor.getPattern(l,this,Gs(l),Li.STROKE);L=Re(l),l.restore(),l.strokeStyle=U}let O=e.lineWidth;const P=e.textMatrixScale;if(P===0||O===0){const U=e.textRenderingMode&Hi.FILL_STROKE_MASK;(U===Hi.STROKE||U===Hi.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=P;if(o!==1&&(l.scale(o,o),O/=o),l.lineWidth=O,s.isInvalidPDFjsFont){const U=[];let $=0;for(const G of t)U.push(G.unicode),$+=G.width;l.fillText(U.join(""),0,0),e.x+=$*_*m,l.restore(),this.compose();return}let M=0,k;for(k=0;k<v;++k){const U=t[k];if(typeof U=="number"){M+=A*U*a/1e3;continue}let $=!1;const G=(U.isSpace?f:0)+d,Z=U.fontChar,it=U.accent;let Mt,Rt,ht=U.width;if(b){const Y=U.vmetric||E,nt=-(U.vmetric?Y[1]:ht*.5)*_,dt=Y[2]*_;ht=Y?-Y[0]:ht,Mt=nt/o,Rt=(M+dt)/o}else Mt=M/o,Rt=0;if(s.remeasure&&ht>0){const Y=l.measureText(Z).width*1e3/a*o;if(ht<Y&&this.isFontSubpixelAAEnabled){const nt=ht/Y;$=!0,l.save(),l.scale(nt,1),Mt/=nt}else ht!==Y&&(Mt+=(ht-Y)/2e3*a/o)}if(this.contentVisible&&(U.isInFont||s.missingFile)){if(C&&!it)l.fillText(Z,Mt,Rt);else if(this.paintChar(Z,Mt,Rt,R,L),it){const Y=Mt+a*it.offset.x/o,nt=Rt-a*it.offset.y/o;this.paintChar(it.fontChar,Y,nt,R,L)}}const St=b?ht*_-G*g:ht*_+G*g;M+=St,$&&l.restore()}b?e.y-=M:e.x+=M*m,l.restore(),this.compose()}showType3Text(t){const e=this.ctx,s=this.current,a=s.font,l=s.fontSize,o=s.fontDirection,d=a.vertical?1:-1,f=s.charSpacing,g=s.wordSpacing,m=s.textHScale*o,v=s.fontMatrix||i0,b=t.length,A=s.textRenderingMode===Hi.INVISIBLE;let E,_,C,R;if(!(A||l===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...s.textMatrix),e.translate(s.x,s.y+s.textRise),e.scale(m,o),E=0;E<b;++E){if(_=t[E],typeof _=="number"){R=d*_*l/1e3,this.ctx.translate(R,0),s.x+=R*m;continue}const L=(_.isSpace?g:0)+f,O=a.charProcOperatorList[_.operatorListId];O?this.contentVisible&&(this.processingType3=_,this.save(),e.scale(l,l),e.transform(...v),this.executeOperatorList(O),this.restore()):It(`Type3 character "${_.operatorListId}" is not available.`),C=wt.applyTransform([_.width,0],v)[0]*l+L,e.translate(C,0),s.x+=C*m}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,a,l,o){this.ctx.rect(s,a,l-s,o-a),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const s=this.baseTransform||Re(this.ctx),a={createCanvasGraphics:l=>new qA(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new T0(t,this.ctx,a,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,s){this.ctx.strokeStyle=this.current.strokeColor=wt.makeHexColor(t,e,s),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,s){this.ctx.fillStyle=this.current.fillColor=wt.makeHexColor(t,e,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=Z2(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,Gs(e),Li.SHADING);const a=Gs(e);if(a){const{width:l,height:o}=e.canvas,[d,f,g,m]=wt.getAxialAlignedBoundingBox([0,0,l,o],a);this.ctx.fillRect(d,f,g-d,m-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ye("Should not call beginInlineImage")}beginImageData(){ye("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Re(this.ctx),e)){const s=e[2]-e[0],a=e[3]-e[1];this.ctx.rect(e[0],e[1],s,a),this.current.updateRectMinMax(Re(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||wy("TODO: Support non-isolated groups."),t.knockout&&It("Knockout groups not supported.");const s=Re(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=wt.getAxialAlignedBoundingBox(t.bbox,Re(e));const l=[0,0,e.canvas.width,e.canvas.height];a=wt.intersect(a,l)||[0,0,0,0];const o=Math.floor(a[0]),d=Math.floor(a[1]),f=Math.max(Math.ceil(a[2])-o,1),g=Math.max(Math.ceil(a[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,g]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(m,f,g),b=v.context;b.translate(-o,-d),b.transform(...s);let A=new Path2D;const[E,_,C,R]=t.bbox;if(A.rect(E,_,C-E,R-_),t.matrix){const L=new Path2D;L.addPath(A,new DOMMatrix(t.matrix)),A=L}b.clip(A),t.smask?this.smaskStack.push({canvas:v.canvas,context:b,offsetX:o,offsetY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,d),e.save()),Md(e,b),this.ctx=b,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=Re(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const l=wt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,s,a,l){if(T(this,ks,C0).call(this),em(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],d=e[3]-e[1];if(l&&this.annotationCanvasMap){s=s.slice(),s[4]-=e[0],s[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=d;const[f,g]=wt.singularValueDecompose2dScale(Re(this.ctx)),{viewportScale:m}=this,v=Math.ceil(o*this.outputScaleX*m),b=Math.ceil(d*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(v,b);const{canvas:A,context:E}=this.annotationCanvas;this.annotationCanvasMap.set(t,A),this.annotationCanvas.savedCtx=this.ctx,this.ctx=E,this.ctx.save(),this.ctx.setTransform(f,0,0,-g,0,d*g),em(this.ctx)}else em(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],o,d),this.ctx.clip(),this.ctx.beginPath()}this.current=new o_(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),T(this,ks,R0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const s=this.ctx,a=this.processingType3;if(a&&(a.compiled===void 0&&(a.compiled=nL(t)),a.compiled)){s.fill(a.compiled);return}const l=this._createMaskCanvas(t),o=l.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,l.offsetX,l.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,a=0,l,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const d=this.ctx;d.save();const f=Re(d);d.transform(e,s,a,l,0,0);const g=this._createMaskCanvas(t);d.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]);for(let m=0,v=o.length;m<v;m+=2){const b=wt.transform(f,[e,s,a,l,o[m],o[m+1]]),[A,E]=wt.applyTransform([0,0],b);d.drawImage(g.canvas,A,E)}d.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,a=this.current.patternFill;for(const l of t){const{data:o,width:d,height:f,transform:g}=l,m=this.cachedCanvases.getCanvas("maskCanvas",d,f),v=m.context;v.save();const b=this.getObject(o,l);c_(v,b),v.globalCompositeOperation="source-in",v.fillStyle=a?s.getPattern(v,this,Gs(e),Li.FILL):s,v.fillRect(0,0,d,f),v.restore(),e.save(),e.transform(...g),e.scale(1,-1),tm(e,m.canvas,0,0,d,f,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){It("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,s,a){if(!this.contentVisible)return;const l=this.getObject(t);if(!l){It("Dependent image isn't ready yet");return}const o=l.width,d=l.height,f=[];for(let g=0,m=a.length;g<m;g+=2)f.push({transform:[e,0,0,s,a[g],a[g+1]],x:0,y:0,w:o,h:d});this.paintInlineImageXObjectGroup(l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:a}=t,l=this.cachedCanvases.getCanvas("inlineImage",s,a),o=l.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",l.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,a=this.ctx;if(this.save(),!Di){const{filter:d}=a;d!=="none"&&d!==""&&(a.filter="none")}a.scale(1/e,-1/s);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",e,s).context;u_(f,t),l=this.applyTransferMapsToCanvas(f)}const o=this._scaleImage(l,Gs(a));a.imageSmoothingEnabled=h_(Re(a),t.interpolate),tm(a,o.img,0,0,o.paintWidth,o.paintHeight,0,-s,e,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const l=t.width,o=t.height,f=this.cachedCanvases.getCanvas("inlineImage",l,o).context;u_(f,t),a=this.applyTransferMapsToCanvas(f)}for(const l of e)s.save(),s.transform(...l.transform),s.scale(1,-1),tm(s,a,l.x,l.y,l.w,l.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const a=this.ctx;this.pendingClip&&(s||(this.pendingClip===d_?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),a.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Re(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:a,d:l}=this.ctx.getTransform();let o,d;if(s===0&&a===0){const f=Math.abs(e),g=Math.abs(l);if(f===g)if(t===0)o=d=1/f;else{const m=f*t;o=d=m<1?1/m:1}else if(t===0)o=1/f,d=1/g;else{const m=f*t,v=g*t;o=m<1?1/m:1,d=v<1?1/v:1}}else{const f=Math.abs(e*l-s*a),g=Math.hypot(e,s),m=Math.hypot(a,l);if(t===0)o=m/f,d=g/f;else{const v=t*f;o=m>v?m/v:1,d=g>v?g/v:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=d}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:a}}=this,[l,o]=this.getScaleForStroking();if(l===o){s.lineWidth=(a||1)*l,s.stroke(t);return}const d=s.getLineDash();e&&s.save(),s.scale(l,o),$b.a=1/l,$b.d=1/o;const f=new Path2D;if(f.addPath(t,$b),d.length>0){const g=Math.max(l,o);s.setLineDash(d.map(m=>m/g)),s.lineDashOffset/=g}s.lineWidth=a||1,s.stroke(f),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};ks=new WeakSet,C0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},R0=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},M0=function(t,e,s){const a=new Path2D;return a.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),a};let yc=qA;for(const h in jm)yc.prototype[h]!==void 0&&(yc.prototype[jm[h]]=yc.prototype[h]);var Df,Lf;class cr{static get workerPort(){return c(this,Df)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");S(this,Df,t)}static get workerSrc(){return c(this,Lf)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");S(this,Lf,t)}}Df=new WeakMap,Lf=new WeakMap,x(cr,Df,null),x(cr,Lf,"");var zo,Of;class lL{constructor({parsedData:t,rawData:e}){x(this,zo);x(this,Of);S(this,zo,t),S(this,Of,e)}getRaw(){return c(this,Of)}get(t){return c(this,zo).get(t)??null}getAll(){return MA(c(this,zo))}has(t){return c(this,zo).has(t)}}zo=new WeakMap,Of=new WeakMap;const dc=Symbol("INTERNAL");var Nf,kf,Pf,Fc;class oL{constructor(t,{name:e,intent:s,usage:a,rbGroups:l}){x(this,Nf,!1);x(this,kf,!1);x(this,Pf,!1);x(this,Fc,!0);S(this,Nf,!!(t&Nn.DISPLAY)),S(this,kf,!!(t&Nn.PRINT)),this.name=e,this.intent=s,this.usage=a,this.rbGroups=l}get visible(){if(c(this,Pf))return c(this,Fc);if(!c(this,Fc))return!1;const{print:t,view:e}=this.usage;return c(this,Nf)?(e==null?void 0:e.viewState)!=="OFF":c(this,kf)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,s=!1){t!==dc&&ye("Internal method `_setVisible` called."),S(this,Pf,s),S(this,Fc,e)}}Nf=new WeakMap,kf=new WeakMap,Pf=new WeakMap,Fc=new WeakMap;var al,fe,Hc,Bc,zf,D0;class uL{constructor(t,e=Nn.DISPLAY){x(this,zf);x(this,al,null);x(this,fe,new Map);x(this,Hc,null);x(this,Bc,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,S(this,Bc,t.order);for(const s of t.groups)c(this,fe).set(s.id,new oL(e,s));if(t.baseState==="OFF")for(const s of c(this,fe).values())s._setVisible(dc,!1);for(const s of t.on)c(this,fe).get(s)._setVisible(dc,!0);for(const s of t.off)c(this,fe).get(s)._setVisible(dc,!1);S(this,Hc,this.getHash())}}isVisible(t){if(c(this,fe).size===0)return!0;if(!t)return wy("Optional content group not defined."),!0;if(t.type==="OCG")return c(this,fe).has(t.id)?c(this,fe).get(t.id).visible:(It(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return T(this,zf,D0).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!c(this,fe).has(e))return It(`Optional content group not found: ${e}`),!0;if(c(this,fe).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!c(this,fe).has(e))return It(`Optional content group not found: ${e}`),!0;if(!c(this,fe).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!c(this,fe).has(e))return It(`Optional content group not found: ${e}`),!0;if(!c(this,fe).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!c(this,fe).has(e))return It(`Optional content group not found: ${e}`),!0;if(c(this,fe).get(e).visible)return!1}return!0}return It(`Unknown optional content policy ${t.policy}.`),!0}return It(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){var l;const a=c(this,fe).get(t);if(!a){It(`Optional content group not found: ${t}`);return}if(s&&e&&a.rbGroups.length)for(const o of a.rbGroups)for(const d of o)d!==t&&((l=c(this,fe).get(d))==null||l._setVisible(dc,!1,!0));a._setVisible(dc,!!e,!0),S(this,al,null)}setOCGState({state:t,preserveRB:e}){let s;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":s=a;continue}const l=c(this,fe).get(a);if(l)switch(s){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!l.visible,e);break}}S(this,al,null)}get hasInitialVisibility(){return c(this,Hc)===null||this.getHash()===c(this,Hc)}getOrder(){return c(this,fe).size?c(this,Bc)?c(this,Bc).slice():[...c(this,fe).keys()]:null}getGroups(){return c(this,fe).size>0?MA(c(this,fe)):null}getGroup(t){return c(this,fe).get(t)||null}getHash(){if(c(this,al)!==null)return c(this,al);const t=new Ax;for(const[e,s]of c(this,fe))t.update(`${e}:${s.visible}`);return S(this,al,t.hexdigest())}}al=new WeakMap,fe=new WeakMap,Hc=new WeakMap,Bc=new WeakMap,zf=new WeakSet,D0=function(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let a=1;a<e;a++){const l=t[a];let o;if(Array.isArray(l))o=T(this,zf,D0).call(this,l);else if(c(this,fe).has(l))o=c(this,fe).get(l).visible;else return It(`Optional content group not found: ${l}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class cL{constructor(t,{disableRange:e=!1,disableStream:s=!1}){Je(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:l,progressiveDone:o,contentDispositionFilename:d}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=d,(l==null?void 0:l.length)>0){const f=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((f,g)=>{this._onReceiveData({begin:f,chunk:g})}),t.addProgressListener((f,g)=>{this._onProgress({loaded:f,total:g})}),t.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const a=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(s),!0)});Je(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,s,a,l;t.total===void 0?(s=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||s.call(e,{loaded:t.loaded}):(l=(a=this._fullRequestReader)==null?void 0:a.onProgress)==null||l.call(a,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Je(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new hL(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new dL(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class hL{constructor(t,e,s=!1,a=null){this._stream=t,this._done=s||!1,this._filename=OA(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class dL{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function fL(h){let t=!0,e=s("filename\\*","i").exec(h);if(e){e=e[1];let m=d(e);return m=unescape(m),m=f(m),m=g(m),l(m)}if(e=o(h),e){const m=g(e);return l(m)}if(e=s("filename","i").exec(h),e){e=e[1];let m=d(e);return m=g(m),l(m)}function s(m,v){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function a(m,v){if(m){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const b=new TextDecoder(m,{fatal:!0}),A=Dg(v);v=b.decode(A),t=!1}catch{}}return v}function l(m){return t&&/[\x80-\xff]/.test(m)&&(m=a("utf-8",m),t&&(m=a("iso-8859-1",m))),m}function o(m){const v=[];let b;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(m))!==null;){let[,_,C,R]=b;if(_=parseInt(_,10),_ in v){if(_===0)break;continue}v[_]=[C,R]}const E=[];for(let _=0;_<v.length&&_ in v;++_){let[C,R]=v[_];R=d(R),C&&(R=unescape(R),_===0&&(R=f(R))),E.push(R)}return E.join("")}function d(m){if(m.startsWith('"')){const v=m.slice(1).split('\\"');for(let b=0;b<v.length;++b){const A=v[b].indexOf('"');A!==-1&&(v[b]=v[b].slice(0,A),v.length=b+1),v[b]=v[b].replaceAll(/\\(.)/g,"$1")}m=v.join('"')}return m}function f(m){const v=m.indexOf("'");if(v===-1)return m;const b=m.slice(0,v),E=m.slice(v+1).replace(/^[^']*'/,"");return a(b,E)}function g(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,b,A,E){if(A==="q"||A==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,C){return String.fromCharCode(parseInt(C,16))}),a(b,E);try{E=atob(E)}catch{}return a(b,E)})}return""}function Ox(h,t){const e=new Headers;if(!h||!t||typeof t!="object")return e;for(const s in t){const a=t[s];a!==void 0&&e.append(s,a)}return e}function _y(h){var t;return((t=URL.parse(h))==null?void 0:t.origin)??null}function Nx({responseHeaders:h,isHttp:t,rangeChunkSize:e,disableRange:s}){const a={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(h.get("Content-Length"),10);return!Number.isInteger(l)||(a.suggestedLength=l,l<=2*e)||s||!t||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function kx(h){const t=h.get("Content-Disposition");if(t){let e=fL(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(OA(e))return e}return null}function kg(h,t){return new Gm(`Unexpected server response (${h}) while retrieving PDF "${t}".`,h,h===404||h===0&&t.startsWith("file:"))}function Px(h){return h===200||h===206}function zx(h,t,e){return{method:"GET",headers:h,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Fx(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(It(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class f_{constructor(t){At(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Ox(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Je(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new gL(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new pL(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class gL{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),a=e.url;fetch(a,zx(s,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=_y(l.url),!Px(l.status))throw kg(l.status,a);this._reader=l.body.getReader(),this._headersCapability.resolve();const o=l.headers,{allowRangeRequests:d,suggestedLength:f}=Nx({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=f||this._contentLength,this._filename=kx(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Cl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Fx(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class pL{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${e}-${s-1}`);const o=a.url;fetch(o,zx(l,this._withCredentials,this._abortController)).then(d=>{const f=_y(d.url);if(f!==t._responseOrigin)throw new Error(`Expected range response-origin "${f}" to match "${t._responseOrigin}".`);if(!Px(d.status))throw kg(d.status,o);this._readCapability.resolve(),this._reader=d.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:Fx(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Kb=200,Wb=206;function mL(h){const t=h.response;return typeof t!="string"?t:Dg(t).buffer}class yL{constructor({url:t,httpHeaders:e,withCredentials:s}){At(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Ox(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,a=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[l,o]of this.headers)e.setRequestHeader(l,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=Wb):a.expectedStatus=Kb,e.responseType="arraybuffer",Je(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){var a;const s=this.pendingRequests[t];s&&((a=s.onProgress)==null||a.call(s,e))}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const a=s.xhr;if(a.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){s.onError(a.status);return}const l=a.status||Kb;if(!(l===Kb&&s.expectedStatus===Wb)&&l!==s.expectedStatus){s.onError(a.status);return}const d=mL(a);if(l===Wb){const f=a.getResponseHeader("Content-Range"),g=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);g?s.onDone({begin:parseInt(g[1],10),chunk:d}):(It('Missing or invalid "Content-Range" header.'),s.onError(0))}else d?s.onDone({begin:0,chunk:d}):s.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class vL{constructor(t){this._source=t,this._manager=new yL(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Je(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new bL(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new AL(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class bL{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=_y(e.responseURL);const s=e.getAllResponseHeaders(),a=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(d=>{const[f,...g]=d.split(": ");return[f,g.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:o}=Nx({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=kx(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=kg(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class AL{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=_y((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=kg(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const SL=/^[a-z][a-z0-9\-+.]+:/i;function wL(h){if(SL.test(h))return new URL(h);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(h))}class EL{constructor(t){this.source=t,this.url=wL(t.url),Je(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Je(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new _L(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new xL(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class _L{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=kg(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Cl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class xL{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const TL=1e5,g_=30;var v_,rl,cn,Ff,Hf,Fo,Xa,Bf,Uf,Ho,Uc,Ic,ll,jc,If,Gc,Bo,jf,Gf,qc,Uo,qf,ol,Vc,pr,Hx,Bx,L0,zn,bm,O0,Ux,Ix;const si=class si{constructor({textContentSource:t,container:e,viewport:s}){x(this,pr);x(this,rl,Promise.withResolvers());x(this,cn,null);x(this,Ff,!1);x(this,Hf,!!((v_=globalThis.FontInspector)!=null&&v_.enabled));x(this,Fo,null);x(this,Xa,null);x(this,Bf,0);x(this,Uf,0);x(this,Ho,null);x(this,Uc,null);x(this,Ic,0);x(this,ll,0);x(this,jc,Object.create(null));x(this,If,[]);x(this,Gc,null);x(this,Bo,[]);x(this,jf,new WeakMap);x(this,Gf,null);var f;if(t instanceof ReadableStream)S(this,Gc,t);else if(typeof t=="object")S(this,Gc,new ReadableStream({start(g){g.enqueue(t),g.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,cn,S(this,Uc,e)),S(this,ll,s.scale*gr.pixelRatio),S(this,Ic,s.rotation),S(this,Xa,{div:null,properties:null,ctx:null});const{pageWidth:a,pageHeight:l,pageX:o,pageY:d}=s.rawDims;S(this,Gf,[1,0,0,-1,-o,d+l]),S(this,Uf,a),S(this,Bf,l),T(f=si,zn,Ux).call(f),bu(e,s),c(this,rl).promise.finally(()=>{c(si,Vc).delete(this),S(this,Xa,null),S(this,jc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=ki.platform;return Zt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{c(this,Ho).read().then(({value:e,done:s})=>{if(s){c(this,rl).resolve();return}c(this,Fo)??S(this,Fo,e.lang),Object.assign(c(this,jc),e.styles),T(this,pr,Hx).call(this,e.items),t()},c(this,rl).reject)};return S(this,Ho,c(this,Gc).getReader()),c(si,Vc).add(this),t(),c(this,rl).promise}update({viewport:t,onBefore:e=null}){var l;const s=t.scale*gr.pixelRatio,a=t.rotation;if(a!==c(this,Ic)&&(e==null||e(),S(this,Ic,a),bu(c(this,Uc),{rotation:a})),s!==c(this,ll)){e==null||e(),S(this,ll,s);const o={div:null,properties:null,ctx:T(l=si,zn,bm).call(l,c(this,Fo))};for(const d of c(this,Bo))o.properties=c(this,jf).get(d),o.div=d,T(this,pr,L0).call(this,o)}}cancel(){var e;const t=new Cl("TextLayer task cancelled.");(e=c(this,Ho))==null||e.cancel(t).catch(()=>{}),S(this,Ho,null),c(this,rl).reject(t)}get textDivs(){return c(this,Bo)}get textContentItemsStr(){return c(this,If)}static cleanup(){if(!(c(this,Vc).size>0)){c(this,qc).clear();for(const{canvas:t}of c(this,Uo).values())t.remove();c(this,Uo).clear()}}};rl=new WeakMap,cn=new WeakMap,Ff=new WeakMap,Hf=new WeakMap,Fo=new WeakMap,Xa=new WeakMap,Bf=new WeakMap,Uf=new WeakMap,Ho=new WeakMap,Uc=new WeakMap,Ic=new WeakMap,ll=new WeakMap,jc=new WeakMap,If=new WeakMap,Gc=new WeakMap,Bo=new WeakMap,jf=new WeakMap,Gf=new WeakMap,qc=new WeakMap,Uo=new WeakMap,qf=new WeakMap,ol=new WeakMap,Vc=new WeakMap,pr=new WeakSet,Hx=function(t){var a,l;if(c(this,Ff))return;(l=c(this,Xa)).ctx??(l.ctx=T(a=si,zn,bm).call(a,c(this,Fo)));const e=c(this,Bo),s=c(this,If);for(const o of t){if(e.length>TL){It("Ignoring additional textDivs for performance reasons."),S(this,Ff,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const d=c(this,cn);S(this,cn,document.createElement("span")),c(this,cn).classList.add("markedContent"),o.id!==null&&c(this,cn).setAttribute("id",`${o.id}`),d.append(c(this,cn))}else o.type==="endMarkedContent"&&S(this,cn,c(this,cn).parentNode);continue}s.push(o.str),T(this,pr,Bx).call(this,o)}},Bx=function(t){var _;const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};c(this,Bo).push(e);const a=wt.transform(c(this,Gf),t.transform);let l=Math.atan2(a[1],a[0]);const o=c(this,jc)[t.fontName];o.vertical&&(l+=Math.PI/2);let d=c(this,Hf)&&o.fontSubstitution||o.fontFamily;d=si.fontFamilyMap.get(d)||d;const f=Math.hypot(a[2],a[3]),g=f*T(_=si,zn,Ix).call(_,d,o,c(this,Fo));let m,v;l===0?(m=a[4],v=a[5]-g):(m=a[4]+g*Math.sin(l),v=a[5]-g*Math.cos(l));const b="calc(var(--total-scale-factor) *",A=e.style;c(this,cn)===c(this,Uc)?(A.left=`${(100*m/c(this,Uf)).toFixed(2)}%`,A.top=`${(100*v/c(this,Bf)).toFixed(2)}%`):(A.left=`${b}${m.toFixed(2)}px)`,A.top=`${b}${v.toFixed(2)}px)`),A.fontSize=`${b}${(c(si,ol)*f).toFixed(2)}px)`,A.fontFamily=d,s.fontSize=f,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,c(this,Hf)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),l!==0&&(s.angle=l*(180/Math.PI));let E=!1;if(t.str.length>1)E=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const C=Math.abs(t.transform[0]),R=Math.abs(t.transform[3]);C!==R&&Math.max(C,R)/Math.min(C,R)>1.5&&(E=!0)}if(E&&(s.canvasWidth=o.vertical?t.height:t.width),c(this,jf).set(e,s),c(this,Xa).div=e,c(this,Xa).properties=s,T(this,pr,L0).call(this,c(this,Xa)),s.hasText&&c(this,cn).append(e),s.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),c(this,cn).append(C)}},L0=function(t){var d;const{div:e,properties:s,ctx:a}=t,{style:l}=e;let o="";if(c(si,ol)>1&&(o=`scale(${1/c(si,ol)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:f}=l,{canvasWidth:g,fontSize:m}=s;T(d=si,zn,O0).call(d,a,m*c(this,ll),f);const{width:v}=a.measureText(e.textContent);v>0&&(o=`scaleX(${g*c(this,ll)/v}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(l.transform=o)},zn=new WeakSet,bm=function(t=null){let e=c(this,Uo).get(t||(t=""));if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,Uo).set(t,e),c(this,qf).set(e,{size:0,family:""})}return e},O0=function(t,e,s){const a=c(this,qf).get(t);e===a.size&&s===a.family||(t.font=`${e}px ${s}`,a.size=e,a.family=s)},Ux=function(){if(c(this,ol)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),S(this,ol,t.getBoundingClientRect().height),t.remove()},Ix=function(t,e,s){const a=c(this,qc).get(t);if(a)return a;const l=T(this,zn,bm).call(this,s);l.canvas.width=l.canvas.height=g_,T(this,zn,O0).call(this,l,g_,t);const o=l.measureText(""),d=o.fontBoundingBoxAscent,f=Math.abs(o.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let g=.8;return d?g=d/(d+f):(ki.platform.isFirefox&&It("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?g=e.ascent:e.descent&&(g=1+e.descent)),c(this,qc).set(t,g),g},x(si,zn),x(si,qc,new Map),x(si,Uo,new Map),x(si,qf,new WeakMap),x(si,ol,null),x(si,Vc,new Set);let ef=si;class nf{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function a(l){var f;if(!l)return;let o=null;const d=l.name;if(d==="#text")o=l.value;else if(nf.shouldBuildText(d))(f=l==null?void 0:l.attributes)!=null&&f.textContent?o=l.attributes.textContent:l.value&&(o=l.value);else return;if(o!==null&&e.push({str:o}),!!l.children)for(const g of l.children)a(g)}return a(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const CL=65536,RL=100;function ML(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const t=new k0,{docId:e}=t,s=h.url?DL(h.url):null,a=h.data?LL(h.data):null,l=h.httpHeaders||null,o=h.withCredentials===!0,d=h.password??null,f=h.range instanceof jx?h.range:null,g=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:CL;let m=h.worker instanceof vc?h.worker:null;const v=h.verbosity,b=typeof h.docBaseUrl=="string"&&!Ey(h.docBaseUrl)?h.docBaseUrl:null,A=im(h.cMapUrl),E=h.cMapPacked!==!1,_=h.CMapReaderFactory||(Di?V2:t_),C=im(h.iccUrl),R=im(h.standardFontDataUrl),L=h.StandardFontDataFactory||(Di?Y2:e_),O=im(h.wasmUrl),P=h.WasmFactory||(Di?X2:i_),M=h.stopAtErrors!==!0,k=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,U=h.isEvalSupported!==!1,$=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!Di,G=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!Di&&(ki.platform.isFirefox||!globalThis.chrome),Z=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,it=typeof h.disableFontFace=="boolean"?h.disableFontFace:Di,Mt=h.fontExtraProperties===!0,Rt=h.enableXfa===!0,ht=h.ownerDocument||globalThis.document,St=h.disableRange===!0,Y=h.disableStream===!0,nt=h.disableAutoFetch===!0,dt=h.pdfBug===!0,Pt=h.CanvasFactory||(Di?q2:I2),z=h.FilterFactory||(Di?G2:j2),et=h.enableHWA===!0,lt=h.useWasm!==!1,rt=f?f.length:h.length??NaN,ot=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!Di&&!it,Ot=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:!!(_===t_&&L===e_&&P===i_&&A&&R&&O&&oc(A,document.baseURI)&&oc(R,document.baseURI)&&oc(O,document.baseURI)),Dt=null;b2(v);const qt={canvasFactory:new Pt({ownerDocument:ht,enableHWA:et}),filterFactory:new z({docId:e,ownerDocument:ht}),cMapReaderFactory:Ot?null:new _({baseUrl:A,isCompressed:E}),standardFontDataFactory:Ot?null:new L({baseUrl:R}),wasmFactory:Ot?null:new P({baseUrl:O})};if(!m){const Wt={verbosity:v,port:cr.workerPort};m=Wt.port?vc.fromPort(Wt):new vc(Wt),t._worker=m}const ie={docId:e,apiVersion:"5.1.91",data:a,password:d,disableAutoFetch:nt,rangeChunkSize:g,length:rt,docBaseUrl:b,enableXfa:Rt,evaluatorOptions:{maxImageSize:k,disableFontFace:it,ignoreErrors:M,isEvalSupported:U,isOffscreenCanvasSupported:$,isImageDecoderSupported:G,canvasMaxAreaInBytes:Z,fontExtraProperties:Mt,useSystemFonts:ot,useWasm:lt,useWorkerFetch:Ot,cMapUrl:A,iccUrl:C,standardFontDataUrl:R,wasmUrl:O}},Xt={ownerDocument:ht,pdfBug:dt,styleElement:Dt,loadingParams:{disableAutoFetch:nt,enableXfa:Rt}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Wt=m.messageHandler.sendWithPromise("GetDocRequest",ie,a?[a.buffer]:null);let Ai;if(f)Ai=new cL(f,{disableRange:St,disableStream:Y});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");let en;if(Di)if(oc(s)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");en=f_}else en=EL;else en=oc(s)?f_:vL;Ai=new en({url:s,length:rt,httpHeaders:l,withCredentials:o,rangeChunkSize:g,disableRange:St,disableStream:Y})}return Wt.then(en=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ei=new Bd(e,en,m.port),mr=new FL(ei,t,Ai,Xt,qt);t._transport=mr,ei.send("Ready",null)})}).catch(t._capability.reject),t}function DL(h){if(h instanceof URL)return h.href;if(typeof h=="string"){if(Di)return h;const t=URL.parse(h,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function LL(h){if(Di&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return Dg(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h==null?void 0:h.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function im(h){if(typeof h!="string")return null;if(h.endsWith("/"))return h;throw new Error(`Invalid factory url: "${h}" must include trailing slash.`)}const N0=h=>typeof h=="object"&&Number.isInteger(h==null?void 0:h.num)&&h.num>=0&&Number.isInteger(h==null?void 0:h.gen)&&h.gen>=0,OL=h=>typeof h=="object"&&typeof(h==null?void 0:h.name)=="string",NL=M2.bind(null,N0,OL);var ay;const ry=class ry{constructor(){At(this,"_capability",Promise.withResolvers());At(this,"_transport",null);At(this,"_worker",null);At(this,"docId",`d${Xi(ry,ay)._++}`);At(this,"destroyed",!1);At(this,"onPassword",null);At(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,s,a;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(l){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,l}this._transport=null,(a=this._worker)==null||a.destroy(),this._worker=null}async getData(){return this._transport.getData()}};ay=new WeakMap,x(ry,ay,0);let k0=ry;class jx{constructor(t,e,s=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const s of this._rangeListeners)s(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){ye("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class kL{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Zt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var $a,Io,qd;class PL{constructor(t,e,s,a=!1){x(this,Io);x(this,$a,!1);this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=a?new Q1:null,this._pdfBug=a,this.commonObjs=s.commonObjs,this.objs=new Gx,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:a=0,dontFlip:l=!1}={}){return new Og({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:a,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Zt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:a=Gr.ENABLE,transform:l=null,background:o=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:m=null,isEditing:v=!1}){var P,M;(P=this._stats)==null||P.time("Overall");const b=this._transport.getRenderingIntent(s,a,m,v),{renderingIntent:A,cacheKey:E}=b;S(this,$a,!1),d||(d=this._transport.getOptionalContentConfig(A));let _=this._intentStates.get(E);_||(_=Object.create(null),this._intentStates.set(E,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const C=!!(A&Nn.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(M=this._stats)==null||M.time("Page Request"),this._pumpOperatorList(b));const R=k=>{var U;_.renderTasks.delete(L),C&&S(this,$a,!0),T(this,Io,qd).call(this),k?(L.capability.reject(k),this._abortOperatorList({intentState:_,reason:k instanceof Error?k:new Error(k)})):L.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(U=globalThis.Stats)!=null&&U.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},L=new z0({callback:R,params:{canvasContext:t,viewport:e,transform:l,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:g});(_.renderTasks||(_.renderTasks=new Set)).add(L);const O=L.task;return Promise.all([_.displayReadyCapability.promise,d]).then(([k,U])=>{var $;if(this.destroyed){R();return}if(($=this._stats)==null||$.time("Rendering"),!(U.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");L.initializeGraphics({transparency:k,optionalContentConfig:U}),L.operatorListChanged()}).catch(R),O}getOperatorList({intent:t="display",annotationMode:e=Gr.ENABLE,printAnnotationStorage:s=null,isEditing:a=!1}={}){var g;function l(){d.operatorList.lastChunk&&(d.opListReadCapability.resolve(d.operatorList),d.renderTasks.delete(f))}const o=this._transport.getRenderingIntent(t,e,s,a,!0);let d=this._intentStates.get(o.cacheKey);d||(d=Object.create(null),this._intentStates.set(o.cacheKey,d));let f;return d.opListReadCapability||(f=Object.create(null),f.operatorListChanged=l,d.opListReadCapability=Promise.withResolvers(),(d.renderTasks||(d.renderTasks=new Set)).add(f),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(g=this._stats)==null||g.time("Page Request"),this._pumpOperatorList(o)),d.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>nf.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,a){function l(){o.read().then(function({value:f,done:g}){if(g){s(d);return}d.lang??(d.lang=f.lang),Object.assign(d.styles,f.styles),d.items.push(...f.items),l()},a)}const o=e.getReader(),d={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),S(this,$a,!1),Promise.all(t)}cleanup(t=!1){S(this,$a,!0);const e=T(this,Io,qd).call(this);return t&&e&&this._stats&&(this._stats=new Q1),e}_startRenderPage(t,e){var a,l;const s=this._intentStates.get(e);s&&((a=this._stats)==null||a.timeEnd("Page Request"),(l=s.displayReadyCapability)==null||l.resolve(t))}_renderPageChunk(t,e){for(let s=0,a=t.length;s<a;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&T(this,Io,qd).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:a}){const{map:l,transfer:o}=s,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:l,modifiedIds:a},o).getReader(),g=this._intentStates.get(e);g.streamReader=f;const m=()=>{f.read().then(({value:v,done:b})=>{if(b){g.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(v,g),m())},v=>{if(g.streamReader=null,!this._transport.destroyed){if(g.operatorList){g.operatorList.lastChunk=!0;for(const b of g.renderTasks)b.operatorListChanged();T(this,Io,qd).call(this)}if(g.displayReadyCapability)g.displayReadyCapability.reject(v);else if(g.opListReadCapability)g.opListReadCapability.reject(v);else throw v}})};m()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof LA){let a=RL;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new Cl(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,l]of this._intentStates)if(l===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}$a=new WeakMap,Io=new WeakSet,qd=function(){if(!c(this,$a)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,$a,!1),!0};var Ka,ly;class zL{constructor(){x(this,Ka,new Map);x(this,ly,Promise.resolve())}postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};c(this,ly).then(()=>{for(const[a]of c(this,Ka))a.call(this,s)})}addEventListener(t,e,s=null){let a=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:l}=s;if(l.aborted){It("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);a=()=>l.removeEventListener("abort",o),l.addEventListener("abort",o)}c(this,Ka).set(e,a)}removeEventListener(t,e){const s=c(this,Ka).get(e);s==null||s(),c(this,Ka).delete(e)}terminate(){for(const[,t]of c(this,Ka))t==null||t();c(this,Ka).clear()}}Ka=new WeakMap,ly=new WeakMap;var oy,jo,Go,Yc,Am,Xc,Sm;const Te=class Te{constructor({name:t=null,port:e=null,verbosity:s=A2()}={}){x(this,Yc);var a;if(this.name=t,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((a=c(Te,Go))!=null&&a.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(c(Te,Go)||S(Te,Go,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Bd("main","worker",t),this._messageHandler.on("ready",function(){}),T(this,Yc,Am).call(this)}_initialize(){if(c(Te,jo)||c(Te,Xc,Sm)){this._setupFakeWorker();return}let{workerSrc:t}=Te;try{Te._isSameOrigin(window.location,t)||(t=Te._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new Bd("main","worker",e),a=()=>{l.abort(),s.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},l=new AbortController;e.addEventListener("error",()=>{this._webWorker||a()},{signal:l.signal}),s.on("test",d=>{if(l.abort(),this.destroyed||!d){a();return}this._messageHandler=s,this._port=e,this._webWorker=e,T(this,Yc,Am).call(this)}),s.on("ready",d=>{if(l.abort(),this.destroyed){a();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const d=new Uint8Array;s.send("test",d,[d.buffer])};o();return}catch{wy("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){c(Te,jo)||(It("Setting up fake worker."),S(Te,jo,!0)),Te._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new zL;this._port=e;const s=`fake${Xi(Te,oy)._++}`,a=new Bd(s+"_worker",s,e);t.setup(a,e),this._messageHandler=new Bd(s,s+"_worker",e),T(this,Yc,Am).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,s;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=c(Te,Go))==null||e.delete(this._port),this._port=null,(s=this._messageHandler)==null||s.destroy(),this._messageHandler=null}static fromPort(t){var s;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(s=c(this,Go))==null?void 0:s.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Te(t)}static get workerSrc(){if(cr.workerSrc)return cr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Zt(this,"_setupFakeWorkerGlobal",(async()=>c(this,Xc,Sm)?c(this,Xc,Sm):(await import(this.workerSrc)).WorkerMessageHandler)())}};oy=new WeakMap,jo=new WeakMap,Go=new WeakMap,Yc=new WeakSet,Am=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Xc=new WeakSet,Sm=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},x(Te,Xc),x(Te,oy,0),x(Te,jo,!1),x(Te,Go),Di&&(S(Te,jo,!0),cr.workerSrc||(cr.workerSrc="./pdf.worker.mjs")),Te._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const a=new URL(e,s);return s.origin===a.origin},Te._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let vc=Te;var Wa,ea,$c,Kc,Qa,qo,Vd;class FL{constructor(t,e,s,a,l){x(this,qo);x(this,Wa,new Map);x(this,ea,new Map);x(this,$c,new Map);x(this,Kc,new Map);x(this,Qa,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Gx,this.fontLoader=new B2({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Zt(this,"annotationStorage",new zA)}getRenderingIntent(t,e=Gr.ENABLE,s=null,a=!1,l=!1){let o=Nn.DISPLAY,d=w0;switch(t){case"any":o=Nn.ANY;break;case"display":break;case"print":o=Nn.PRINT;break;default:It(`getRenderingIntent - invalid intent: ${t}`)}const f=o&Nn.PRINT&&s instanceof wx?s:this.annotationStorage;switch(e){case Gr.DISABLE:o+=Nn.ANNOTATIONS_DISABLE;break;case Gr.ENABLE:break;case Gr.ENABLE_FORMS:o+=Nn.ANNOTATIONS_FORMS;break;case Gr.ENABLE_STORAGE:o+=Nn.ANNOTATIONS_STORAGE,d=f.serializable;break;default:It(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(o+=Nn.IS_EDITING),l&&(o+=Nn.OPLIST);const{ids:g,hash:m}=f.modifiedIds,v=[o,d.hash,m];return{renderingIntent:o,cacheKey:v.join("_"),annotationStorageSerializable:d,modifiedIds:g}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=c(this,Qa))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const a of c(this,ea).values())t.push(a._destroy());c(this,ea).clear(),c(this,$c).clear(),c(this,Kc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var a,l;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Wa).clear(),this.filterFactory.destroy(),ef.cleanup(),(a=this._networkStream)==null||a.cancelAllRequests(new Cl("Worker was terminated.")),(l=this.messageHandler)==null||l.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,a)=>{Je(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},a.onPull=()=>{this._fullReader.read().then(function({value:l,done:o}){if(o){a.close();return}Je(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{this._fullReader.cancel(l),a.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async s=>{var d;await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:l,contentLength:o}=this._fullReader;return(!a||!l)&&(this._lastProgress&&((d=e.onProgress)==null||d.call(e,this._lastProgress)),this._fullReader.onProgress=f=>{var g;(g=e.onProgress)==null||g.call(e,{loaded:f.loaded,total:f.total})}),{isStreamingSupported:a,isRangeSupported:l,contentLength:o}}),t.on("GetRangeReader",(s,a)=>{Je(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(s.begin,s.end);if(!l){a.close();return}a.onPull=()=>{l.read().then(function({value:o,done:d}){if(d){a.close();return}Je(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{l.cancel(o),a.ready.catch(d=>{if(!this.destroyed)throw d})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new kL(s,this))}),t.on("DocException",s=>{e._capability.reject(ln(s))}),t.on("PasswordRequest",s=>{S(this,Qa,Promise.withResolvers());try{if(!e.onPassword)throw ln(s);const a=l=>{l instanceof Error?c(this,Qa).reject(l):c(this,Qa).resolve({password:l})};e.onPassword(a,s.code)}catch(a){c(this,Qa).reject(a)}return c(this,Qa).promise}),t.on("DataLoaded",s=>{var a;(a=e.onProgress)==null||a.call(e,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;c(this,ea).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,a,l])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(a){case"Font":if("error"in l){const m=l.error;It(`Error during font loading: ${m}`),this.commonObjs.resolve(s,m);break}const d=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(m,v)=>globalThis.FontInspector.fontAdded(m,v):null,f=new U2(l,d);this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!f.fontExtraProperties&&f.data&&(f.data=null),this.commonObjs.resolve(s,f)});break;case"CopyLocalImage":const{imageRef:g}=l;Je(g,"The imageRef must be defined.");for(const m of c(this,ea).values())for(const[,v]of m.objs)if((v==null?void 0:v.ref)===g)return v.dataLen?(this.commonObjs.resolve(s,structuredClone(v)),v.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,l);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([s,a,l,o])=>{var f;if(this.destroyed)return;const d=c(this,ea).get(a);if(!d.objs.has(s)){if(d._intentStates.size===0){(f=o==null?void 0:o.bitmap)==null||f.close();return}switch(l){case"Image":case"Pattern":d.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",s=>{var a;this.destroyed||(a=e.onProgress)==null||a.call(e,{loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[s.type];if(!a)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&It("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((s=this._fullReader)==null?void 0:s.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=c(this,$c).get(e);if(s)return s;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&c(this,Kc).set(l.refStr,t);const o=new PL(e,l,this,this._params.pdfBug);return c(this,ea).set(e,o),o});return c(this,$c).set(e,a),a}getPageIndex(t){return N0(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return T(this,qo,Vd).call(this,"GetFieldObjects")}hasJSActions(){return T(this,qo,Vd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return T(this,qo,Vd).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return T(this,qo,Vd).call(this,"GetOptionalContentConfig").then(e=>new uL(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=c(this,Wa).get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(a=>{var l,o;return{info:a[0],metadata:a[1]?new lL(a[1]):null,contentDispositionFilename:((l=this._fullReader)==null?void 0:l.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return c(this,Wa).set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of c(this,ea).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),c(this,Wa).clear(),this.filterFactory.destroy(!0),ef.cleanup()}}cachedPageNumber(t){if(!N0(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return c(this,Kc).get(e)??null}}Wa=new WeakMap,ea=new WeakMap,$c=new WeakMap,Kc=new WeakMap,Qa=new WeakMap,qo=new WeakSet,Vd=function(t,e=null){const s=c(this,Wa).get(t);if(s)return s;const a=this.messageHandler.sendWithPromise(t,e);return c(this,Wa).set(t,a),a};const Dd=Symbol("INITIAL_DATA");var En,Vf,P0;class Gx{constructor(){x(this,Vf);x(this,En,Object.create(null))}get(t,e=null){if(e){const a=T(this,Vf,P0).call(this,t);return a.promise.then(()=>e(a.data)),null}const s=c(this,En)[t];if(!s||s.data===Dd)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=c(this,En)[t];return!!e&&e.data!==Dd}delete(t){const e=c(this,En)[t];return!e||e.data===Dd?!1:(delete c(this,En)[t],!0)}resolve(t,e=null){const s=T(this,Vf,P0).call(this,t);s.data=e,s.resolve()}clear(){var t;for(const e in c(this,En)){const{data:s}=c(this,En)[e];(t=s==null?void 0:s.bitmap)==null||t.close()}S(this,En,Object.create(null))}*[Symbol.iterator](){for(const t in c(this,En)){const{data:e}=c(this,En)[t];e!==Dd&&(yield[t,e])}}}En=new WeakMap,Vf=new WeakSet,P0=function(t){var e;return(e=c(this,En))[t]||(e[t]={...Promise.withResolvers(),data:Dd})};var ul;class HL{constructor(t){x(this,ul,null);At(this,"onContinue",null);At(this,"onError",null);S(this,ul,t)}get promise(){return c(this,ul).capability.promise}cancel(t=0){c(this,ul).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=c(this,ul).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=c(this,ul);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}ul=new WeakMap;var cl,Vo;const uo=class uo{constructor({callback:t,params:e,objs:s,commonObjs:a,annotationCanvasMap:l,operatorList:o,pageIndex:d,canvasFactory:f,filterFactory:g,useRequestAnimationFrame:m=!1,pdfBug:v=!1,pageColors:b=null}){x(this,cl,null);this.callback=t,this.params=e,this.objs=s,this.commonObjs=a,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=d,this.canvasFactory=f,this.filterFactory=g,this._pdfBug=v,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new HL(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var d,f;if(this.cancelled)return;if(this._canvas){if(c(uo,Vo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(uo,Vo).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:a,transform:l,background:o}=this.params;this.gfx=new yc(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:a,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var s,a,l;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),c(this,cl)&&(window.cancelAnimationFrame(c(this,cl)),S(this,cl,null)),c(uo,Vo).delete(this._canvas),t||(t=new LA(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(l=(a=this.task).onError)==null||l.call(a,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,cl,window.requestAnimationFrame(()=>{S(this,cl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(uo,Vo).delete(this._canvas),this.callback())))}};cl=new WeakMap,Vo=new WeakMap,x(uo,Vo,new WeakSet);let z0=uo;const BL="5.1.91",UL="45cbe8bb0";function p_(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function Ld(h){return Math.max(0,Math.min(255,255*h))}class m_{static CMYK_G([t,e,s,a]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Ld(t),[t,t,t]}static G_HTML([t]){const e=p_(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(Ld)}static RGB_HTML(t){return`#${t.map(p_).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,s+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,s,a]){return[Ld(1-Math.min(1,t+a)),Ld(1-Math.min(1,s+a)),Ld(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const a=1-t,l=1-e,o=1-s,d=Math.min(a,l,o);return["CMYK",a,l,o,d]}}class IL{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),s||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ye("Abstract method `_createSVG` called.")}}class Ym extends IL{_createSVG(t){return document.createElementNS(Oa,t)}}class qx{static setupStorage(t,e,s,a,l){const o=a.getValue(e,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),l==="print")break;t.addEventListener("input",d=>{a.setValue(e,{value:d.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?t.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",d=>{a.setValue(e,{value:d.target.checked?d.target.getAttribute("xfaOn"):d.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),l==="print")break;t.addEventListener("input",d=>{a.setValue(e,{value:d.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const d of s.children)d.attributes.value===o.value?d.attributes.selected=!0:d.attributes.hasOwnProperty("selected")&&delete d.attributes.selected}t.addEventListener("input",d=>{const f=d.target.options,g=f.selectedIndex===-1?"":f[f.selectedIndex].value;a.setValue(e,{value:g})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:a,linkService:l}){const{attributes:o}=e,d=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${a}`);for(const[f,g]of Object.entries(o))if(g!=null)switch(f){case"class":g.length&&t.setAttribute(f,g.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",g);break;case"style":Object.assign(t.style,g);break;case"textContent":t.textContent=g;break;default:(!d||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,g)}d&&l.addLinkAttributes(t,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(t,o.dataId,e,s)}static render(t){var v,b;const e=t.annotationStorage,s=t.linkService,a=t.xfaHtml,l=t.intent||"display",o=document.createElement(a.name);a.attributes&&this.setAttributes({html:o,element:a,intent:l,linkService:s});const d=l!=="richText",f=t.div;if(f.append(o),t.viewport){const A=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=A}d&&f.setAttribute("class","xfaLayer xfaFont");const g=[];if(a.children.length===0){if(a.value){const A=document.createTextNode(a.value);o.append(A),d&&nf.shouldBuildText(a.name)&&g.push(A)}return{textDivs:g}}const m=[[a,-1,o]];for(;m.length>0;){const[A,E,_]=m.at(-1);if(E+1===A.children.length){m.pop();continue}const C=A.children[++m.at(-1)[1]];if(C===null)continue;const{name:R}=C;if(R==="#text"){const O=document.createTextNode(C.value);g.push(O),_.append(O);continue}const L=(v=C==null?void 0:C.attributes)!=null&&v.xmlns?document.createElementNS(C.attributes.xmlns,R):document.createElement(R);if(_.append(L),C.attributes&&this.setAttributes({html:L,element:C,storage:e,intent:l,linkService:s}),((b=C.children)==null?void 0:b.length)>0)m.push([C,-1,L]);else if(C.value){const O=document.createTextNode(C.value);d&&nf.shouldBuildText(R)&&g.push(O),L.append(O)}}for(const A of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:g}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Pg=1e3,jL=9,Su=new WeakSet;class y_{static create(t){switch(t.data.annotationType){case Qe.LINK:return new Vx(t);case Qe.TEXT:return new GL(t);case Qe.WIDGET:switch(t.data.fieldType){case"Tx":return new qL(t);case"Btn":return t.data.radioButton?new $x(t):t.data.checkBox?new YL(t):new XL(t);case"Ch":return new $L(t);case"Sig":return new VL(t)}return new _u(t);case Qe.POPUP:return new H0(t);case Qe.FREETEXT:return new Jx(t);case Qe.LINE:return new WL(t);case Qe.SQUARE:return new QL(t);case Qe.CIRCLE:return new ZL(t);case Qe.POLYLINE:return new tT(t);case Qe.CARET:return new tO(t);case Qe.INK:return new BA(t);case Qe.POLYGON:return new JL(t);case Qe.HIGHLIGHT:return new eT(t);case Qe.UNDERLINE:return new eO(t);case Qe.SQUIGGLY:return new iO(t);case Qe.STRIKEOUT:return new nO(t);case Qe.STAMP:return new iT(t);case Qe.FILEATTACHMENT:return new sO(t);default:return new Ve(t)}}}var Yo,Wc,Qc,Yf,F0;const VA=class VA{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:a=!1}={}){x(this,Yf);x(this,Yo,null);x(this,Wc,!1);x(this,Qc,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),a&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:s}){return!!(t!=null&&t.str||e!=null&&e.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return VA._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;c(this,Yo)||S(this,Yo,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&T(this,Yf,F0).call(this,e),(s=c(this,Qc))==null||s.popup.updateEdited(t)}resetEdited(){var t;c(this,Yo)&&(T(this,Yf,F0).call(this,c(this,Yo).rect),(t=c(this,Qc))==null||t.popup.resetEdited(),S(this,Yo,null))}_createContainer(t){const{data:e,parent:{page:s,viewport:a}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",e.id),this instanceof _u||(l.tabIndex=Pg);const{style:o}=l;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(l.title=e.alternativeText),e.noRotate&&l.classList.add("norotate"),!e.rect||this instanceof H0){const{rotation:_}=e;return!e.hasOwnCanvas&&_!==0&&this.setRotation(_,l),l}const{width:d,height:f}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const _=e.borderStyle.horizontalCornerRadius,C=e.borderStyle.verticalCornerRadius;if(_>0||C>0){const L=`calc(${_}px * var(--total-scale-factor)) / calc(${C}px * var(--total-scale-factor))`;o.borderRadius=L}else if(this instanceof $x){const L=`calc(${d}px * var(--total-scale-factor)) / calc(${f}px * var(--total-scale-factor))`;o.borderRadius=L}switch(e.borderStyle.style){case lc.SOLID:o.borderStyle="solid";break;case lc.DASHED:o.borderStyle="dashed";break;case lc.BEVELED:It("Unimplemented border style: beveled");break;case lc.INSET:It("Unimplemented border style: inset");break;case lc.UNDERLINE:o.borderBottomStyle="solid";break}const R=e.borderColor||null;R?(S(this,Wc,!0),o.borderColor=wt.makeHexColor(R[0]|0,R[1]|0,R[2]|0)):o.borderWidth=0}const g=wt.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:m,pageHeight:v,pageX:b,pageY:A}=a.rawDims;o.left=`${100*(g[0]-b)/m}%`,o.top=`${100*(g[1]-A)/v}%`;const{rotation:E}=e;return e.hasOwnCanvas||E===0?(o.width=`${100*d/m}%`,o.height=`${100*f/v}%`):this.setRotation(E,l),l}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:a}=this.parent.viewport.rawDims;let{width:l,height:o}=this;t%180!==0&&([l,o]=[o,l]),e.style.width=`${100*l/s}%`,e.style.height=`${100*o/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,a)=>{const l=a.detail[e],o=l[0],d=l.slice(1);a.target.style[s]=m_[`${o}_HTML`](d),this.annotationStorage.setValue(this.data.id,{[s]:m_[`${o}_rgb`](d)})};return Zt(this,"_commonActions",{display:e=>{const{display:s}=e.detail,a=s%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const a of Object.keys(e.detail)){const l=t[a]||s[a];l==null||l(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[a,l]of Object.entries(e)){const o=s[a];if(o){const d={detail:{[a]:l},target:t};o(d),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,a,l]=this.data.rect.map(_=>Math.fround(_));if(t.length===8){const[_,C,R,L]=t.subarray(2,6);if(a===_&&l===C&&e===R&&s===L)return}const{style:o}=this.container;let d;if(c(this,Wc)){const{borderColor:_,borderWidth:C}=o;o.borderWidth=0,d=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const f=a-e,g=l-s,{svgFactory:m}=this,v=m.createElement("svg");v.classList.add("quadrilateralsContainer"),v.setAttribute("width",0),v.setAttribute("height",0);const b=m.createElement("defs");v.append(b);const A=m.createElement("clipPath"),E=`clippath_${this.data.id}`;A.setAttribute("id",E),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let _=2,C=t.length;_<C;_+=8){const R=t[_],L=t[_+1],O=t[_+2],P=t[_+3],M=m.createElement("rect"),k=(O-e)/f,U=(l-L)/g,$=(R-O)/f,G=(L-P)/g;M.setAttribute("x",k),M.setAttribute("y",U),M.setAttribute("width",$),M.setAttribute("height",G),A.append(M),d==null||d.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${U}" width="${$}" height="${G}"/>`)}c(this,Wc)&&(d.push("</g></svg>')"),o.backgroundImage=d.join("")),this.container.append(v),this.container.style.clipPath=`url(#${E})`}_createPopup(){const{data:t}=this,e=S(this,Qc,new H0({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){ye("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:l,id:o,exportValues:d}of a){if(l===-1||o===e)continue;const f=typeof d=="string"?d:null,g=document.querySelector(`[data-element-id="${o}"]`);if(g&&!Su.has(g)){It(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:f,domElement:g})}return s}for(const a of document.getElementsByName(t)){const{exportValue:l}=a,o=a.getAttribute("data-element-id");o!==e&&Su.has(a)&&s.push({id:o,exportValue:l,domElement:a})}return s}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Yo=new WeakMap,Wc=new WeakMap,Qc=new WeakMap,Yf=new WeakSet,F0=function(t){const{container:{style:e},data:{rect:s,rotation:a},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:o,pageX:d,pageY:f}}}}=this;s==null||s.splice(0,4,...t),e.left=`${100*(t[0]-d)/l}%`,e.top=`${100*(o-t[3]+f)/o}%`,a===0?(e.width=`${100*(t[2]-t[0])/l}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(a)};let Ve=VA;var Pn,so,Yx,Xx;class Vx extends Ve{constructor(e,s=null){super(e,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});x(this,Pn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:s}=this,a=document.createElement("a");a.setAttribute("data-element-id",e.id);let l=!1;return e.url?(s.addLinkAttributes(a,e.url,e.newWindow),l=!0):e.action?(this._bindNamedAction(a,e.action),l=!0):e.attachment?(T(this,Pn,Yx).call(this,a,e.attachment,e.attachmentDest),l=!0):e.setOCGState?(T(this,Pn,Xx).call(this,a,e.setOCGState),l=!0):e.dest?(this._bindLink(a,e.dest),l=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(a,e),l=!0),e.resetForm?(this._bindResetFormAction(a,e.resetForm),l=!0):this.isTooltipOnly&&!l&&(this._bindLink(a,""),l=!0)),this.container.classList.add("linkAnnotation"),l&&this.container.append(a),this.container}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&T(this,Pn,so).call(this)}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),T(this,Pn,so).call(this)}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const l of Object.keys(s.actions)){const o=a.get(l);o&&(e[o]=()=>{var d;return(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:l}}),!1})}e.onclick||(e.onclick=()=>!1),T(this,Pn,so).call(this)}_bindResetFormAction(e,s){const a=e.onclick;if(a||(e.href=this.linkService.getAnchorUrl("")),T(this,Pn,so).call(this),!this._fieldObjects){It('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),a||(e.onclick=()=>!1);return}e.onclick=()=>{var v;a==null||a();const{fields:l,refs:o,include:d}=s,f=[];if(l.length!==0||o.length!==0){const b=new Set(o);for(const A of l){const E=this._fieldObjects[A]||[];for(const{id:_}of E)b.add(_)}for(const A of Object.values(this._fieldObjects))for(const E of A)b.has(E.id)===d&&f.push(E)}else for(const b of Object.values(this._fieldObjects))f.push(...b);const g=this.annotationStorage,m=[];for(const b of f){const{id:A}=b;switch(m.push(A),b.type){case"text":{const _=b.defaultValue||"";g.setValue(A,{value:_});break}case"checkbox":case"radiobutton":{const _=b.defaultValue===b.exportValues;g.setValue(A,{value:_});break}case"combobox":case"listbox":{const _=b.defaultValue||"";g.setValue(A,{value:_});break}default:continue}const E=document.querySelector(`[data-element-id="${A}"]`);if(E){if(!Su.has(E)){It(`_bindResetFormAction - element not allowed: ${A}`);continue}}else continue;E.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}Pn=new WeakSet,so=function(){this.container.setAttribute("data-internal-link","")},Yx=function(e,s,a=null){e.href=this.linkService.getAnchorUrl(""),s.description&&(e.title=s.description),e.onclick=()=>{var l;return(l=this.downloadManager)==null||l.openOrDownloadData(s.content,s.filename,a),!1},T(this,Pn,so).call(this)},Xx=function(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(s),!1),T(this,Pn,so).call(this)};class GL extends Ve{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class _u extends Ve{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ki.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,a,l){s.includes("mouse")?t.addEventListener(s,o=>{var d;(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(s,o=>{var d;if(s==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}l&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(o)}}))})}_setEventListeners(t,e,s,a){var l,o,d;for(const[f,g]of s)(g==="Action"||(l=this.data.actions)!=null&&l[g])&&((g==="Focus"||g==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,f,g,a),g==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):g==="Blur"&&!((d=this.data.actions)!=null&&d.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":wt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||jL,l=t.style;let o;const d=2,f=g=>Math.round(10*g)/10;if(this.data.multiLine){const g=Math.abs(this.data.rect[3]-this.data.rect[1]-d),m=Math.round(g/(Gb*a))||1,v=g/m;o=Math.min(a,f(v/Gb))}else{const g=Math.abs(this.data.rect[3]-this.data.rect[1]-d);o=Math.min(a,f(g/Gb))}l.fontSize=`calc(${o}px * var(--total-scale-factor))`,l.color=wt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(l.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class qL extends _u{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,a){const l=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=s),l.setValue(o.id,{[a]:s})}render(){var a,l;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let d=o.value||"";const f=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;f&&d.length>f&&(d=d.slice(0,f));let g=o.formattedValue||((a=this.data.textContent)==null?void 0:a.join(`
`))||null;g&&this.data.comb&&(g=g.replaceAll(/\s+/g,""));const m={userValue:d,formattedValue:g,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=g??d,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",g??d),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Su.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=Pg,this._setRequired(s,this.data.required),f&&(s.maxLength=f),s.addEventListener("input",b=>{t.setValue(e,{value:b.target.value}),this.setPropertyOnSiblings(s,"value",b.target.value,"value"),m.formattedValue=null}),s.addEventListener("resetform",b=>{const A=this.data.defaultFieldValue??"";s.value=m.userValue=A,m.formattedValue=null});let v=b=>{const{formattedValue:A}=m;A!=null&&(b.target.value=A),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",A=>{var _;if(m.focused)return;const{target:E}=A;m.userValue&&(E.value=m.userValue),m.lastCommittedValue=E.value,m.commitKey=1,(_=this.data.actions)!=null&&_.Focus||(m.focused=!0)}),s.addEventListener("updatefromsandbox",A=>{this.showElementAndHideCanvas(A.target);const E={value(_){m.userValue=_.detail.value??"",t.setValue(e,{value:m.userValue.toString()}),_.target.value=m.userValue},formattedValue(_){const{formattedValue:C}=_.detail;m.formattedValue=C,C!=null&&_.target!==document.activeElement&&(_.target.value=C),t.setValue(e,{formattedValue:C})},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{var O;const{charLimit:C}=_.detail,{target:R}=_;if(C===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",C);let L=m.userValue;!L||L.length<=C||(L=L.slice(0,C),R.value=m.userValue=L,t.setValue(e,{value:L}),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:L,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(E,A)}),s.addEventListener("keydown",A=>{var C;m.commitKey=1;let E=-1;if(A.key==="Escape"?E=0:A.key==="Enter"&&!this.data.multiLine?E=2:A.key==="Tab"&&(m.commitKey=3),E===-1)return;const{value:_}=A.target;m.lastCommittedValue!==_&&(m.lastCommittedValue=_,m.userValue=_,(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:E,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}))});const b=v;v=null,s.addEventListener("blur",A=>{var _,C;if(!m.focused||!A.relatedTarget)return;(_=this.data.actions)!=null&&_.Blur||(m.focused=!1);const{value:E}=A.target;m.userValue=E,m.lastCommittedValue!==E&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:m.commitKey,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}})),b(A)}),(l=this.data.actions)!=null&&l.Keystroke&&s.addEventListener("beforeinput",A=>{var M;m.lastCommittedValue=null;const{data:E,target:_}=A,{value:C,selectionStart:R,selectionEnd:L}=_;let O=R,P=L;switch(A.inputType){case"deleteWordBackward":{const k=C.substring(0,R).match(/\w*[^\w]*$/);k&&(O-=k[0].length);break}case"deleteWordForward":{const k=C.substring(R).match(/^[^\w]*\w*/);k&&(P+=k[0].length);break}case"deleteContentBackward":R===L&&(O-=1);break;case"deleteContentForward":R===L&&(P+=1);break}A.preventDefault(),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,change:E||"",willCommit:!1,selStart:O,selEnd:P}})}),this._setEventListeners(s,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],A=>A.target.value)}if(v&&s.addEventListener("blur",v),this.data.comb){const A=(this.data.rect[2]-this.data.rect[0])/f;s.classList.add("comb"),s.style.letterSpacing=`calc(${A}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class VL extends _u{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class YL extends _u{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let a=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(s,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return Su.add(l),l.setAttribute("data-element-id",s),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.setAttribute("exportValue",e.exportValue),l.tabIndex=Pg,l.addEventListener("change",o=>{const{name:d,checked:f}=o.target;for(const g of this._getElementsByName(d,s)){const m=f&&g.exportValue===e.exportValue;g.domElement&&(g.domElement.checked=m),t.setValue(g.id,{value:m})}t.setValue(s,{value:f})}),l.addEventListener("resetform",o=>{const d=e.defaultFieldValue||"Off";o.target.checked=d===e.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",o=>{const d={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(s,{value:f.target.checked})}};this._dispatchEventFromSandbox(d,o)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class $x extends _u{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let a=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(s,{value:a})),a)for(const o of this._getElementsByName(e.fieldName,s))t.setValue(o.id,{value:!1});const l=document.createElement("input");if(Su.add(l),l.setAttribute("data-element-id",s),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.tabIndex=Pg,l.addEventListener("change",o=>{const{name:d,checked:f}=o.target;for(const g of this._getElementsByName(d,s))t.setValue(g.id,{value:!1});t.setValue(s,{value:f})}),l.addEventListener("resetform",o=>{const d=e.defaultFieldValue;o.target.checked=d!=null&&d===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;l.addEventListener("updatefromsandbox",d=>{const f={value:g=>{const m=o===g.detail.value;for(const v of this._getElementsByName(g.target.name)){const b=m&&v.id===s;v.domElement&&(v.domElement.checked=b),t.setValue(v.id,{value:b})}}};this._dispatchEventFromSandbox(f,d)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class XL extends Vx{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class $L extends _u{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");Su.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=Pg;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",m=>{const v=this.data.defaultFieldValue;for(const b of a.options)b.selected=b.value===v});for(const m of this.data.options){const v=document.createElement("option");v.textContent=m.displayValue,v.value=m.exportValue,s.value.includes(m.exportValue)&&(v.setAttribute("selected",!0),l=!1),a.append(v)}let o=null;if(l){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),a.prepend(m),o=()=>{m.remove(),a.removeEventListener("input",o),o=null},a.addEventListener("input",o)}const d=m=>{const v=m?"value":"textContent",{options:b,multiple:A}=a;return A?Array.prototype.filter.call(b,E=>E.selected).map(E=>E[v]):b.selectedIndex===-1?null:b[b.selectedIndex][v]};let f=d(!1);const g=m=>{const v=m.target.options;return Array.prototype.map.call(v,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",m=>{const v={value(b){o==null||o();const A=b.detail.value,E=new Set(Array.isArray(A)?A:[A]);for(const _ of a.options)_.selected=E.has(_.value);t.setValue(e,{value:d(!0)}),f=d(!1)},multipleSelection(b){a.multiple=!0},remove(b){const A=a.options,E=b.detail.remove;A[E].selected=!1,a.remove(E),A.length>0&&Array.prototype.findIndex.call(A,C=>C.selected)===-1&&(A[0].selected=!0),t.setValue(e,{value:d(!0),items:g(b)}),f=d(!1)},clear(b){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),f=d(!1)},insert(b){const{index:A,displayValue:E,exportValue:_}=b.detail.insert,C=a.children[A],R=document.createElement("option");R.textContent=E,R.value=_,C?C.before(R):a.append(R),t.setValue(e,{value:d(!0),items:g(b)}),f=d(!1)},items(b){const{items:A}=b.detail;for(;a.length!==0;)a.remove(0);for(const E of A){const{displayValue:_,exportValue:C}=E,R=document.createElement("option");R.textContent=_,R.value=C,a.append(R)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:d(!0),items:g(b)}),f=d(!1)},indices(b){const A=new Set(b.detail.indices);for(const E of b.target.options)E.selected=A.has(E.index);t.setValue(e,{value:d(!0)}),f=d(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(v,m)}),a.addEventListener("input",m=>{var A;const v=d(!0),b=d(!1);t.setValue(e,{value:v}),m.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,change:b,changeEx:v,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):a.addEventListener("input",function(m){t.setValue(e,{value:d(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class H0 extends Ve{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:Ve._hasPopupData(e)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new KL({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",e.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(s=>`${DA}${s}`).join(",")),this.container}}var Zc,uy,cy,Jc,th,Ie,Za,eh,Xf,$f,ih,Ja,ws,tr,Kf,er,Wf,Xo,$o,ve,wm,B0,Kx,Wx,Qx,Zx,Em,_m,U0;class KL{constructor({container:t,color:e,elements:s,titleObj:a,modificationDate:l,contentsObj:o,richText:d,parent:f,rect:g,parentRect:m,open:v}){x(this,ve);x(this,Zc,T(this,ve,Qx).bind(this));x(this,uy,T(this,ve,U0).bind(this));x(this,cy,T(this,ve,_m).bind(this));x(this,Jc,T(this,ve,Em).bind(this));x(this,th,null);x(this,Ie,null);x(this,Za,null);x(this,eh,null);x(this,Xf,null);x(this,$f,null);x(this,ih,null);x(this,Ja,!1);x(this,ws,null);x(this,tr,null);x(this,Kf,null);x(this,er,null);x(this,Wf,null);x(this,Xo,null);x(this,$o,!1);var b;S(this,Ie,t),S(this,Wf,a),S(this,Za,o),S(this,er,d),S(this,$f,f),S(this,th,e),S(this,Kf,g),S(this,ih,m),S(this,Xf,s),S(this,eh,NA.toDateObject(l)),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup());for(const A of this.trigger)A.addEventListener("click",c(this,Jc)),A.addEventListener("mouseenter",c(this,cy)),A.addEventListener("mouseleave",c(this,uy)),A.classList.add("popupTriggerArea");for(const A of s)(b=A.container)==null||b.addEventListener("keydown",c(this,Zc));c(this,Ie).hidden=!0,v&&T(this,ve,Em).call(this)}render(){if(c(this,ws))return;const t=S(this,ws,document.createElement("div"));if(t.className="popup",c(this,th)){const l=t.style.outlineColor=wt.makeHexColor(...c(this,th));t.style.backgroundColor=`color-mix(in srgb, ${l} 30%, white)`}const e=document.createElement("span");e.className="header";const s=document.createElement("h1");if(e.append(s),{dir:s.dir,str:s.textContent}=c(this,Wf),t.append(e),c(this,eh)){const l=document.createElement("span");l.classList.add("popupDate"),l.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),l.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,eh).valueOf()})),e.append(l)}const a=c(this,ve,wm);if(a)qx.render({xfaHtml:a,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const l=this._formatContents(c(this,Za));t.append(l)}c(this,Ie).append(t)}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const a=t.split(/(?:\r\n?|\n)/);for(let l=0,o=a.length;l<o;++l){const d=a[l];s.append(document.createTextNode(d)),l<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:t,popupContent:e}){var s;c(this,Xo)||S(this,Xo,{contentsObj:c(this,Za),richText:c(this,er)}),t&&S(this,tr,null),e&&(S(this,er,T(this,ve,Wx).call(this,e)),S(this,Za,null)),(s=c(this,ws))==null||s.remove(),S(this,ws,null)}resetEdited(){var t;c(this,Xo)&&({contentsObj:Xi(this,Za)._,richText:Xi(this,er)._}=c(this,Xo),S(this,Xo,null),(t=c(this,ws))==null||t.remove(),S(this,ws,null),S(this,tr,null))}forceHide(){S(this,$o,this.isVisible),c(this,$o)&&(c(this,Ie).hidden=!0)}maybeShow(){c(this,$o)&&(c(this,ws)||T(this,ve,_m).call(this),S(this,$o,!1),c(this,Ie).hidden=!1)}get isVisible(){return c(this,Ie).hidden===!1}}Zc=new WeakMap,uy=new WeakMap,cy=new WeakMap,Jc=new WeakMap,th=new WeakMap,Ie=new WeakMap,Za=new WeakMap,eh=new WeakMap,Xf=new WeakMap,$f=new WeakMap,ih=new WeakMap,Ja=new WeakMap,ws=new WeakMap,tr=new WeakMap,Kf=new WeakMap,er=new WeakMap,Wf=new WeakMap,Xo=new WeakMap,$o=new WeakMap,ve=new WeakSet,wm=function(){const t=c(this,er),e=c(this,Za);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&c(this,er).html||null},B0=function(){var t,e,s;return((s=(e=(t=c(this,ve,wm))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.fontSize)||0},Kx=function(){var t,e,s;return((s=(e=(t=c(this,ve,wm))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.color)||null},Wx=function(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:c(this,ve,Kx),fontSize:c(this,ve,B0)?`calc(${c(this,ve,B0)}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))e.push({name:"span",value:l,attributes:a});return s},Qx=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&c(this,Ja))&&T(this,ve,Em).call(this)},Zx=function(){if(c(this,tr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:a,pageY:l}}}=c(this,$f);let o=!!c(this,ih),d=o?c(this,ih):c(this,Kf);for(const E of c(this,Xf))if(!d||wt.intersect(E.data.rect,d)!==null){d=E.data.rect,o=!0;break}const f=wt.normalizeRect([d[0],t[3]-d[1]+t[1],d[2],t[3]-d[3]+t[1]]),m=o?d[2]-d[0]+5:0,v=f[0]+m,b=f[1];S(this,tr,[100*(v-a)/e,100*(b-l)/s]);const{style:A}=c(this,Ie);A.left=`${c(this,tr)[0]}%`,A.top=`${c(this,tr)[1]}%`},Em=function(){S(this,Ja,!c(this,Ja)),c(this,Ja)?(T(this,ve,_m).call(this),c(this,Ie).addEventListener("click",c(this,Jc)),c(this,Ie).addEventListener("keydown",c(this,Zc))):(T(this,ve,U0).call(this),c(this,Ie).removeEventListener("click",c(this,Jc)),c(this,Ie).removeEventListener("keydown",c(this,Zc)))},_m=function(){c(this,ws)||this.render(),this.isVisible?c(this,Ja)&&c(this,Ie).classList.add("focused"):(T(this,ve,Zx).call(this),c(this,Ie).hidden=!1,c(this,Ie).style.zIndex=parseInt(c(this,Ie).style.zIndex)+1e3)},U0=function(){c(this,Ie).classList.remove("focused"),!(c(this,Ja)||!this.isVisible)&&(c(this,Ie).hidden=!0,c(this,Ie).style.zIndex=parseInt(c(this,Ie).style.zIndex)-1e3)};class Jx extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Bt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Qf;class WL extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,Qf,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:s,height:a}=this,l=this.svgFactory.create(s,a,!0),o=S(this,Qf,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),l.append(o),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Qf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qf=new WeakMap;var Zf;class QL extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,Zf,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:s,height:a}=this,l=this.svgFactory.create(s,a,!0),o=e.borderStyle.width,d=S(this,Zf,this.svgFactory.createElement("svg:rect"));return d.setAttribute("x",o/2),d.setAttribute("y",o/2),d.setAttribute("width",s-o),d.setAttribute("height",a-o),d.setAttribute("stroke-width",o||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Zf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zf=new WeakMap;var Jf;class ZL extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,Jf,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:s,height:a}=this,l=this.svgFactory.create(s,a,!0),o=e.borderStyle.width,d=S(this,Jf,this.svgFactory.createElement("svg:ellipse"));return d.setAttribute("cx",s/2),d.setAttribute("cy",a/2),d.setAttribute("rx",s/2-o/2),d.setAttribute("ry",a/2-o/2),d.setAttribute("stroke-width",o||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Jf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jf=new WeakMap;var tg;class tT extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,tg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:s,borderStyle:a,popupRef:l},width:o,height:d}=this;if(!s)return this.container;const f=this.svgFactory.create(o,d,!0);let g=[];for(let v=0,b=s.length;v<b;v+=2){const A=s[v]-e[0],E=e[3]-s[v+1];g.push(`${A},${E}`)}g=g.join(" ");const m=S(this,tg,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",g),m.setAttribute("stroke-width",a.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),f.append(m),this.container.append(f),!l&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,tg)}addHighlightArea(){this.container.classList.add("highlightArea")}}tg=new WeakMap;class JL extends tT{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class tO extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var eg,Ko,ig,I0;class BA extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,ig);x(this,eg,null);x(this,Ko,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Bt.HIGHLIGHT:Bt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:s,inkLists:a,borderStyle:l,popupRef:o}}=this,{transform:d,width:f,height:g}=T(this,ig,I0).call(this,s,e),m=this.svgFactory.create(f,g,!0),v=S(this,eg,this.svgFactory.createElement("svg:g"));m.append(v),v.setAttribute("stroke-width",l.width||1),v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-linejoin","round"),v.setAttribute("stroke-miterlimit",10),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),v.setAttribute("transform",d);for(let b=0,A=a.length;b<A;b++){const E=this.svgFactory.createElement(this.svgElementName);c(this,Ko).push(E),E.setAttribute("points",a[b].join(",")),v.append(E)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:s,points:a,rect:l}=e,o=c(this,eg);if(s>=0&&o.setAttribute("stroke-width",s||1),a)for(let d=0,f=c(this,Ko).length;d<f;d++)c(this,Ko)[d].setAttribute("points",a[d].join(","));if(l){const{transform:d,width:f,height:g}=T(this,ig,I0).call(this,this.data.rotation,l);o.parentElement.setAttribute("viewBox",`0 0 ${f} ${g}`),o.setAttribute("transform",d)}}getElementsToTriggerPopup(){return c(this,Ko)}addHighlightArea(){this.container.classList.add("highlightArea")}}eg=new WeakMap,Ko=new WeakMap,ig=new WeakSet,I0=function(e,s){switch(e){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class eT extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Bt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class eO extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class iO extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class nO extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class iT extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Bt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ng,sg,j0;class sO extends Ve{constructor(e){var a;super(e,{isRenderable:!0});x(this,sg);x(this,ng,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(a=this.linkService.eventBus)==null||a.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:s}=this;let a;s.hasAppearance||s.fillAlpha===0?a=document.createElement("div"):(a=document.createElement("img"),a.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(a.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),a.addEventListener("dblclick",T(this,sg,j0).bind(this)),S(this,ng,a);const{isMac:l}=ki.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(l?o.metaKey:o.ctrlKey)&&T(this,sg,j0).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():a.classList.add("popupTriggerArea"),e.append(a),e}getElementsToTriggerPopup(){return c(this,ng)}addHighlightArea(){this.container.classList.add("highlightArea")}}ng=new WeakMap,sg=new WeakSet,j0=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var ag,Wo,hl,rg,Ll,q0,V0;const YA=class YA{constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:a,page:l,viewport:o,structTreeLayer:d}){x(this,Ll);x(this,ag,null);x(this,Wo,null);x(this,hl,new Map);x(this,rg,null);this.div=t,S(this,ag,e),S(this,Wo,s),S(this,rg,d||null),this.page=l,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=a}hasEditableAnnotations(){return c(this,hl).size>0}async render(t){var o;const{annotations:e}=t,s=this.div;bu(s,this.viewport);const a=new Map,l={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Ym,annotationStorage:t.annotationStorage||new zA,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const d of e){if(d.noHTML)continue;const f=d.annotationType===Qe.POPUP;if(f){const v=a.get(d.id);if(!v)continue;l.elements=v}else if(d.rect[2]===d.rect[0]||d.rect[3]===d.rect[1])continue;l.data=d;const g=y_.create(l);if(!g.isRenderable)continue;if(!f&&d.popupRef){const v=a.get(d.popupRef);v?v.push(g):a.set(d.popupRef,[g])}const m=g.render();d.hidden&&(m.style.visibility="hidden"),await T(this,Ll,q0).call(this,m,d.id),g._isEditable&&(c(this,hl).set(g.data.id,g),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(g))}T(this,Ll,V0).call(this)}async addLinkAnnotations(t,e){const s={data:null,layer:this.div,linkService:e,svgFactory:new Ym,parent:this};for(const a of t){a.borderStyle||(a.borderStyle=YA._defaultBorderStyle),s.data=a;const l=y_.create(s);if(!l.isRenderable)continue;const o=l.render();await T(this,Ll,q0).call(this,o,a.id)}}update({viewport:t}){const e=this.div;this.viewport=t,bu(e,{rotation:t.rotation}),T(this,Ll,V0).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(c(this,hl).values())}getEditableAnnotation(t){return c(this,hl).get(t)}static get _defaultBorderStyle(){return Zt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:lc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};ag=new WeakMap,Wo=new WeakMap,hl=new WeakMap,rg=new WeakMap,Ll=new WeakSet,q0=async function(t,e){var o,d;const s=t.firstChild||t,a=s.id=`${DA}${e}`,l=await((o=c(this,rg))==null?void 0:o.getAriaAttributes(a));if(l)for(const[f,g]of l)s.setAttribute(f,g);this.div.append(t),(d=c(this,ag))==null||d.moveElementInDOM(this.div,t,s,!1)},V0=function(){var e;if(!c(this,Wo))return;const t=this.div;for(const[s,a]of c(this,Wo)){const l=t.querySelector(`[data-annotation-id="${s}"]`);if(!l)continue;a.className="annotationContent";const{firstChild:o}=l;o?o.nodeName==="CANVAS"?o.replaceWith(a):o.classList.contains("annotationContent")?o.after(a):o.before(a):l.append(a);const d=c(this,hl).get(s);d&&(d._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(s,l.id,a),d._hasNoCanvas=!1):d.canvas=a)}c(this,Wo).clear()};let G0=YA;const nm=/\r\n?|\n/g;var Es,_n,lg,Qo,xn,ti,nT,sT,aT,xm,fr,Tm,Cm,rT,X0,lT;const Ee=class Ee extends De{constructor(e){super({...e,name:"freeTextEditor"});x(this,ti);x(this,Es);x(this,_n,"");x(this,lg,`${this.id}-editor`);x(this,Qo,null);x(this,xn);S(this,Es,e.color||Ee._defaultColor||De._defaultLineColor),S(this,xn,e.fontSize||Ee._defaultFontSize)}static get _keyboardManager(){const e=Ee.prototype,s=o=>o.isEmpty(),a=Au.TRANSLATE_SMALL,l=Au.TRANSLATE_BIG;return Zt(this,"_keyboardManager",new Ng([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-l,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[a,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[l,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-l],checker:s}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,a],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,l],checker:s}]]))}static initialize(e,s){De.initialize(e,s);const a=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(a.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,s){switch(e){case ee.FREETEXT_SIZE:Ee._defaultFontSize=s;break;case ee.FREETEXT_COLOR:Ee._defaultColor=s;break}}updateParams(e,s){switch(e){case ee.FREETEXT_SIZE:T(this,ti,nT).call(this,s);break;case ee.FREETEXT_COLOR:T(this,ti,sT).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ee.FREETEXT_SIZE,Ee._defaultFontSize],[ee.FREETEXT_COLOR,Ee._defaultColor||De._defaultLineColor]]}get propertiesToUpdate(){return[[ee.FREETEXT_SIZE,c(this,xn)],[ee.FREETEXT_COLOR,c(this,Es)]]}_translateEmpty(e,s){this._uiManager.translateSelectedEditors(e,s,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ee._internalPadding*e,-(Ee._internalPadding+c(this,xn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Bt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,Qo,new AbortController);const e=this._uiManager.combinedSignal(c(this,Qo));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,lg)),this._isDraggable=!0,(e=c(this,Qo))==null||e.abort(),S(this,Qo,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var s;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=c(this,_n),s=S(this,_n,T(this,ti,aT).call(this).trimEnd());if(e===s)return;const a=l=>{if(S(this,_n,l),!l){this.remove();return}T(this,ti,Cm).call(this),this._uiManager.rebuild(this),T(this,ti,xm).call(this)};this.addCommands({cmd:()=>{a(s)},undo:()=>{a(e)},mustExec:!1}),T(this,ti,xm).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ee._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,s;(this._isCopy||this.annotationElementId)&&(e=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,lg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:a}=this.editorDiv;if(a.fontSize=`calc(${c(this,xn)}px * var(--total-scale-factor))`,a.color=c(this,Es),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),PA(this,this.div,["dblclick","keydown"]),this._isCopy||this.annotationElementId){const[l,o]=this.parentDimensions;if(this.annotationElementId){const{position:d}=this._initialData;let[f,g]=this.getInitialTranslation();[f,g]=this.pageTranslationToScreen(f,g);const[m,v]=this.pageDimensions,[b,A]=this.pageTranslation;let E,_;switch(this.rotation){case 0:E=e+(d[0]-b)/m,_=s+this.height-(d[1]-A)/v;break;case 90:E=e+(d[0]-b)/m,_=s-(d[1]-A)/v,[f,g]=[g,-f];break;case 180:E=e-this.width+(d[0]-b)/m,_=s-(d[1]-A)/v,[f,g]=[-f,-g];break;case 270:E=e+(d[0]-b-this.height*v)/m,_=s+(d[1]-A-this.width*m)/v,[f,g]=[-g,f];break}this.setAt(E*l,_*o,f,g)}else this._moveAfterPaste(e,s);T(this,ti,Cm).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var E,_,C;const s=e.clipboardData||window.clipboardData,{types:a}=s;if(a.length===1&&a[0]==="text/plain")return;e.preventDefault();const l=T(E=Ee,fr,X0).call(E,s.getData("text")||"").replaceAll(nm,`
`);if(!l)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const d=o.getRangeAt(0);if(!l.includes(`
`)){d.insertNode(document.createTextNode(l)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:f,startOffset:g}=d,m=[],v=[];if(f.nodeType===Node.TEXT_NODE){const R=f.parentElement;if(v.push(f.nodeValue.slice(g).replaceAll(nm,"")),R!==this.editorDiv){let L=m;for(const O of this.editorDiv.childNodes){if(O===R){L=v;continue}L.push(T(_=Ee,fr,Tm).call(_,O))}}m.push(f.nodeValue.slice(0,g).replaceAll(nm,""))}else if(f===this.editorDiv){let R=m,L=0;for(const O of this.editorDiv.childNodes)L++===g&&(R=v),R.push(T(C=Ee,fr,Tm).call(C,O))}S(this,_n,`${m.join(`
`)}${l}${v.join(`
`)}`),T(this,ti,Cm).call(this);const b=new Range;let A=Math.sumPrecise(m.map(R=>R.length));for(const{firstChild:R}of this.editorDiv.childNodes)if(R.nodeType===Node.TEXT_NODE){const L=R.nodeValue.length;if(A<=L){b.setStart(R,A),b.setEnd(R,A);break}A-=L}o.removeAllRanges(),o.addRange(b)}get contentDiv(){return this.editorDiv}static async deserialize(e,s,a){var d;let l=null;if(e instanceof Jx){const{data:{defaultAppearanceData:{fontSize:f,fontColor:g},rect:m,rotation:v,id:b,popupRef:A},textContent:E,textPosition:_,parent:{page:{pageNumber:C}}}=e;if(!E||E.length===0)return null;l=e={annotationType:Bt.FREETEXT,color:Array.from(g),fontSize:f,value:E.join(`
`),position:_,pageIndex:C-1,rect:m.slice(0),rotation:v,id:b,deleted:!1,popupRef:A}}const o=await super.deserialize(e,s,a);return S(o,xn,e.fontSize),S(o,Es,wt.makeHexColor(...e.color)),S(o,_n,T(d=Ee,fr,X0).call(d,e.value)),o.annotationElementId=e.id||null,o._initialData=l,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Ee._internalPadding*this.parentScale,a=this.getRect(s,s),l=De._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,Es)),o={annotationType:Bt.FREETEXT,color:l,fontSize:c(this,xn),value:T(this,ti,rT).call(this),pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!T(this,ti,lT).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const s=super.renderAnnotationElement(e);if(this.deleted)return s;const{style:a}=s;a.fontSize=`calc(${c(this,xn)}px * var(--total-scale-factor))`,a.color=c(this,Es),s.replaceChildren();for(const o of c(this,_n).split(`
`)){const d=document.createElement("div");d.append(o?document.createTextNode(o):document.createElement("br")),s.append(d)}const l=Ee._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(l,l),popupContent:c(this,_n)}),s}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Es=new WeakMap,_n=new WeakMap,lg=new WeakMap,Qo=new WeakMap,xn=new WeakMap,ti=new WeakSet,nT=function(e){const s=l=>{this.editorDiv.style.fontSize=`calc(${l}px * var(--total-scale-factor))`,this.translate(0,-(l-c(this,xn))*this.parentScale),S(this,xn,l),T(this,ti,xm).call(this)},a=c(this,xn);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ee.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},sT=function(e){const s=l=>{S(this,Es,this.editorDiv.style.color=l)},a=c(this,Es);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ee.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},aT=function(){var a;const e=[];this.editorDiv.normalize();let s=null;for(const l of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&l.nodeName==="BR"||(e.push(T(a=Ee,fr,Tm).call(a,l)),s=l);return e.join(`
`)},xm=function(){const[e,s]=this.parentDimensions;let a;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{const{currentLayer:l,div:o}=this,d=o.style.display,f=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",l.div.append(this.div),a=o.getBoundingClientRect(),o.remove(),o.style.display=d,o.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=a.width/e,this.height=a.height/s):(this.width=a.height/e,this.height=a.width/s),this.fixAndSetPosition()},fr=new WeakSet,Tm=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(nm,"")},Cm=function(){if(this.editorDiv.replaceChildren(),!!c(this,_n))for(const e of c(this,_n).split(`
`)){const s=document.createElement("div");s.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(s)}},rT=function(){return c(this,_n).replaceAll(""," ")},X0=function(e){return e.replaceAll(" ","")},lT=function(e){const{value:s,fontSize:a,color:l,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==s||e.fontSize!==a||e.color.some((d,f)=>d!==l[f])||e.pageIndex!==o},x(Ee,fr),At(Ee,"_freeTextDefaultContent",""),At(Ee,"_internalPadding",0),At(Ee,"_defaultColor",null),At(Ee,"_defaultFontSize",10),At(Ee,"_type","freetext"),At(Ee,"_editorType",Bt.FREETEXT);let Y0=Ee;class pt{toSVGPath(){ye("Abstract method `toSVGPath` must be implemented.")}get box(){ye("Abstract getter `box` must be implemented.")}serialize(t,e){ye("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,a,l,o){o||(o=new Float32Array(t.length));for(let d=0,f=t.length;d<f;d+=2)o[d]=e+t[d]*a,o[d+1]=s+t[d+1]*l;return o}static _rescaleAndSwap(t,e,s,a,l,o){o||(o=new Float32Array(t.length));for(let d=0,f=t.length;d<f;d+=2)o[d]=e+t[d+1]*a,o[d+1]=s+t[d]*l;return o}static _translate(t,e,s,a){a||(a=new Float32Array(t.length));for(let l=0,o=t.length;l<o;l+=2)a[l]=e+t[l],a[l+1]=s+t[l+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,a,l){switch(l){case 90:return[1-e/s,t/a];case 180:return[1-t/s,1-e/a];case 270:return[e/s,1-t/a];default:return[t/s,e/a]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,a,l,o){return[(t+5*s)/6,(e+5*a)/6,(5*s+l)/6,(5*a+o)/6,(s+l)/2,(a+o)/2]}}At(pt,"PRECISION",1e-4);var Tn,_s,nh,sh,ia,Kt,Zo,Jo,og,ug,ah,rh,dl,cg,hy,dy,oi,Yd,oT,uT,cT,hT,dT,fT;const za=class za{constructor({x:t,y:e},s,a,l,o,d=0){x(this,oi);x(this,Tn);x(this,_s,[]);x(this,nh);x(this,sh);x(this,ia,[]);x(this,Kt,new Float32Array(18));x(this,Zo);x(this,Jo);x(this,og);x(this,ug);x(this,ah);x(this,rh);x(this,dl,[]);S(this,Tn,s),S(this,rh,l*a),S(this,sh,o),c(this,Kt).set([NaN,NaN,NaN,NaN,t,e],6),S(this,nh,d),S(this,ug,c(za,cg)*a),S(this,og,c(za,dy)*a),S(this,ah,a),c(this,dl).push(t,e)}isEmpty(){return isNaN(c(this,Kt)[8])}add({x:t,y:e}){var G;S(this,Zo,t),S(this,Jo,e);const[s,a,l,o]=c(this,Tn);let[d,f,g,m]=c(this,Kt).subarray(8,12);const v=t-g,b=e-m,A=Math.hypot(v,b);if(A<c(this,og))return!1;const E=A-c(this,ug),_=E/A,C=_*v,R=_*b;let L=d,O=f;d=g,f=m,g+=C,m+=R,(G=c(this,dl))==null||G.push(t,e);const P=-R/E,M=C/E,k=P*c(this,rh),U=M*c(this,rh);return c(this,Kt).set(c(this,Kt).subarray(2,8),0),c(this,Kt).set([g+k,m+U],4),c(this,Kt).set(c(this,Kt).subarray(14,18),12),c(this,Kt).set([g-k,m-U],16),isNaN(c(this,Kt)[6])?(c(this,ia).length===0&&(c(this,Kt).set([d+k,f+U],2),c(this,ia).push(NaN,NaN,NaN,NaN,(d+k-s)/l,(f+U-a)/o),c(this,Kt).set([d-k,f-U],14),c(this,_s).push(NaN,NaN,NaN,NaN,(d-k-s)/l,(f-U-a)/o)),c(this,Kt).set([L,O,d,f,g,m],6),!this.isEmpty()):(c(this,Kt).set([L,O,d,f,g,m],6),Math.abs(Math.atan2(O-f,L-d)-Math.atan2(R,C))<Math.PI/2?([d,f,g,m]=c(this,Kt).subarray(2,6),c(this,ia).push(NaN,NaN,NaN,NaN,((d+g)/2-s)/l,((f+m)/2-a)/o),[d,f,L,O]=c(this,Kt).subarray(14,18),c(this,_s).push(NaN,NaN,NaN,NaN,((L+d)/2-s)/l,((O+f)/2-a)/o),!0):([L,O,d,f,g,m]=c(this,Kt).subarray(0,6),c(this,ia).push(((L+5*d)/6-s)/l,((O+5*f)/6-a)/o,((5*d+g)/6-s)/l,((5*f+m)/6-a)/o,((d+g)/2-s)/l,((f+m)/2-a)/o),[g,m,d,f,L,O]=c(this,Kt).subarray(12,18),c(this,_s).push(((L+5*d)/6-s)/l,((O+5*f)/6-a)/o,((5*d+g)/6-s)/l,((5*f+m)/6-a)/o,((d+g)/2-s)/l,((f+m)/2-a)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=c(this,ia),e=c(this,_s);if(isNaN(c(this,Kt)[6])&&!this.isEmpty())return T(this,oi,oT).call(this);const s=[];s.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?s.push(`L${t[a+4]} ${t[a+5]}`):s.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);T(this,oi,cT).call(this,s);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?s.push(`L${e[a+4]} ${e[a+5]}`):s.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return T(this,oi,uT).call(this,s),s.join(" ")}newFreeDrawOutline(t,e,s,a,l,o){return new gT(t,e,s,a,l,o)}getOutlines(){var v;const t=c(this,ia),e=c(this,_s),s=c(this,Kt),[a,l,o,d]=c(this,Tn),f=new Float32Array((((v=c(this,dl))==null?void 0:v.length)??0)+2);for(let b=0,A=f.length-2;b<A;b+=2)f[b]=(c(this,dl)[b]-a)/o,f[b+1]=(c(this,dl)[b+1]-l)/d;if(f[f.length-2]=(c(this,Zo)-a)/o,f[f.length-1]=(c(this,Jo)-l)/d,isNaN(s[6])&&!this.isEmpty())return T(this,oi,hT).call(this,f);const g=new Float32Array(c(this,ia).length+24+c(this,_s).length);let m=t.length;for(let b=0;b<m;b+=2){if(isNaN(t[b])){g[b]=g[b+1]=NaN;continue}g[b]=t[b],g[b+1]=t[b+1]}m=T(this,oi,fT).call(this,g,m);for(let b=e.length-6;b>=6;b-=6)for(let A=0;A<6;A+=2){if(isNaN(e[b+A])){g[m]=g[m+1]=NaN,m+=2;continue}g[m]=e[b+A],g[m+1]=e[b+A+1],m+=2}return T(this,oi,dT).call(this,g,m),this.newFreeDrawOutline(g,f,c(this,Tn),c(this,ah),c(this,nh),c(this,sh))}};Tn=new WeakMap,_s=new WeakMap,nh=new WeakMap,sh=new WeakMap,ia=new WeakMap,Kt=new WeakMap,Zo=new WeakMap,Jo=new WeakMap,og=new WeakMap,ug=new WeakMap,ah=new WeakMap,rh=new WeakMap,dl=new WeakMap,cg=new WeakMap,hy=new WeakMap,dy=new WeakMap,oi=new WeakSet,Yd=function(){const t=c(this,Kt).subarray(4,6),e=c(this,Kt).subarray(16,18),[s,a,l,o]=c(this,Tn);return[(c(this,Zo)+(t[0]-e[0])/2-s)/l,(c(this,Jo)+(t[1]-e[1])/2-a)/o,(c(this,Zo)+(e[0]-t[0])/2-s)/l,(c(this,Jo)+(e[1]-t[1])/2-a)/o]},oT=function(){const[t,e,s,a]=c(this,Tn),[l,o,d,f]=T(this,oi,Yd).call(this);return`M${(c(this,Kt)[2]-t)/s} ${(c(this,Kt)[3]-e)/a} L${(c(this,Kt)[4]-t)/s} ${(c(this,Kt)[5]-e)/a} L${l} ${o} L${d} ${f} L${(c(this,Kt)[16]-t)/s} ${(c(this,Kt)[17]-e)/a} L${(c(this,Kt)[14]-t)/s} ${(c(this,Kt)[15]-e)/a} Z`},uT=function(t){const e=c(this,_s);t.push(`L${e[4]} ${e[5]} Z`)},cT=function(t){const[e,s,a,l]=c(this,Tn),o=c(this,Kt).subarray(4,6),d=c(this,Kt).subarray(16,18),[f,g,m,v]=T(this,oi,Yd).call(this);t.push(`L${(o[0]-e)/a} ${(o[1]-s)/l} L${f} ${g} L${m} ${v} L${(d[0]-e)/a} ${(d[1]-s)/l}`)},hT=function(t){const e=c(this,Kt),[s,a,l,o]=c(this,Tn),[d,f,g,m]=T(this,oi,Yd).call(this),v=new Float32Array(36);return v.set([NaN,NaN,NaN,NaN,(e[2]-s)/l,(e[3]-a)/o,NaN,NaN,NaN,NaN,(e[4]-s)/l,(e[5]-a)/o,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(e[16]-s)/l,(e[17]-a)/o,NaN,NaN,NaN,NaN,(e[14]-s)/l,(e[15]-a)/o],0),this.newFreeDrawOutline(v,t,c(this,Tn),c(this,ah),c(this,nh),c(this,sh))},dT=function(t,e){const s=c(this,_s);return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6},fT=function(t,e){const s=c(this,Kt).subarray(4,6),a=c(this,Kt).subarray(16,18),[l,o,d,f]=c(this,Tn),[g,m,v,b]=T(this,oi,Yd).call(this);return t.set([NaN,NaN,NaN,NaN,(s[0]-l)/d,(s[1]-o)/f,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,v,b,NaN,NaN,NaN,NaN,(a[0]-l)/d,(a[1]-o)/f],e),e+=24},x(za,cg,8),x(za,hy,2),x(za,dy,c(za,cg)+c(za,hy));let Xm=za;var lh,tu,ir,hg,Cn,dg,qe,fy,pT;class gT extends pt{constructor(e,s,a,l,o,d){super();x(this,fy);x(this,lh);x(this,tu,new Float32Array(4));x(this,ir);x(this,hg);x(this,Cn);x(this,dg);x(this,qe);S(this,qe,e),S(this,Cn,s),S(this,lh,a),S(this,dg,l),S(this,ir,o),S(this,hg,d),this.lastPoint=[NaN,NaN],T(this,fy,pT).call(this,d);const[f,g,m,v]=c(this,tu);for(let b=0,A=e.length;b<A;b+=2)e[b]=(e[b]-f)/m,e[b+1]=(e[b+1]-g)/v;for(let b=0,A=s.length;b<A;b+=2)s[b]=(s[b]-f)/m,s[b+1]=(s[b+1]-g)/v}toSVGPath(){const e=[`M${c(this,qe)[4]} ${c(this,qe)[5]}`];for(let s=6,a=c(this,qe).length;s<a;s+=6){if(isNaN(c(this,qe)[s])){e.push(`L${c(this,qe)[s+4]} ${c(this,qe)[s+5]}`);continue}e.push(`C${c(this,qe)[s]} ${c(this,qe)[s+1]} ${c(this,qe)[s+2]} ${c(this,qe)[s+3]} ${c(this,qe)[s+4]} ${c(this,qe)[s+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,s,a,l],o){const d=a-e,f=l-s;let g,m;switch(o){case 0:g=pt._rescale(c(this,qe),e,l,d,-f),m=pt._rescale(c(this,Cn),e,l,d,-f);break;case 90:g=pt._rescaleAndSwap(c(this,qe),e,s,d,f),m=pt._rescaleAndSwap(c(this,Cn),e,s,d,f);break;case 180:g=pt._rescale(c(this,qe),a,s,-d,f),m=pt._rescale(c(this,Cn),a,s,-d,f);break;case 270:g=pt._rescaleAndSwap(c(this,qe),a,l,-d,-f),m=pt._rescaleAndSwap(c(this,Cn),a,l,-d,-f);break}return{outline:Array.from(g),points:[Array.from(m)]}}get box(){return c(this,tu)}newOutliner(e,s,a,l,o,d=0){return new Xm(e,s,a,l,o,d)}getNewOutline(e,s){const[a,l,o,d]=c(this,tu),[f,g,m,v]=c(this,lh),b=o*m,A=d*v,E=a*m+f,_=l*v+g,C=this.newOutliner({x:c(this,Cn)[0]*b+E,y:c(this,Cn)[1]*A+_},c(this,lh),c(this,dg),e,c(this,hg),s??c(this,ir));for(let R=2;R<c(this,Cn).length;R+=2)C.add({x:c(this,Cn)[R]*b+E,y:c(this,Cn)[R+1]*A+_});return C.getOutlines()}}lh=new WeakMap,tu=new WeakMap,ir=new WeakMap,hg=new WeakMap,Cn=new WeakMap,dg=new WeakMap,qe=new WeakMap,fy=new WeakSet,pT=function(e){const s=c(this,qe);let a=s[4],l=s[5];const o=[a,l,a,l];let d=a,f=l;const g=e?Math.max:Math.min;for(let v=6,b=s.length;v<b;v+=6){const A=s[v+4],E=s[v+5];if(isNaN(s[v]))wt.pointBoundingBox(A,E,o),f<E?(d=A,f=E):f===E&&(d=g(d,A));else{const _=[1/0,1/0,-1/0,-1/0];wt.bezierBoundingBox(a,l,...s.slice(v,v+6),_),wt.rectBoundingBox(..._,o),f<_[3]?(d=_[2],f=_[3]):f===_[3]&&(d=g(d,_[2]))}a=A,l=E}const m=c(this,tu);m[0]=o[0]-c(this,ir),m[1]=o[1]-c(this,ir),m[2]=o[2]-o[0]+2*c(this,ir),m[3]=o[3]-o[1]+2*c(this,ir),this.lastPoint=[d,f]};var fg,gg,fl,xs,tn,mT,Rm,yT,vT,K0;class $0{constructor(t,e=0,s=0,a=!0){x(this,tn);x(this,fg);x(this,gg);x(this,fl,[]);x(this,xs,[]);const l=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:A,y:E,width:_,height:C}of t){const R=Math.floor((A-e)/o)*o,L=Math.ceil((A+_+e)/o)*o,O=Math.floor((E-e)/o)*o,P=Math.ceil((E+C+e)/o)*o,M=[R,O,P,!0],k=[L,O,P,!1];c(this,fl).push(M,k),wt.rectBoundingBox(R,O,L,P,l)}const d=l[2]-l[0]+2*s,f=l[3]-l[1]+2*s,g=l[0]-s,m=l[1]-s,v=c(this,fl).at(a?-1:-2),b=[v[0],v[2]];for(const A of c(this,fl)){const[E,_,C]=A;A[0]=(E-g)/d,A[1]=(_-m)/f,A[2]=(C-m)/f}S(this,fg,new Float32Array([g,m,d,f])),S(this,gg,b)}getOutlines(){c(this,fl).sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of c(this,fl))e[3]?(t.push(...T(this,tn,K0).call(this,e)),T(this,tn,yT).call(this,e)):(T(this,tn,vT).call(this,e),t.push(...T(this,tn,K0).call(this,e)));return T(this,tn,mT).call(this,t)}}fg=new WeakMap,gg=new WeakMap,fl=new WeakMap,xs=new WeakMap,tn=new WeakSet,mT=function(t){const e=[],s=new Set;for(const o of t){const[d,f,g]=o;e.push([d,f,o],[d,g,o])}e.sort((o,d)=>o[1]-d[1]||o[0]-d[0]);for(let o=0,d=e.length;o<d;o+=2){const f=e[o][2],g=e[o+1][2];f.push(g),g.push(f),s.add(f),s.add(g)}const a=[];let l;for(;s.size>0;){const o=s.values().next().value;let[d,f,g,m,v]=o;s.delete(o);let b=d,A=f;for(l=[d,g],a.push(l);;){let E;if(s.has(m))E=m;else if(s.has(v))E=v;else break;s.delete(E),[d,f,g,m,v]=E,b!==d&&(l.push(b,A,d,A===f?f:g),b=d),A=A===f?g:f}l.push(b,A)}return new aO(a,c(this,fg),c(this,gg))},Rm=function(t){const e=c(this,xs);let s=0,a=e.length-1;for(;s<=a;){const l=s+a>>1,o=e[l][0];if(o===t)return l;o<t?s=l+1:a=l-1}return a+1},yT=function([,t,e]){const s=T(this,tn,Rm).call(this,t);c(this,xs).splice(s,0,[t,e])},vT=function([,t,e]){const s=T(this,tn,Rm).call(this,t);for(let a=s;a<c(this,xs).length;a++){const[l,o]=c(this,xs)[a];if(l!==t)break;if(l===t&&o===e){c(this,xs).splice(a,1);return}}for(let a=s-1;a>=0;a--){const[l,o]=c(this,xs)[a];if(l!==t)break;if(l===t&&o===e){c(this,xs).splice(a,1);return}}},K0=function(t){const[e,s,a]=t,l=[[e,s,a]],o=T(this,tn,Rm).call(this,a);for(let d=0;d<o;d++){const[f,g]=c(this,xs)[d];for(let m=0,v=l.length;m<v;m++){const[,b,A]=l[m];if(!(g<=b||A<=f)){if(b>=f){if(A>g)l[m][1]=g;else{if(v===1)return[];l.splice(m,1),m--,v--}continue}l[m][2]=f,A>g&&l.push([e,g,A])}}}return l};var pg,oh;class aO extends pt{constructor(e,s,a){super();x(this,pg);x(this,oh);S(this,oh,e),S(this,pg,s),this.lastPoint=a}toSVGPath(){const e=[];for(const s of c(this,oh)){let[a,l]=s;e.push(`M${a} ${l}`);for(let o=2;o<s.length;o+=2){const d=s[o],f=s[o+1];d===a?(e.push(`V${f}`),l=f):f===l&&(e.push(`H${d}`),a=d)}e.push("Z")}return e.join(" ")}serialize([e,s,a,l],o){const d=[],f=a-e,g=l-s;for(const m of c(this,oh)){const v=new Array(m.length);for(let b=0;b<m.length;b+=2)v[b]=e+m[b]*f,v[b+1]=l-m[b+1]*g;d.push(v)}return d}get box(){return c(this,pg)}get classNamesForOutlining(){return["highlightOutline"]}}pg=new WeakMap,oh=new WeakMap;class W0 extends Xm{newFreeDrawOutline(t,e,s,a,l,o){return new rO(t,e,s,a,l,o)}}class rO extends gT{newOutliner(t,e,s,a,l,o=0){return new W0(t,e,s,a,l,o)}}var Ts,eu,uh,li,mg,ch,yg,vg,gl,Cs,hh,bg,me,Q0,Z0,J0,ao,bT,Ir;const on=class on{constructor({editor:t=null,uiManager:e=null}){x(this,me);x(this,Ts,null);x(this,eu,null);x(this,uh);x(this,li,null);x(this,mg,!1);x(this,ch,!1);x(this,yg,null);x(this,vg);x(this,gl,null);x(this,Cs,null);x(this,hh);var s;t?(S(this,ch,!1),S(this,hh,ee.HIGHLIGHT_COLOR),S(this,yg,t)):(S(this,ch,!0),S(this,hh,ee.HIGHLIGHT_DEFAULT_COLOR)),S(this,Cs,(t==null?void 0:t._uiManager)||e),S(this,vg,c(this,Cs)._eventBus),S(this,uh,(t==null?void 0:t.color)||((s=c(this,Cs))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),c(on,bg)||S(on,bg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Zt(this,"_keyboardManager",new Ng([[["Escape","mac+Escape"],on.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],on.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],on.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],on.prototype._moveToPrevious],[["Home","mac+Home"],on.prototype._moveToBeginning],[["End","mac+End"],on.prototype._moveToEnd]]))}renderButton(){const t=S(this,Ts,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=c(this,Cs)._signal;t.addEventListener("click",T(this,me,ao).bind(this),{signal:e}),t.addEventListener("keydown",T(this,me,J0).bind(this),{signal:e});const s=S(this,eu,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=c(this,uh),t.append(s),t}renderMainDropdown(){const t=S(this,li,T(this,me,Q0).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===c(this,Ts)){T(this,me,ao).call(this,t);return}const e=t.target.getAttribute("data-color");e&&T(this,me,Z0).call(this,e,t)}_moveToNext(t){var e,s;if(!c(this,me,Ir)){T(this,me,ao).call(this,t);return}if(t.target===c(this,Ts)){(e=c(this,li).firstChild)==null||e.focus();return}(s=t.target.nextSibling)==null||s.focus()}_moveToPrevious(t){var e,s;if(t.target===((e=c(this,li))==null?void 0:e.firstChild)||t.target===c(this,Ts)){c(this,me,Ir)&&this._hideDropdownFromKeyboard();return}c(this,me,Ir)||T(this,me,ao).call(this,t),(s=t.target.previousSibling)==null||s.focus()}_moveToBeginning(t){var e;if(!c(this,me,Ir)){T(this,me,ao).call(this,t);return}(e=c(this,li).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!c(this,me,Ir)){T(this,me,ao).call(this,t);return}(e=c(this,li).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=c(this,li))==null||t.classList.add("hidden"),(e=c(this,gl))==null||e.abort(),S(this,gl,null)}_hideDropdownFromKeyboard(){var t;if(!c(this,ch)){if(!c(this,me,Ir)){(t=c(this,yg))==null||t.unselect();return}this.hideDropdown(),c(this,Ts).focus({preventScroll:!0,focusVisible:c(this,mg)})}}updateColor(t){if(c(this,eu)&&(c(this,eu).style.backgroundColor=t),!c(this,li))return;const e=c(this,Cs).highlightColors.values();for(const s of c(this,li).children)s.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=c(this,Ts))==null||t.remove(),S(this,Ts,null),S(this,eu,null),(e=c(this,li))==null||e.remove(),S(this,li,null)}};Ts=new WeakMap,eu=new WeakMap,uh=new WeakMap,li=new WeakMap,mg=new WeakMap,ch=new WeakMap,yg=new WeakMap,vg=new WeakMap,gl=new WeakMap,Cs=new WeakMap,hh=new WeakMap,bg=new WeakMap,me=new WeakSet,Q0=function(){const t=document.createElement("div"),e=c(this,Cs)._signal;t.addEventListener("contextmenu",Ns,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,a]of c(this,Cs).highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",a),l.title=s,l.setAttribute("data-l10n-id",c(on,bg)[s]);const o=document.createElement("span");l.append(o),o.className="swatch",o.style.backgroundColor=a,l.setAttribute("aria-selected",a===c(this,uh)),l.addEventListener("click",T(this,me,Z0).bind(this,a),{signal:e}),t.append(l)}return t.addEventListener("keydown",T(this,me,J0).bind(this),{signal:e}),t},Z0=function(t,e){e.stopPropagation(),c(this,vg).dispatch("switchannotationeditorparams",{source:this,type:c(this,hh),value:t})},J0=function(t){on._keyboardManager.exec(this,t)},ao=function(t){if(c(this,me,Ir)){this.hideDropdown();return}if(S(this,mg,t.detail===0),c(this,gl)||(S(this,gl,new AbortController),window.addEventListener("pointerdown",T(this,me,bT).bind(this),{signal:c(this,Cs).combinedSignal(c(this,gl))})),c(this,li)){c(this,li).classList.remove("hidden");return}const e=S(this,li,T(this,me,Q0).call(this));c(this,Ts).append(e)},bT=function(t){var e;(e=c(this,li))!=null&&e.contains(t.target)||this.hideDropdown()},Ir=function(){return c(this,li)&&!c(this,li).classList.contains("hidden")},x(on,bg,null);let $m=on;var dh,Ag,nr,iu,fh,hn,Sg,wg,nu,ss,Rn,Ri,gh,sr,ji,ph,as,Eg,jt,tA,Mm,AT,ST,wT,eA,ro,us,fc,ET,Dm,Xd,_T,xT,TT,CT,RT;const ue=class ue extends De{constructor(e){super({...e,name:"highlightEditor"});x(this,jt);x(this,dh,null);x(this,Ag,0);x(this,nr);x(this,iu,null);x(this,fh,null);x(this,hn,null);x(this,Sg,null);x(this,wg,0);x(this,nu,null);x(this,ss,null);x(this,Rn,null);x(this,Ri,!1);x(this,gh,null);x(this,sr);x(this,ji,null);x(this,ph,"");x(this,as);x(this,Eg,"");this.color=e.color||ue._defaultColor,S(this,as,e.thickness||ue._defaultThickness),S(this,sr,e.opacity||ue._defaultOpacity),S(this,nr,e.boxes||null),S(this,Eg,e.methodOfCreation||""),S(this,ph,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(S(this,Ri,!0),T(this,jt,Mm).call(this,e),T(this,jt,ro).call(this)):c(this,nr)&&(S(this,dh,e.anchorNode),S(this,Ag,e.anchorOffset),S(this,Sg,e.focusNode),S(this,wg,e.focusOffset),T(this,jt,tA).call(this),T(this,jt,ro).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=ue.prototype;return Zt(this,"_keyboardManager",new Ng([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Ri)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,as),methodOfCreation:c(this,Eg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,s){var a;De.initialize(e,s),ue._defaultColor||(ue._defaultColor=((a=s.highlightColors)==null?void 0:a.values().next().value)||"#fff066")}static updateDefaultParams(e,s){switch(e){case ee.HIGHLIGHT_DEFAULT_COLOR:ue._defaultColor=s;break;case ee.HIGHLIGHT_THICKNESS:ue._defaultThickness=s;break}}translateInPage(e,s){}get toolbarPosition(){return c(this,gh)}updateParams(e,s){switch(e){case ee.HIGHLIGHT_COLOR:T(this,jt,AT).call(this,s);break;case ee.HIGHLIGHT_THICKNESS:T(this,jt,ST).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ee.HIGHLIGHT_DEFAULT_COLOR,ue._defaultColor],[ee.HIGHLIGHT_THICKNESS,ue._defaultThickness]]}get propertiesToUpdate(){return[[ee.HIGHLIGHT_COLOR,this.color||ue._defaultColor],[ee.HIGHLIGHT_THICKNESS,c(this,as)||ue._defaultThickness],[ee.HIGHLIGHT_FREE,c(this,Ri)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(S(this,fh,new $m({editor:this})),e.addColorPicker(c(this,fh))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(T(this,jt,Xd).call(this))}getBaseTranslation(){return[0,0]}getRect(e,s){return super.getRect(e,s,T(this,jt,Xd).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){T(this,jt,eA).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(T(this,jt,ro).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let s=!1;this.parent&&!e?T(this,jt,eA).call(this):e&&(T(this,jt,ro).call(this,e),s=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),s&&this.select()}rotate(e){var l,o,d;const{drawLayer:s}=this.parent;let a;c(this,Ri)?(e=(e-this.rotation+360)%360,a=T(l=ue,us,fc).call(l,c(this,ss).box,e)):a=T(o=ue,us,fc).call(o,[this.x,this.y,this.width,this.height],e),s.updateProperties(c(this,Rn),{bbox:a,root:{"data-main-rotation":e}}),s.updateProperties(c(this,ji),{bbox:T(d=ue,us,fc).call(d,c(this,hn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();c(this,ph)&&(e.setAttribute("aria-label",c(this,ph)),e.setAttribute("role","mark")),c(this,Ri)?e.classList.add("free"):this.div.addEventListener("keydown",T(this,jt,ET).bind(this),{signal:this._uiManager._signal});const s=S(this,nu,document.createElement("div"));e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=c(this,iu);const[a,l]=this.parentDimensions;return this.setDims(this.width*a,this.height*l),PA(this,c(this,nu),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,ji),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,ji),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:T(this,jt,Dm).call(this,!0);break;case 1:case 3:T(this,jt,Dm).call(this,!1);break}}select(){var e;super.select(),c(this,ji)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,ji),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),c(this,ji)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,ji),{rootClass:{selected:!1}}),c(this,Ri)||T(this,jt,Dm).call(this,!1))}get _mustFixPosition(){return!c(this,Ri)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(c(this,Rn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(c(this,ji),{rootClass:{hidden:!e}}))}static startHighlighting(e,s,{target:a,x:l,y:o}){const{x:d,y:f,width:g,height:m}=a.getBoundingClientRect(),v=new AbortController,b=e.combinedSignal(v),A=E=>{v.abort(),T(this,us,CT).call(this,e,E)};window.addEventListener("blur",A,{signal:b}),window.addEventListener("pointerup",A,{signal:b}),window.addEventListener("pointerdown",Ze,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Ns,{signal:b}),a.addEventListener("pointermove",T(this,us,TT).bind(this,e),{signal:b}),this._freeHighlight=new W0({x:l,y:o},[d,f,g,m],e.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,s,a){var _,C,R,L;let l=null;if(e instanceof eT){const{data:{quadPoints:O,rect:P,rotation:M,id:k,color:U,opacity:$,popupRef:G},parent:{page:{pageNumber:Z}}}=e;l=e={annotationType:Bt.HIGHLIGHT,color:Array.from(U),opacity:$,quadPoints:O,boxes:null,pageIndex:Z-1,rect:P.slice(0),rotation:M,id:k,deleted:!1,popupRef:G}}else if(e instanceof BA){const{data:{inkLists:O,rect:P,rotation:M,id:k,color:U,borderStyle:{rawWidth:$},popupRef:G},parent:{page:{pageNumber:Z}}}=e;l=e={annotationType:Bt.HIGHLIGHT,color:Array.from(U),thickness:$,inkLists:O,boxes:null,pageIndex:Z-1,rect:P.slice(0),rotation:M,id:k,deleted:!1,popupRef:G}}const{color:o,quadPoints:d,inkLists:f,opacity:g}=e,m=await super.deserialize(e,s,a);m.color=wt.makeHexColor(...o),S(m,sr,g||1),f&&S(m,as,e.thickness),m.annotationElementId=e.id||null,m._initialData=l;const[v,b]=m.pageDimensions,[A,E]=m.pageTranslation;if(d){const O=S(m,nr,[]);for(let P=0;P<d.length;P+=8)O.push({x:(d[P]-A)/v,y:1-(d[P+1]-E)/b,width:(d[P+2]-d[P])/v,height:(d[P+1]-d[P+5])/b});T(_=m,jt,tA).call(_),T(C=m,jt,ro).call(C),m.rotate(m.rotation)}else if(f){S(m,Ri,!0);const O=f[0],P={x:O[0]-A,y:b-(O[1]-E)},M=new W0(P,[0,0,v,b],1,c(m,as)/2,!0,.001);for(let $=0,G=O.length;$<G;$+=2)P.x=O[$]-A,P.y=b-(O[$+1]-E),M.add(P);const{id:k,clipPathId:U}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:M.toSVGPath()}},!0,!0);T(R=m,jt,Mm).call(R,{highlightOutlines:M.getOutlines(),highlightId:k,clipPathId:U}),T(L=m,jt,ro).call(L),m.rotate(m.parentRotation)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),a=De._colorManager.convert(this.color),l={annotationType:Bt.HIGHLIGHT,color:a,opacity:c(this,sr),thickness:c(this,as),quadPoints:T(this,jt,_T).call(this),outlines:T(this,jt,xT).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:T(this,jt,Xd).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!T(this,jt,RT).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};dh=new WeakMap,Ag=new WeakMap,nr=new WeakMap,iu=new WeakMap,fh=new WeakMap,hn=new WeakMap,Sg=new WeakMap,wg=new WeakMap,nu=new WeakMap,ss=new WeakMap,Rn=new WeakMap,Ri=new WeakMap,gh=new WeakMap,sr=new WeakMap,ji=new WeakMap,ph=new WeakMap,as=new WeakMap,Eg=new WeakMap,jt=new WeakSet,tA=function(){const e=new $0(c(this,nr),.001);S(this,ss,e.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,ss).box;const s=new $0(c(this,nr),.0025,.001,this._uiManager.direction==="ltr");S(this,hn,s.getOutlines());const{lastPoint:a}=c(this,hn);S(this,gh,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height])},Mm=function({highlightOutlines:e,highlightId:s,clipPathId:a}){var v,b;if(S(this,ss,e),S(this,hn,e.getNewOutline(c(this,as)/2+1.5,.0025)),s>=0)S(this,Rn,s),S(this,iu,a),this.parent.drawLayer.finalizeDraw(s,{bbox:e.box,path:{d:e.toSVGPath()}}),S(this,ji,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,hn).box,path:{d:c(this,hn).toSVGPath()}},!0));else if(this.parent){const A=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,Rn),{bbox:T(v=ue,us,fc).call(v,c(this,ss).box,(A-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,ji),{bbox:T(b=ue,us,fc).call(b,c(this,hn).box,A),path:{d:c(this,hn).toSVGPath()}})}const[o,d,f,g]=e.box;switch(this.rotation){case 0:this.x=o,this.y=d,this.width=f,this.height=g;break;case 90:{const[A,E]=this.parentDimensions;this.x=d,this.y=1-o,this.width=f*E/A,this.height=g*A/E;break}case 180:this.x=1-o,this.y=1-d,this.width=f,this.height=g;break;case 270:{const[A,E]=this.parentDimensions;this.x=1-d,this.y=o,this.width=f*E/A,this.height=g*A/E;break}}const{lastPoint:m}=c(this,hn);S(this,gh,[(m[0]-o)/f,(m[1]-d)/g])},AT=function(e){const s=(o,d)=>{var f,g;this.color=o,S(this,sr,d),(f=this.parent)==null||f.drawLayer.updateProperties(c(this,Rn),{root:{fill:o,"fill-opacity":d}}),(g=c(this,fh))==null||g.updateColor(o)},a=this.color,l=c(this,sr);this.addCommands({cmd:s.bind(this,e,ue._defaultOpacity),undo:s.bind(this,a,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ee.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},ST=function(e){const s=c(this,as),a=l=>{S(this,as,l),T(this,jt,wT).call(this,l)};this.addCommands({cmd:a.bind(this,e),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ee.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},wT=function(e){if(!c(this,Ri))return;T(this,jt,Mm).call(this,{highlightOutlines:c(this,ss).getNewOutline(e/2)}),this.fixAndSetPosition();const[s,a]=this.parentDimensions;this.setDims(this.width*s,this.height*a)},eA=function(){c(this,Rn)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Rn)),S(this,Rn,null),this.parent.drawLayer.remove(c(this,ji)),S(this,ji,null))},ro=function(e=this.parent){c(this,Rn)===null&&({id:Xi(this,Rn)._,clipPathId:Xi(this,iu)._}=e.drawLayer.draw({bbox:c(this,ss).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":c(this,sr)},rootClass:{highlight:!0,free:c(this,Ri)},path:{d:c(this,ss).toSVGPath()}},!1,!0),S(this,ji,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,Ri)},bbox:c(this,hn).box,path:{d:c(this,hn).toSVGPath()}},c(this,Ri))),c(this,nu)&&(c(this,nu).style.clipPath=c(this,iu)))},us=new WeakSet,fc=function([e,s,a,l],o){switch(o){case 90:return[1-s-l,e,l,a];case 180:return[1-e-a,1-s-l,a,l];case 270:return[s,1-e-a,l,a]}return[e,s,a,l]},ET=function(e){ue._keyboardManager.exec(this,e)},Dm=function(e){if(!c(this,dh))return;const s=window.getSelection();e?s.setPosition(c(this,dh),c(this,Ag)):s.setPosition(c(this,Sg),c(this,wg))},Xd=function(){return c(this,Ri)?this.rotation:0},_T=function(){if(c(this,Ri))return null;const[e,s]=this.pageDimensions,[a,l]=this.pageTranslation,o=c(this,nr),d=new Float32Array(o.length*8);let f=0;for(const{x:g,y:m,width:v,height:b}of o){const A=g*e+a,E=(1-m)*s+l;d[f]=d[f+4]=A,d[f+1]=d[f+3]=E,d[f+2]=d[f+6]=A+v*e,d[f+5]=d[f+7]=E-b*s,f+=8}return d},xT=function(e){return c(this,ss).serialize(e,T(this,jt,Xd).call(this))},TT=function(e,s){this._freeHighlight.add(s)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},CT=function(e,s){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},RT=function(e){const{color:s}=this._initialData;return e.color.some((a,l)=>a!==s[l])},x(ue,us),At(ue,"_defaultColor",null),At(ue,"_defaultOpacity",1),At(ue,"_defaultThickness",12),At(ue,"_type","highlight"),At(ue,"_editorType",Bt.HIGHLIGHT),At(ue,"_freeHighlightId",-1),At(ue,"_freeHighlight",null),At(ue,"_freeHighlightClipId","");let Km=ue;var su;class MT{constructor(){x(this,su,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){c(this,su)[t]=e}toSVGProperties(){const t=c(this,su);return S(this,su,Object.create(null)),{root:t}}reset(){S(this,su,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){ye("Not implemented")}}su=new WeakMap;var Mn,mh,pi,au,ru,pl,ml,yl,lu,ae,iA,nA,sA,$d,DT,Lm,Kd,gc;const mt=class mt extends De{constructor(e){super(e);x(this,ae);x(this,Mn,null);x(this,mh);At(this,"_drawId",null);S(this,mh,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(T(this,ae,iA).call(this,e),T(this,ae,$d).call(this))}static _mergeSVGProperties(e,s){const a=new Set(Object.keys(e));for(const[l,o]of Object.entries(s))a.has(l)?Object.assign(e[l],o):e[l]=o;return e}static getDefaultDrawingOptions(e){ye("Not implemented")}static get typesMap(){ye("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,s){const a=this.typesMap.get(e);a&&this._defaultDrawingOptions.updateProperty(a,s),this._currentParent&&(c(mt,pi).updateProperty(a,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,s){const a=this.constructor.typesMap.get(e);a&&this._updateProperty(e,a,s)}static get defaultPropertiesToUpdate(){const e=[],s=this._defaultDrawingOptions;for(const[a,l]of this.typesMap)e.push([a,s[l]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:s}=this;for(const[a,l]of this.constructor.typesMap)e.push([a,s[l]]);return e}_updateProperty(e,s,a){const l=this._drawingOptions,o=l[s],d=f=>{var m;l.updateProperty(s,f);const g=c(this,Mn).updateProperty(s,f);g&&T(this,ae,Kd).call(this,g),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,l.toSVGProperties())};this.addCommands({cmd:d.bind(this,a),undo:d.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(c(this,Mn).getPathResizingSVGProperties(T(this,ae,Lm).call(this)),{bbox:T(this,ae,gc).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(c(this,Mn).getPathResizedSVGProperties(T(this,ae,Lm).call(this)),{bbox:T(this,ae,gc).call(this)}))}_onTranslating(e,s){var a;(a=this.parent)==null||a.drawLayer.updateProperties(this._drawId,{bbox:T(this,ae,gc).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(c(this,Mn).getPathTranslatedSVGProperties(T(this,ae,Lm).call(this),this.parentDimensions),{bbox:T(this,ae,gc).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,mh)&&(S(this,mh,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){T(this,ae,sA).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(T(this,ae,$d).call(this),T(this,ae,Kd).call(this,c(this,Mn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let s=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),T(this,ae,sA).call(this)):e&&(this._uiManager.addShouldRescale(this),T(this,ae,$d).call(this,e),s=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties({bbox:T(this,ae,gc).call(this)},c(this,Mn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&T(this,ae,Kd).call(this,c(this,Mn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,s;this._isCopy&&(e=this.x,s=this.y);const a=super.render();a.classList.add("draw");const l=document.createElement("div");a.append(l),l.setAttribute("aria-hidden","true"),l.className="internal";const[o,d]=this.parentDimensions;return this.setDims(this.width*o,this.height*d),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,s),a}static createDrawerInstance(e,s,a,l,o){ye("Not implemented")}static startDrawing(e,s,a,l){var C;const{target:o,offsetX:d,offsetY:f,pointerId:g,pointerType:m}=l;if(c(mt,ml)&&c(mt,ml)!==m)return;const{viewport:{rotation:v}}=e,{width:b,height:A}=o.getBoundingClientRect(),E=S(mt,au,new AbortController),_=e.combinedSignal(E);if(c(mt,pl)||S(mt,pl,g),c(mt,ml)??S(mt,ml,m),window.addEventListener("pointerup",R=>{var L;c(mt,pl)===R.pointerId?this._endDraw(R):(L=c(mt,yl))==null||L.delete(R.pointerId)},{signal:_}),window.addEventListener("pointercancel",R=>{var L;c(mt,pl)===R.pointerId?this._currentParent.endDrawingSession():(L=c(mt,yl))==null||L.delete(R.pointerId)},{signal:_}),window.addEventListener("pointerdown",R=>{c(mt,ml)===R.pointerType&&((c(mt,yl)||S(mt,yl,new Set)).add(R.pointerId),c(mt,pi).isCancellable()&&(c(mt,pi).removeLastElement(),c(mt,pi).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",Ns,{signal:_}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:_}),o.addEventListener("touchmove",R=>{R.timeStamp===c(mt,lu)&&Ze(R)},{signal:_}),e.toggleDrawing(),(C=s._editorUndoBar)==null||C.hide(),c(mt,pi)){e.drawLayer.updateProperties(this._currentDrawId,c(mt,pi).startNew(d,f,b,A,v));return}s.updateUIForDefaultProperties(this),S(mt,pi,this.createDrawerInstance(d,f,b,A,v)),S(mt,ru,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(c(mt,ru).toSVGProperties(),c(mt,pi).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(S(mt,lu,-1),!c(mt,pi))return;const{offsetX:s,offsetY:a,pointerId:l}=e;if(c(mt,pl)===l){if(((o=c(mt,yl))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(mt,pi).add(s,a)),S(mt,lu,e.timeStamp),Ze(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,S(mt,pi,null),S(mt,ru,null),S(mt,ml,null),S(mt,lu,NaN)),c(mt,au)&&(c(mt,au).abort(),S(mt,au,null),S(mt,pl,NaN),S(mt,yl,null))}static _endDraw(e){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,c(mt,pi).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const a=c(mt,pi),l=this._currentDrawId,o=a.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(l,a.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(l,a.removeLastElement())},mustExec:!1,type:ee.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(ee.DRAW_STEP),!c(mt,pi).isEmpty()){const{pageDimensions:[a,l],scale:o}=s,d=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(mt,pi).getOutlines(a*o,l*o,o,this._INNER_MARGIN),drawingOptions:c(mt,ru),mustBeCommitted:!e});return this._cleanup(!0),d}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,s,a,l,o,d){ye("Not implemented")}static async deserialize(e,s,a){var v,b;const{rawDims:{pageWidth:l,pageHeight:o,pageX:d,pageY:f}}=s.viewport,g=this.deserializeDraw(d,f,l,o,this._INNER_MARGIN,e),m=await super.deserialize(e,s,a);return m.createDrawingOptions(e),T(v=m,ae,iA).call(v,{drawOutlines:g}),T(b=m,ae,$d).call(b),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[s,a]=this.pageTranslation,[l,o]=this.pageDimensions;return c(this,Mn).serialize([s,a,l,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Mn=new WeakMap,mh=new WeakMap,pi=new WeakMap,au=new WeakMap,ru=new WeakMap,pl=new WeakMap,ml=new WeakMap,yl=new WeakMap,lu=new WeakMap,ae=new WeakSet,iA=function({drawOutlines:e,drawId:s,drawingOptions:a}){S(this,Mn,e),this._drawingOptions||(this._drawingOptions=a),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,e.defaultProperties)):this._drawId=T(this,ae,nA).call(this,e,this.parent),T(this,ae,Kd).call(this,e.box)},nA=function(e,s){const{id:a}=s.drawLayer.draw(mt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return a},sA=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},$d=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=T(this,ae,nA).call(this,c(this,Mn),e)}},DT=function([e,s,a,l]){const{parentDimensions:[o,d],rotation:f}=this;switch(f){case 90:return[s,1-e,a*(d/o),l*(o/d)];case 180:return[1-e,1-s,a,l];case 270:return[1-s,e,a*(d/o),l*(o/d)];default:return[e,s,a,l]}},Lm=function(){const{x:e,y:s,width:a,height:l,parentDimensions:[o,d],rotation:f}=this;switch(f){case 90:return[1-s,e,a*(o/d),l*(d/o)];case 180:return[1-e,1-s,a,l];case 270:return[s,1-e,a*(o/d),l*(d/o)];default:return[e,s,a,l]}},Kd=function(e){if([this.x,this.y,this.width,this.height]=T(this,ae,DT).call(this,e),this.div){this.fixAndSetPosition();const[s,a]=this.parentDimensions;this.setDims(this.width*s,this.height*a)}this._onResized()},gc=function(){const{x:e,y:s,width:a,height:l,rotation:o,parentRotation:d,parentDimensions:[f,g]}=this;switch((o*4+d)/90){case 1:return[1-s-l,e,l,a];case 2:return[1-e-a,1-s-l,a,l];case 3:return[s,1-e-a,l,a];case 4:return[e,s-a*(f/g),l*(g/f),a*(f/g)];case 5:return[1-s,e,a*(f/g),l*(g/f)];case 6:return[1-e-l*(g/f),1-s,l*(g/f),a*(f/g)];case 7:return[s-a*(f/g),1-e-l*(g/f),a*(f/g),l*(g/f)];case 8:return[e-a,s-l,a,l];case 9:return[1-s,e-a,l,a];case 10:return[1-e,1-s,a,l];case 11:return[s-l,1-e,l,a];case 12:return[e-l*(g/f),s,l*(g/f),a*(f/g)];case 13:return[1-s-a*(f/g),e-l*(g/f),a*(f/g),l*(g/f)];case 14:return[1-e,1-s-a*(f/g),l*(g/f),a*(f/g)];case 15:return[s,1-e,a*(f/g),l*(g/f)];default:return[e,s,a,l]}},At(mt,"_currentDrawId",-1),At(mt,"_currentParent",null),x(mt,pi,null),x(mt,au,null),x(mt,ru,null),x(mt,pl,NaN),x(mt,ml,null),x(mt,yl,null),x(mt,lu,NaN),At(mt,"_INNER_MARGIN",3);let Wm=mt;var na,mi,yi,ou,yh,Wi,Mi,rs,uu,cu,hu,vh,Om;class lO{constructor(t,e,s,a,l,o){x(this,vh);x(this,na,new Float64Array(6));x(this,mi);x(this,yi);x(this,ou);x(this,yh);x(this,Wi);x(this,Mi,"");x(this,rs,0);x(this,uu,new zg);x(this,cu);x(this,hu);S(this,cu,s),S(this,hu,a),S(this,ou,l),S(this,yh,o),[t,e]=T(this,vh,Om).call(this,t,e);const d=S(this,mi,[NaN,NaN,NaN,NaN,t,e]);S(this,Wi,[t,e]),S(this,yi,[{line:d,points:c(this,Wi)}]),c(this,na).set(d,0)}updateProperty(t,e){t==="stroke-width"&&S(this,yh,e)}isEmpty(){return!c(this,yi)||c(this,yi).length===0}isCancellable(){return c(this,Wi).length<=10}add(t,e){[t,e]=T(this,vh,Om).call(this,t,e);const[s,a,l,o]=c(this,na).subarray(2,6),d=t-l,f=e-o;return Math.hypot(c(this,cu)*d,c(this,hu)*f)<=2?null:(c(this,Wi).push(t,e),isNaN(s)?(c(this,na).set([l,o,t,e],2),c(this,mi).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(c(this,na)[0])&&c(this,mi).splice(6,6),c(this,na).set([s,a,l,o,t,e],0),c(this,mi).push(...pt.createBezierPoints(s,a,l,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(c(this,Wi).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,a,l){S(this,cu,s),S(this,hu,a),S(this,ou,l),[t,e]=T(this,vh,Om).call(this,t,e);const o=S(this,mi,[NaN,NaN,NaN,NaN,t,e]);S(this,Wi,[t,e]);const d=c(this,yi).at(-1);return d&&(d.line=new Float32Array(d.line),d.points=new Float32Array(d.points)),c(this,yi).push({line:o,points:c(this,Wi)}),c(this,na).set(o,0),S(this,rs,0),this.toSVGPath(),null}getLastElement(){return c(this,yi).at(-1)}setLastElement(t){return c(this,yi)?(c(this,yi).push(t),S(this,mi,t.line),S(this,Wi,t.points),S(this,rs,0),{path:{d:this.toSVGPath()}}):c(this,uu).setLastElement(t)}removeLastElement(){if(!c(this,yi))return c(this,uu).removeLastElement();c(this,yi).pop(),S(this,Mi,"");for(let t=0,e=c(this,yi).length;t<e;t++){const{line:s,points:a}=c(this,yi)[t];S(this,mi,s),S(this,Wi,a),S(this,rs,0),this.toSVGPath()}return{path:{d:c(this,Mi)}}}toSVGPath(){const t=pt.svgRound(c(this,mi)[4]),e=pt.svgRound(c(this,mi)[5]);if(c(this,Wi).length===2)return S(this,Mi,`${c(this,Mi)} M ${t} ${e} Z`),c(this,Mi);if(c(this,Wi).length<=6){const a=c(this,Mi).lastIndexOf("M");S(this,Mi,`${c(this,Mi).slice(0,a)} M ${t} ${e}`),S(this,rs,6)}if(c(this,Wi).length===4){const a=pt.svgRound(c(this,mi)[10]),l=pt.svgRound(c(this,mi)[11]);return S(this,Mi,`${c(this,Mi)} L ${a} ${l}`),S(this,rs,12),c(this,Mi)}const s=[];c(this,rs)===0&&(s.push(`M ${t} ${e}`),S(this,rs,6));for(let a=c(this,rs),l=c(this,mi).length;a<l;a+=6){const[o,d,f,g,m,v]=c(this,mi).slice(a,a+6).map(pt.svgRound);s.push(`C${o} ${d} ${f} ${g} ${m} ${v}`)}return S(this,Mi,c(this,Mi)+s.join(" ")),S(this,rs,c(this,mi).length),c(this,Mi)}getOutlines(t,e,s,a){const l=c(this,yi).at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),c(this,uu).build(c(this,yi),t,e,s,c(this,ou),c(this,yh),a),S(this,na,null),S(this,mi,null),S(this,yi,null),S(this,Mi,null),c(this,uu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}na=new WeakMap,mi=new WeakMap,yi=new WeakMap,ou=new WeakMap,yh=new WeakMap,Wi=new WeakMap,Mi=new WeakMap,rs=new WeakMap,uu=new WeakMap,cu=new WeakMap,hu=new WeakMap,vh=new WeakSet,Om=function(t,e){return pt._normalizePoint(t,e,c(this,cu),c(this,hu),c(this,ou))};var Qi,_g,xg,Dn,sa,aa,bh,Ah,du,Oi,ka,LT,OT,NT;class zg extends pt{constructor(){super(...arguments);x(this,Oi);x(this,Qi);x(this,_g,0);x(this,xg);x(this,Dn);x(this,sa);x(this,aa);x(this,bh);x(this,Ah);x(this,du)}build(e,s,a,l,o,d,f){S(this,sa,s),S(this,aa,a),S(this,bh,l),S(this,Ah,o),S(this,du,d),S(this,xg,f??0),S(this,Dn,e),T(this,Oi,OT).call(this)}get thickness(){return c(this,du)}setLastElement(e){return c(this,Dn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,Dn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:s}of c(this,Dn)){if(e.push(`M${pt.svgRound(s[4])} ${pt.svgRound(s[5])}`),s.length===6){e.push("Z");continue}if(s.length===12&&isNaN(s[6])){e.push(`L${pt.svgRound(s[10])} ${pt.svgRound(s[11])}`);continue}for(let a=6,l=s.length;a<l;a+=6){const[o,d,f,g,m,v]=s.subarray(a,a+6).map(pt.svgRound);e.push(`C${o} ${d} ${f} ${g} ${m} ${v}`)}}return e.join("")}serialize([e,s,a,l],o){const d=[],f=[],[g,m,v,b]=T(this,Oi,LT).call(this);let A,E,_,C,R,L,O,P,M;switch(c(this,Ah)){case 0:M=pt._rescale,A=e,E=s+l,_=a,C=-l,R=e+g*a,L=s+(1-m-b)*l,O=e+(g+v)*a,P=s+(1-m)*l;break;case 90:M=pt._rescaleAndSwap,A=e,E=s,_=a,C=l,R=e+m*a,L=s+g*l,O=e+(m+b)*a,P=s+(g+v)*l;break;case 180:M=pt._rescale,A=e+a,E=s,_=-a,C=l,R=e+(1-g-v)*a,L=s+m*l,O=e+(1-g)*a,P=s+(m+b)*l;break;case 270:M=pt._rescaleAndSwap,A=e+a,E=s+l,_=-a,C=-l,R=e+(1-m-b)*a,L=s+(1-g-v)*l,O=e+(1-m)*a,P=s+(1-g)*l;break}for(const{line:k,points:U}of c(this,Dn))d.push(M(k,A,E,_,C,o?new Array(k.length):null)),f.push(M(U,A,E,_,C,o?new Array(U.length):null));return{lines:d,points:f,rect:[R,L,O,P]}}static deserialize(e,s,a,l,o,{paths:{lines:d,points:f},rotation:g,thickness:m}){const v=[];let b,A,E,_,C;switch(g){case 0:C=pt._rescale,b=-e/a,A=s/l+1,E=1/a,_=-1/l;break;case 90:C=pt._rescaleAndSwap,b=-s/l,A=-e/a,E=1/l,_=1/a;break;case 180:C=pt._rescale,b=e/a+1,A=-s/l,E=-1/a,_=1/l;break;case 270:C=pt._rescaleAndSwap,b=s/l+1,A=e/a+1,E=-1/l,_=-1/a;break}if(!d){d=[];for(const L of f){const O=L.length;if(O===2){d.push(new Float32Array([NaN,NaN,NaN,NaN,L[0],L[1]]));continue}if(O===4){d.push(new Float32Array([NaN,NaN,NaN,NaN,L[0],L[1],NaN,NaN,NaN,NaN,L[2],L[3]]));continue}const P=new Float32Array(3*(O-2));d.push(P);let[M,k,U,$]=L.subarray(0,4);P.set([NaN,NaN,NaN,NaN,M,k],0);for(let G=4;G<O;G+=2){const Z=L[G],it=L[G+1];P.set(pt.createBezierPoints(M,k,U,$,Z,it),(G-2)*3),[M,k,U,$]=[U,$,Z,it]}}}for(let L=0,O=d.length;L<O;L++)v.push({line:C(d[L].map(P=>P??NaN),b,A,E,_),points:C(f[L].map(P=>P??NaN),b,A,E,_)});const R=new this.prototype.constructor;return R.build(v,a,l,1,g,m,o),R}get box(){return c(this,Qi)}updateProperty(e,s){return e==="stroke-width"?T(this,Oi,NT).call(this,s):null}updateParentDimensions([e,s],a){const[l,o]=T(this,Oi,ka).call(this);S(this,sa,e),S(this,aa,s),S(this,bh,a);const[d,f]=T(this,Oi,ka).call(this),g=d-l,m=f-o,v=c(this,Qi);return v[0]-=g,v[1]-=m,v[2]+=2*g,v[3]+=2*m,v}updateRotation(e){return S(this,_g,e),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,Qi).map(pt.svgRound).join(" ")}get defaultProperties(){const[e,s]=c(this,Qi);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${pt.svgRound(e)} ${pt.svgRound(s)}`}}}get rotationTransform(){const[,,e,s]=c(this,Qi);let a=0,l=0,o=0,d=0,f=0,g=0;switch(c(this,_g)){case 90:l=s/e,o=-e/s,f=e;break;case 180:a=-1,d=-1,f=e,g=s;break;case 270:l=-s/e,o=e/s,g=s;break;default:return""}return`matrix(${a} ${l} ${o} ${d} ${pt.svgRound(f)} ${pt.svgRound(g)})`}getPathResizingSVGProperties([e,s,a,l]){const[o,d]=T(this,Oi,ka).call(this),[f,g,m,v]=c(this,Qi);if(Math.abs(m-o)<=pt.PRECISION||Math.abs(v-d)<=pt.PRECISION){const C=e+a/2-(f+m/2),R=s+l/2-(g+v/2);return{path:{"transform-origin":`${pt.svgRound(e)} ${pt.svgRound(s)}`,transform:`${this.rotationTransform} translate(${C} ${R})`}}}const b=(a-2*o)/(m-2*o),A=(l-2*d)/(v-2*d),E=m/a,_=v/l;return{path:{"transform-origin":`${pt.svgRound(f)} ${pt.svgRound(g)}`,transform:`${this.rotationTransform} scale(${E} ${_}) translate(${pt.svgRound(o)} ${pt.svgRound(d)}) scale(${b} ${A}) translate(${pt.svgRound(-o)} ${pt.svgRound(-d)})`}}}getPathResizedSVGProperties([e,s,a,l]){const[o,d]=T(this,Oi,ka).call(this),f=c(this,Qi),[g,m,v,b]=f;if(f[0]=e,f[1]=s,f[2]=a,f[3]=l,Math.abs(v-o)<=pt.PRECISION||Math.abs(b-d)<=pt.PRECISION){const R=e+a/2-(g+v/2),L=s+l/2-(m+b/2);for(const{line:O,points:P}of c(this,Dn))pt._translate(O,R,L,O),pt._translate(P,R,L,P);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${pt.svgRound(e)} ${pt.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const A=(a-2*o)/(v-2*o),E=(l-2*d)/(b-2*d),_=-A*(g+o)+e+o,C=-E*(m+d)+s+d;if(A!==1||E!==1||_!==0||C!==0)for(const{line:R,points:L}of c(this,Dn))pt._rescale(R,_,C,A,E,R),pt._rescale(L,_,C,A,E,L);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${pt.svgRound(e)} ${pt.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,s],a){const[l,o]=a,d=c(this,Qi),f=e-d[0],g=s-d[1];if(c(this,sa)===l&&c(this,aa)===o)for(const{line:m,points:v}of c(this,Dn))pt._translate(m,f,g,m),pt._translate(v,f,g,v);else{const m=c(this,sa)/l,v=c(this,aa)/o;S(this,sa,l),S(this,aa,o);for(const{line:b,points:A}of c(this,Dn))pt._rescale(b,f,g,m,v,b),pt._rescale(A,f,g,m,v,A);d[2]*=m,d[3]*=v}return d[0]=e,d[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${pt.svgRound(e)} ${pt.svgRound(s)}`}}}get defaultSVGProperties(){const e=c(this,Qi);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${pt.svgRound(e[0])} ${pt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}Qi=new WeakMap,_g=new WeakMap,xg=new WeakMap,Dn=new WeakMap,sa=new WeakMap,aa=new WeakMap,bh=new WeakMap,Ah=new WeakMap,du=new WeakMap,Oi=new WeakSet,ka=function(e=c(this,du)){const s=c(this,xg)+e/2*c(this,bh);return c(this,Ah)%180===0?[s/c(this,sa),s/c(this,aa)]:[s/c(this,aa),s/c(this,sa)]},LT=function(){const[e,s,a,l]=c(this,Qi),[o,d]=T(this,Oi,ka).call(this,0);return[e+o,s+d,a-2*o,l-2*d]},OT=function(){const e=S(this,Qi,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:l}of c(this,Dn)){if(l.length<=12){for(let f=4,g=l.length;f<g;f+=6)wt.pointBoundingBox(l[f],l[f+1],e);continue}let o=l[4],d=l[5];for(let f=6,g=l.length;f<g;f+=6){const[m,v,b,A,E,_]=l.subarray(f,f+6);wt.bezierBoundingBox(o,d,m,v,b,A,E,_,e),o=E,d=_}}const[s,a]=T(this,Oi,ka).call(this);e[0]=Ji(e[0]-s,0,1),e[1]=Ji(e[1]-a,0,1),e[2]=Ji(e[2]+s,0,1),e[3]=Ji(e[3]+a,0,1),e[2]-=e[0],e[3]-=e[1]},NT=function(e){const[s,a]=T(this,Oi,ka).call(this);S(this,du,e);const[l,o]=T(this,Oi,ka).call(this),[d,f]=[l-s,o-a],g=c(this,Qi);return g[0]-=d,g[1]-=f,g[2]+=2*d,g[3]+=2*f,g};class xy extends MT{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:De._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new xy(this._viewParameters);return t.updateAll(this),t}}var gy,kT;const mc=class mc extends Wm{constructor(e){super({...e,name:"inkEditor"});x(this,gy);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,s){De.initialize(e,s),this._defaultDrawingOptions=new xy(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return Zt(this,"typesMap",new Map([[ee.INK_THICKNESS,"stroke-width"],[ee.INK_COLOR,"stroke"],[ee.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,s,a,l,o){return new lO(e,s,a,l,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,s,a,l,o,d){return zg.deserialize(e,s,a,l,o,d)}static async deserialize(e,s,a){let l=null;if(e instanceof BA){const{data:{inkLists:d,rect:f,rotation:g,id:m,color:v,opacity:b,borderStyle:{rawWidth:A},popupRef:E},parent:{page:{pageNumber:_}}}=e;l=e={annotationType:Bt.INK,color:Array.from(v),thickness:A,opacity:b,paths:{points:d},boxes:null,pageIndex:_-1,rect:f.slice(0),rotation:g,id:m,deleted:!1,popupRef:E}}const o=await super.deserialize(e,s,a);return o.annotationElementId=e.id||null,o._initialData=l,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:s,parent:a}=this;s.updateSVGProperty("stroke-width"),a.drawLayer.updateProperties(e,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:s,opacity:a}){this._drawingOptions=mc.getDefaultDrawingOptions({stroke:wt.makeHexColor(...e),"stroke-width":s,"stroke-opacity":a})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:a,rect:l}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":d,"stroke-width":f}}=this,g={annotationType:Bt.INK,color:De._colorManager.convert(o),opacity:d,thickness:f,paths:{lines:s,points:a},pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(g.isCopy=!0,g):this.annotationElementId&&!T(this,gy,kT).call(this,g)?null:(g.id=this.annotationElementId,g)}renderAnnotationElement(e){const{points:s,rect:a}=this.serializeDraw(!1);return e.updateEdited({rect:a,thickness:this._drawingOptions["stroke-width"],points:s}),null}};gy=new WeakSet,kT=function(e){const{color:s,thickness:a,opacity:l,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((d,f)=>d!==s[f])||e.thickness!==a||e.opacity!==l||e.pageIndex!==o},At(mc,"_type","ink"),At(mc,"_editorType",Bt.INK),At(mc,"_defaultDrawingOptions",null);let aA=mc;class rA extends zg{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const sm=8,Od=3;var fu,ce,lA,Rs,PT,zT,oA,Nm,FT,HT,BT,uA,cA,UT;class hr{static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:a},l,o,d,f){let g=new OffscreenCanvas(1,1),m=g.getContext("2d",{alpha:!1});const v=200,b=m.font=`${s} ${a} ${v}px ${e}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:E,actualBoundingBoxAscent:_,actualBoundingBoxDescent:C,fontBoundingBoxAscent:R,fontBoundingBoxDescent:L,width:O}=m.measureText(t),P=1.5,M=Math.ceil(Math.max(Math.abs(A)+Math.abs(E)||0,O)*P),k=Math.ceil(Math.max(Math.abs(_)+Math.abs(C)||v,Math.abs(R)+Math.abs(L)||v)*P);g=new OffscreenCanvas(M,k),m=g.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=b,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,M,k),m.fillStyle="black",m.fillText(t,M*(P-1)/2,k*(3-P)/2);const U=T(this,ce,uA).call(this,m.getImageData(0,0,M,k).data),$=T(this,ce,BT).call(this,U),G=T(this,ce,cA).call(this,$),Z=T(this,ce,oA).call(this,U,M,k,G);return this.processDrawnLines({lines:{curves:Z,width:M,height:k},pageWidth:l,pageHeight:o,rotation:d,innerMargin:f,mustSmooth:!0,areContours:!0})}static process(t,e,s,a,l){const[o,d,f]=T(this,ce,UT).call(this,t),[g,m]=T(this,ce,HT).call(this,o,d,f,Math.hypot(d,f)*c(this,fu).sigmaSFactor,c(this,fu).sigmaR,c(this,fu).kernelSize),v=T(this,ce,cA).call(this,m),b=T(this,ce,oA).call(this,g,d,f,v);return this.processDrawnLines({lines:{curves:b,width:d,height:f},pageWidth:e,pageHeight:s,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:a,innerMargin:l,mustSmooth:o,areContours:d}){a%180!==0&&([e,s]=[s,e]);const{curves:f,width:g,height:m}=t,v=t.thickness??0,b=[],A=Math.min(e/g,s/m),E=A/e,_=A/s,C=[];for(const{points:L}of f){const O=o?T(this,ce,FT).call(this,L):L;if(!O)continue;C.push(O);const P=O.length,M=new Float32Array(P),k=new Float32Array(3*(P===2?2:P-2));if(b.push({line:k,points:M}),P===2){M[0]=O[0]*E,M[1]=O[1]*_,k.set([NaN,NaN,NaN,NaN,M[0],M[1]],0);continue}let[U,$,G,Z]=O;U*=E,$*=_,G*=E,Z*=_,M.set([U,$,G,Z],0),k.set([NaN,NaN,NaN,NaN,U,$],0);for(let it=4;it<P;it+=2){const Mt=M[it]=O[it]*E,Rt=M[it+1]=O[it+1]*_;k.set(pt.createBezierPoints(U,$,G,Z,Mt,Rt),(it-2)*3),[U,$,G,Z]=[G,Z,Mt,Rt]}}if(b.length===0)return null;const R=d?new rA:new zg;return R.build(b,e,s,1,a,d?0:v,l),{outline:R,newCurves:C,areContours:d,thickness:v,width:g,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:s,width:a,height:l}){let o=1/0,d=-1/0,f=0;for(const O of t){f+=O.length;for(let P=2,M=O.length;P<M;P++){const k=O[P]-O[P-2];o=Math.min(o,k),d=Math.max(d,k)}}let g;o>=-128&&d<=127?g=Int8Array:o>=-32768&&d<=32767?g=Int16Array:g=Int32Array;const m=t.length,v=sm+Od*m,b=new Uint32Array(v);let A=0;b[A++]=v*Uint32Array.BYTES_PER_ELEMENT+(f-2*m)*g.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=a,b[A++]=l,b[A++]=e?0:1,b[A++]=Math.max(0,Math.floor(s??0)),b[A++]=m,b[A++]=g.BYTES_PER_ELEMENT;for(const O of t)b[A++]=O.length-2,b[A++]=O[0],b[A++]=O[1];const E=new CompressionStream("deflate-raw"),_=E.writable.getWriter();await _.ready,_.write(b);const C=g.prototype.constructor;for(const O of t){const P=new C(O.length-2);for(let M=2,k=O.length;M<k;M++)P[M-2]=O[M]-O[M-2];_.write(P)}_.close();const R=await new Response(E.readable).arrayBuffer(),L=new Uint8Array(R);return G_(L)}static async decompressSignature(t){try{const e=D2(t),{readable:s,writable:a}=new DecompressionStream("deflate-raw"),l=a.getWriter();await l.ready,l.write(e).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let o=null,d=0;for await(const O of s)o||(o=new Uint8Array(new Uint32Array(O.buffer,0,4)[0])),o.set(O,d),d+=O.length;const f=new Uint32Array(o.buffer,0,o.length>>2),g=f[1];if(g!==0)throw new Error(`Invalid version: ${g}`);const m=f[2],v=f[3],b=f[4]===0,A=f[5],E=f[6],_=f[7],C=[],R=(sm+Od*E)*Uint32Array.BYTES_PER_ELEMENT;let L;switch(_){case Int8Array.BYTES_PER_ELEMENT:L=new Int8Array(o.buffer,R);break;case Int16Array.BYTES_PER_ELEMENT:L=new Int16Array(o.buffer,R);break;case Int32Array.BYTES_PER_ELEMENT:L=new Int32Array(o.buffer,R);break}d=0;for(let O=0;O<E;O++){const P=f[Od*O+sm],M=new Float32Array(P+2);C.push(M);for(let k=0;k<Od-1;k++)M[k]=f[Od*O+sm+k+1];for(let k=0;k<P;k++)M[k+2]=M[k]+L[d++]}return{areContours:b,thickness:A,outlines:C,width:m,height:v}}catch(e){return It(`decompressSignature: ${e}`),null}}}fu=new WeakMap,ce=new WeakSet,lA=function(t,e,s,a){return s-=t,a-=e,s===0?a>0?0:4:s===1?a+6:2-a},Rs=new WeakMap,PT=function(t,e,s,a,l,o,d){const f=T(this,ce,lA).call(this,s,a,l,o);for(let g=0;g<8;g++){const m=(-g+f-d+16)%8,v=c(this,Rs)[2*m],b=c(this,Rs)[2*m+1];if(t[(s+v)*e+(a+b)]!==0)return m}return-1},zT=function(t,e,s,a,l,o,d){const f=T(this,ce,lA).call(this,s,a,l,o);for(let g=0;g<8;g++){const m=(g+f+d+16)%8,v=c(this,Rs)[2*m],b=c(this,Rs)[2*m+1];if(t[(s+v)*e+(a+b)]!==0)return m}return-1},oA=function(t,e,s,a){const l=t.length,o=new Int32Array(l);for(let m=0;m<l;m++)o[m]=t[m]<=a?1:0;for(let m=1;m<s-1;m++)o[m*e]=o[m*e+e-1]=0;for(let m=0;m<e;m++)o[m]=o[e*s-1-m]=0;let d=1,f;const g=[];for(let m=1;m<s-1;m++){f=1;for(let v=1;v<e-1;v++){const b=m*e+v,A=o[b];if(A===0)continue;let E=m,_=v;if(A===1&&o[b-1]===0)d+=1,_-=1;else if(A>=1&&o[b+1]===0)d+=1,_+=1,A>1&&(f=A);else{A!==1&&(f=Math.abs(A));continue}const C=[v,m],R=_===v+1,L={isHole:R,points:C,id:d,parent:0};g.push(L);let O;for(const it of g)if(it.id===f){O=it;break}O?O.isHole?L.parent=R?O.parent:f:L.parent=R?f:O.parent:L.parent=R?f:0;const P=T(this,ce,PT).call(this,o,e,m,v,E,_,0);if(P===-1){o[b]=-d,o[b]!==1&&(f=Math.abs(o[b]));continue}let M=c(this,Rs)[2*P],k=c(this,Rs)[2*P+1];const U=m+M,$=v+k;E=U,_=$;let G=m,Z=v;for(;;){const it=T(this,ce,zT).call(this,o,e,G,Z,E,_,1);M=c(this,Rs)[2*it],k=c(this,Rs)[2*it+1];const Mt=G+M,Rt=Z+k;C.push(Rt,Mt);const ht=G*e+Z;if(o[ht+1]===0?o[ht]=-d:o[ht]===1&&(o[ht]=d),Mt===m&&Rt===v&&G===U&&Z===$){o[b]!==1&&(f=Math.abs(o[b]));break}else E=G,_=Z,G=Mt,Z=Rt}}}return g},Nm=function(t,e,s,a){if(s-e<=4){for(let U=e;U<s-2;U+=2)a.push(t[U],t[U+1]);return}const l=t[e],o=t[e+1],d=t[s-4]-l,f=t[s-3]-o,g=Math.hypot(d,f),m=d/g,v=f/g,b=m*o-v*l,A=f/d,E=1/g,_=Math.atan(A),C=Math.cos(_),R=Math.sin(_),L=E*(Math.abs(C)+Math.abs(R)),O=E*(1-L+L**2),P=Math.max(Math.atan(Math.abs(R+C)*O),Math.atan(Math.abs(R-C)*O));let M=0,k=e;for(let U=e+2;U<s-2;U+=2){const $=Math.abs(b-m*t[U+1]+v*t[U]);$>M&&(k=U,M=$)}M>(g*P)**2?(T(this,ce,Nm).call(this,t,e,k+2,a),T(this,ce,Nm).call(this,t,k,s,a)):a.push(l,o)},FT=function(t){const e=[],s=t.length;return T(this,ce,Nm).call(this,t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e},HT=function(t,e,s,a,l,o){const d=new Float32Array(o**2),f=-2*a**2,g=o>>1;for(let _=0;_<o;_++){const C=(_-g)**2;for(let R=0;R<o;R++)d[_*o+R]=Math.exp((C+(R-g)**2)/f)}const m=new Float32Array(256),v=-2*l**2;for(let _=0;_<256;_++)m[_]=Math.exp(_**2/v);const b=t.length,A=new Uint8Array(b),E=new Uint32Array(256);for(let _=0;_<s;_++)for(let C=0;C<e;C++){const R=_*e+C,L=t[R];let O=0,P=0;for(let k=0;k<o;k++){const U=_+k-g;if(!(U<0||U>=s))for(let $=0;$<o;$++){const G=C+$-g;if(G<0||G>=e)continue;const Z=t[U*e+G],it=d[k*o+$]*m[Math.abs(Z-L)];O+=Z*it,P+=it}}const M=A[R]=Math.round(O/P);E[M]++}return[A,E]},BT=function(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e},uA=function(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let a=-1/0,l=1/0;for(let d=0,f=s.length;d<f;d++){if(t[(d<<2)+3]===0){a=s[d]=255;continue}const m=s[d]=t[d<<2];m>a&&(a=m),m<l&&(l=m)}const o=255/(a-l);for(let d=0;d<e;d++)s[d]=(s[d]-l)*o;return s},cA=function(t){let e,s=-1/0,a=-1/0;const l=t.findIndex(f=>f!==0);let o=l,d=l;for(e=l;e<256;e++){const f=t[e];f>s&&(e-o>a&&(a=e-o,d=e-1),s=f,o=e)}for(e=d-1;e>=0&&!(t[e]>t[e+1]);e--);return e},UT=function(t){const e=t,{width:s,height:a}=t,{maxDim:l}=c(this,fu);let o=s,d=a;if(s>l||a>l){let b=s,A=a,E=Math.log2(Math.max(s,a)/l);const _=Math.floor(E);E=E===_?_-1:_;for(let R=0;R<E;R++){o=b,d=A,o>l&&(o=Math.ceil(o/2)),d>l&&(d=Math.ceil(d/2));const L=new OffscreenCanvas(o,d);L.getContext("2d").drawImage(t,0,0,b,A,0,0,o,d),b=o,A=d,t!==e&&t.close(),t=L.transferToImageBitmap()}const C=Math.min(l/o,l/d);o=Math.round(o*C),d=Math.round(d*C)}const g=new OffscreenCanvas(o,d).getContext("2d",{willReadFrequently:!0});g.filter="grayscale(1)",g.drawImage(t,0,0,t.width,t.height,0,0,o,d);const m=g.getImageData(0,0,o,d).data;return[T(this,ce,uA).call(this,m),o,d]},x(hr,ce),x(hr,fu,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),x(hr,Rs,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class UA extends MT{constructor(){super(),super.updateProperties({fill:"CanvasText","stroke-width":0})}clone(){const t=new UA;return t.updateAll(this),t}}class IA extends xy{constructor(t){super(t),super.updateProperties({stroke:"CanvasText","stroke-width":1})}clone(){const t=new IA(this._viewParameters);return t.updateAll(this),t}}var vl,Ln,bl,Al;const bn=class bn extends Wm{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});x(this,vl,!1);x(this,Ln,null);x(this,bl,null);x(this,Al,null);this._willKeepAspectRatio=!0,S(this,bl,e.signatureData||null),S(this,Ln,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,s){De.initialize(e,s),this._defaultDrawingOptions=new UA,this._defaultDrawnSignatureOptions=new IA(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return Zt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,Ln)}}static computeTelemetryFinalData(e){const s=e.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,s;const{_isCopy:a}=this;if(a&&(this._isCopy=!1,e=this.x,s=this.y),super.render(),this._drawId===null)if(c(this,bl)){const{lines:l,mustSmooth:o,areContours:d,description:f,uuid:g,heightInPage:m}=c(this,bl),{rawDims:{pageWidth:v,pageHeight:b},rotation:A}=this.parent.viewport,E=hr.processDrawnLines({lines:l,pageWidth:v,pageHeight:b,rotation:A,innerMargin:bn._INNER_MARGIN,mustSmooth:o,areContours:d});this.addSignature(E,m,f,g)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return a&&(this._isCopy=!0,this._moveAfterPaste(e,s)),this.div}setUuid(e){S(this,Al,e),this.addEditToolbar()}getUuid(){return c(this,Al)}get description(){return c(this,Ln)}set description(e){S(this,Ln,e),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:s,thickness:a,width:l,height:o}=c(this,bl),d=Math.max(l,o),f=hr.processDrawnLines({lines:{curves:e.map(g=>({points:g})),thickness:a,width:l,height:o},pageWidth:d,pageHeight:d,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:f.outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&c(this,Ln)!==null&&(await e.addEditSignatureButton(this._uiManager.signatureManager,c(this,Al),c(this,Ln)),e.show()),e):null}addSignature(e,s,a,l){const{x:o,y:d}=this,{outline:f}=S(this,bl,e);S(this,vl,f instanceof rA),S(this,Ln,a),this.div.setAttribute("data-l10n-args",JSON.stringify({description:a}));let g;c(this,vl)?g=bn.getDefaultDrawingOptions():(g=bn._defaultDrawnSignatureOptions.clone(),g.updateProperties({"stroke-width":f.thickness})),this._addOutlines({drawOutlines:f,drawingOptions:g});const[m,v]=this.parentDimensions,[,b]=this.pageDimensions;let A=s/b;A=A>=1?.5:A,this.width*=A/this.height,this.width>=1&&(A*=.9/this.width,this.width=.9),this.height=A,this.setDims(m*this.width,v*this.height),this.x=o,this.y=d,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(l),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!l,hasDescription:!!a}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:s,pageHeight:a},rotation:l}=this.parent.viewport;return hr.process(e,s,a,l,bn._INNER_MARGIN)}getFromText(e,s){const{rawDims:{pageWidth:a,pageHeight:l},rotation:o}=this.parent.viewport;return hr.extractContoursFromText(e,s,a,l,o,bn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:s,pageHeight:a},rotation:l}=this.parent.viewport;return hr.processDrawnLines({lines:e,pageWidth:s,pageHeight:a,rotation:l,innerMargin:bn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:s}){e?this._drawingOptions=bn.getDefaultDrawingOptions():(this._drawingOptions=bn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:s,points:a,rect:l}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,d={annotationType:Bt.SIGNATURE,isSignature:!0,areContours:c(this,vl),color:[0,0,0],thickness:c(this,vl)?0:o,pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(d.paths={lines:s,points:a},d.uuid=c(this,Al),d.isCopy=!0):d.lines=s,c(this,Ln)&&(d.accessibilityData={type:"Figure",alt:c(this,Ln)}),d}static deserializeDraw(e,s,a,l,o,d){return d.areContours?rA.deserialize(e,s,a,l,o,d):zg.deserialize(e,s,a,l,o,d)}static async deserialize(e,s,a){var o;const l=await super.deserialize(e,s,a);return S(l,vl,e.areContours),S(l,Ln,((o=e.accessibilityData)==null?void 0:o.alt)||""),S(l,Al,e.uuid),l}};vl=new WeakMap,Ln=new WeakMap,bl=new WeakMap,Al=new WeakMap,At(bn,"_type","signature"),At(bn,"_editorType",Bt.SIGNATURE),At(bn,"_defaultDrawingOptions",null);let hA=bn;var Ce,vi,Sl,ar,wl,Sh,rr,gu,ra,On,wh,re,Wd,Qd,km,Pm,zm,fA,Fm,IT;class dA extends De{constructor(e){super({...e,name:"stampEditor"});x(this,re);x(this,Ce,null);x(this,vi,null);x(this,Sl,null);x(this,ar,null);x(this,wl,null);x(this,Sh,"");x(this,rr,null);x(this,gu,!1);x(this,ra,null);x(this,On,!1);x(this,wh,!1);S(this,ar,e.bitmapUrl),S(this,wl,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,s){De.initialize(e,s)}static isHandlingMimeForPasting(e){return a0.includes(e)}static paste(e,s){s.pasteEditor(Bt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const s=e.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(e=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:a}=this._uiManager;if(!a)throw new Error("No ML.");if(!await a.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:l,width:o,height:d}=e||this.copyCanvas(null,null,!0).imageData,f=await a.guess({name:"altText",request:{data:l,width:o,height:d,channels:l.length/(o*d)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const g=f.output;return await this.setGuessedAltText(g),s&&!this.hasAltTextData()&&(this.altTextData={alt:g,decorative:!1}),g}remove(){var e;c(this,vi)&&(S(this,Ce,null),this._uiManager.imageManager.deleteId(c(this,vi)),(e=c(this,rr))==null||e.remove(),S(this,rr,null),c(this,ra)&&(clearTimeout(c(this,ra)),S(this,ra,null))),super.remove()}rebuild(){if(!this.parent){c(this,vi)&&T(this,re,km).call(this);return}super.rebuild(),this.div!==null&&(c(this,vi)&&c(this,rr)===null&&T(this,re,km).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(c(this,Sl)||c(this,Ce)||c(this,ar)||c(this,wl)||c(this,vi)||c(this,gu))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,s;return this._isCopy&&(e=this.x,s=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),c(this,gu)||(c(this,Ce)?T(this,re,Pm).call(this):T(this,re,km).call(this)),this._isCopy&&this._moveAfterPaste(e,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,s){const{id:a,bitmap:l}=this._uiManager.imageManager.getFromCanvas(e,s);s.remove(),a&&this._uiManager.imageManager.isValidId(a)&&(S(this,vi,a),l&&S(this,Ce,l),S(this,gu,!1),T(this,re,Pm).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,ra)!==null&&clearTimeout(c(this,ra)),S(this,ra,setTimeout(()=>{S(this,ra,null),T(this,re,fA).call(this)},200))}copyCanvas(e,s,a=!1){var A;e||(e=224);const{width:l,height:o}=c(this,Ce),d=new gr;let f=c(this,Ce),g=l,m=o,v=null;if(s){if(l>s||o>s){const $=Math.min(s/l,s/o);g=Math.floor(l*$),m=Math.floor(o*$)}v=document.createElement("canvas");const E=v.width=Math.ceil(g*d.sx),_=v.height=Math.ceil(m*d.sy);c(this,On)||(f=T(this,re,zm).call(this,E,_));const C=v.getContext("2d");C.filter=this._uiManager.hcmFilter;let R="white",L="#cfcfd8";this._uiManager.hcmFilter!=="none"?L="black":(A=window.matchMedia)!=null&&A.call(window,"(prefers-color-scheme: dark)").matches&&(R="#8f8f9d",L="#42414d");const O=15,P=O*d.sx,M=O*d.sy,k=new OffscreenCanvas(P*2,M*2),U=k.getContext("2d");U.fillStyle=R,U.fillRect(0,0,P*2,M*2),U.fillStyle=L,U.fillRect(0,0,P,M),U.fillRect(P,M,P,M),C.fillStyle=C.createPattern(k,"repeat"),C.fillRect(0,0,E,_),C.drawImage(f,0,0,f.width,f.height,0,0,E,_)}let b=null;if(a){let E,_;if(d.symmetric&&f.width<e&&f.height<e)E=f.width,_=f.height;else if(f=c(this,Ce),l>e||o>e){const L=Math.min(e/l,e/o);E=Math.floor(l*L),_=Math.floor(o*L),c(this,On)||(f=T(this,re,zm).call(this,E,_))}const R=new OffscreenCanvas(E,_).getContext("2d",{willReadFrequently:!0});R.drawImage(f,0,0,f.width,f.height,0,0,E,_),b={width:E,height:_,data:R.getImageData(0,0,E,_).data}}return{canvas:v,width:g,height:m,imageData:b}}static async deserialize(e,s,a){var C;let l=null,o=!1;if(e instanceof iT){const{data:{rect:R,rotation:L,id:O,structParent:P,popupRef:M},container:k,parent:{page:{pageNumber:U}},canvas:$}=e;let G,Z;$?(delete e.canvas,{id:G,bitmap:Z}=a.imageManager.getFromCanvas(k.id,$),$.remove()):(o=!0,e._hasNoCanvas=!0);const it=((C=await s._structTree.getAriaAttributes(`${DA}${O}`))==null?void 0:C.get("aria-label"))||"";l=e={annotationType:Bt.STAMP,bitmapId:G,bitmap:Z,pageIndex:U-1,rect:R.slice(0),rotation:L,id:O,deleted:!1,accessibilityData:{decorative:!1,altText:it},isSvg:!1,structParent:P,popupRef:M}}const d=await super.deserialize(e,s,a),{rect:f,bitmap:g,bitmapUrl:m,bitmapId:v,isSvg:b,accessibilityData:A}=e;o?(a.addMissingCanvas(e.id,d),S(d,gu,!0)):v&&a.imageManager.isValidId(v)?(S(d,vi,v),g&&S(d,Ce,g)):S(d,ar,m),S(d,On,b);const[E,_]=d.pageDimensions;return d.width=(f[2]-f[0])/E,d.height=(f[3]-f[1])/_,d.annotationElementId=e.id||null,A&&(d.altTextData=A),d._initialData=l,S(d,wh,!!l),d}serialize(e=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const a={annotationType:Bt.STAMP,bitmapId:c(this,vi),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,On),structTreeParentId:this._structTreeParentId};if(e)return a.bitmapUrl=T(this,re,Fm).call(this,!0),a.accessibilityData=this.serializeAltText(!0),a.isCopy=!0,a;const{decorative:l,altText:o}=this.serializeAltText(!1);if(!l&&o&&(a.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const f=T(this,re,IT).call(this,a);if(f.isSame)return null;f.isSameAltText?delete a.accessibilityData:a.accessibilityData.structParent=this._initialData.structParent??-1}if(a.id=this.annotationElementId,s===null)return a;s.stamps||(s.stamps=new Map);const d=c(this,On)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!s.stamps.has(c(this,vi)))s.stamps.set(c(this,vi),{area:d,serialized:a}),a.bitmap=T(this,re,Fm).call(this,!1);else if(c(this,On)){const f=s.stamps.get(c(this,vi));d>f.area&&(f.area=d,f.serialized.bitmap.close(),f.serialized.bitmap=T(this,re,Fm).call(this,!1))}return a}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}Ce=new WeakMap,vi=new WeakMap,Sl=new WeakMap,ar=new WeakMap,wl=new WeakMap,Sh=new WeakMap,rr=new WeakMap,gu=new WeakMap,ra=new WeakMap,On=new WeakMap,wh=new WeakMap,re=new WeakSet,Wd=function(e,s=!1){if(!e){this.remove();return}S(this,Ce,e.bitmap),s||(S(this,vi,e.id),S(this,On,e.isSvg)),e.file&&S(this,Sh,e.file.name),T(this,re,Pm).call(this)},Qd=function(){if(S(this,Sl,null),this._uiManager.enableWaiting(!1),!!c(this,rr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Ce)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Ce)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},km=function(){if(c(this,vi)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,vi)).then(a=>T(this,re,Wd).call(this,a,!0)).finally(()=>T(this,re,Qd).call(this));return}if(c(this,ar)){const a=c(this,ar);S(this,ar,null),this._uiManager.enableWaiting(!0),S(this,Sl,this._uiManager.imageManager.getFromUrl(a).then(l=>T(this,re,Wd).call(this,l)).finally(()=>T(this,re,Qd).call(this)));return}if(c(this,wl)){const a=c(this,wl);S(this,wl,null),this._uiManager.enableWaiting(!0),S(this,Sl,this._uiManager.imageManager.getFromFile(a).then(l=>T(this,re,Wd).call(this,l)).finally(()=>T(this,re,Qd).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=a0.join(",");const s=this._uiManager._signal;S(this,Sl,new Promise(a=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const l=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),T(this,re,Wd).call(this,l)}a()},{signal:s}),e.addEventListener("cancel",()=>{this.remove(),a()},{signal:s})}).finally(()=>T(this,re,Qd).call(this))),e.click()},Pm=function(){var v;const{div:e}=this;let{width:s,height:a}=c(this,Ce);const[l,o]=this.pageDimensions,d=.75;if(this.width)s=this.width*l,a=this.height*o;else if(s>d*l||a>d*o){const b=Math.min(d*l/s,d*o/a);s*=b,a*=b}const[f,g]=this.parentDimensions;this.setDims(s*f/l,a*g/o),this._uiManager.enableWaiting(!1);const m=S(this,rr,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),this.width=s/l,this.height=a/o,(v=this._initialOptions)!=null&&v.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),T(this,re,fA).call(this),c(this,wh)||(this.parent.addUndoableEditor(this),S(this,wh,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,Sh)&&this.div.setAttribute("aria-description",c(this,Sh))},zm=function(e,s){const{width:a,height:l}=c(this,Ce);let o=a,d=l,f=c(this,Ce);for(;o>2*e||d>2*s;){const g=o,m=d;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),d>2*s&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const v=new OffscreenCanvas(o,d);v.getContext("2d").drawImage(f,0,0,g,m,0,0,o,d),f=v.transferToImageBitmap()}return f},fA=function(){const[e,s]=this.parentDimensions,{width:a,height:l}=this,o=new gr,d=Math.ceil(a*e*o.sx),f=Math.ceil(l*s*o.sy),g=c(this,rr);if(!g||g.width===d&&g.height===f)return;g.width=d,g.height=f;const m=c(this,On)?c(this,Ce):T(this,re,zm).call(this,d,f),v=g.getContext("2d");v.filter=this._uiManager.hcmFilter,v.drawImage(m,0,0,m.width,m.height,0,0,d,f)},Fm=function(e){if(e){if(c(this,On)){const l=this._uiManager.imageManager.getSvgUrl(c(this,vi));if(l)return l}const s=document.createElement("canvas");return{width:s.width,height:s.height}=c(this,Ce),s.getContext("2d").drawImage(c(this,Ce),0,0),s.toDataURL()}if(c(this,On)){const[s,a]=this.pageDimensions,l=Math.round(this.width*s*Rl.PDF_TO_CSS_UNITS),o=Math.round(this.height*a*Rl.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(l,o);return d.getContext("2d").drawImage(c(this,Ce),0,0,c(this,Ce).width,c(this,Ce).height,0,0,l,o),d.transferToImageBitmap()}return structuredClone(c(this,Ce))},IT=function(e){var d;const{pageIndex:s,accessibilityData:{altText:a}}=this._initialData,l=e.pageIndex===s,o=(((d=e.accessibilityData)==null?void 0:d.alt)||"")===a;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&l&&o,isSameAltText:o}},At(dA,"_type","stamp"),At(dA,"_editorType",Bt.STAMP);var pu,Eh,la,El,lr,ls,_l,_h,mu,Ms,or,Gi,ur,xt,xl,Me,jT,Vs,pA,mA,Hm;const vs=class vs{constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:a,accessibilityManager:l,annotationLayer:o,drawLayer:d,textLayer:f,viewport:g,l10n:m}){x(this,Me);x(this,pu);x(this,Eh,!1);x(this,la,null);x(this,El,null);x(this,lr,null);x(this,ls,new Map);x(this,_l,!1);x(this,_h,!1);x(this,mu,!1);x(this,Ms,null);x(this,or,null);x(this,Gi,null);x(this,ur,null);x(this,xt);const v=[...c(vs,xl).values()];if(!vs._initialized){vs._initialized=!0;for(const b of v)b.initialize(m,t)}t.registerEditorTypes(v),S(this,xt,t),this.pageIndex=e,this.div=s,S(this,pu,l),S(this,la,o),this.viewport=g,S(this,Gi,f),this.drawLayer=d,this._structTree=a,c(this,xt).addLayer(this)}get isEmpty(){return c(this,ls).size===0}get isInvisible(){return this.isEmpty&&c(this,xt).getMode()===Bt.NONE}updateToolbar(t){c(this,xt).updateToolbar(t)}updateMode(t=c(this,xt).getMode()){switch(T(this,Me,Hm).call(this),t){case Bt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Bt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Bt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of c(vs,xl).values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=c(this,Gi))==null?void 0:e.div)}setEditingState(t){c(this,xt).setEditingState(t)}addCommands(t){c(this,xt).addCommands(t)}cleanUndoStack(t){c(this,xt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=c(this,la))==null||e.div.classList.toggle("disabled",!t)}async enable(){S(this,mu,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of c(this,ls).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(c(this,xt).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!c(this,la)){S(this,mu,!1);return}const e=c(this,la).getEditableAnnotations();for(const s of e){if(s.hide(),c(this,xt).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const a=await this.deserialize(s);a&&(this.addOrRebuild(a),a.enableEditing())}S(this,mu,!1)}disable(){var a;S(this,_h,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const l of c(this,ls).values())if(l.disableEditing(),!!l.annotationElementId){if(l.serialize()!==null){t.set(l.annotationElementId,l);continue}else e.set(l.annotationElementId,l);(a=this.getEditableAnnotation(l.annotationElementId))==null||a.show(),l.remove()}if(c(this,la)){const l=c(this,la).getEditableAnnotations();for(const o of l){const{id:d}=o.data;if(c(this,xt).isDeletedAnnotationElement(d))continue;let f=e.get(d);if(f){f.resetAnnotationElement(o),f.show(!1),o.show();continue}f=t.get(d),f&&(c(this,xt).addChangedExistingAnnotation(f),f.renderAnnotationElement(o)&&f.show(!1)),o.show()}}T(this,Me,Hm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const l of c(vs,xl).values())s.remove(`${l._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),S(this,_h,!1)}getEditableAnnotation(t){var e;return((e=c(this,la))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){c(this,xt).getActive()!==t&&c(this,xt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=c(this,Gi))!=null&&t.div&&!c(this,ur)){S(this,ur,new AbortController);const e=c(this,xt).combinedSignal(c(this,ur));c(this,Gi).div.addEventListener("pointerdown",T(this,Me,jT).bind(this),{signal:e}),c(this,Gi).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=c(this,Gi))!=null&&t.div&&c(this,ur)&&(c(this,ur).abort(),S(this,ur,null),c(this,Gi).div.classList.remove("highlighting"))}enableClick(){if(c(this,El))return;S(this,El,new AbortController);const t=c(this,xt).combinedSignal(c(this,El));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=c(this,El))==null||t.abort(),S(this,El,null)}attach(t){c(this,ls).set(t.id,t);const{annotationElementId:e}=t;e&&c(this,xt).isDeletedAnnotationElement(e)&&c(this,xt).removeDeletedAnnotationElement(t)}detach(t){var e;c(this,ls).delete(t.id),(e=c(this,pu))==null||e.removePointerInTextLayer(t.contentDiv),!c(this,_h)&&t.annotationElementId&&c(this,xt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),c(this,xt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(c(this,xt).addDeletedAnnotationElement(t.annotationElementId),De.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),c(this,xt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!c(this,mu)),c(this,xt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var s;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!c(this,lr)&&(t._focusEventsAllowed=!1,S(this,lr,setTimeout(()=>{S(this,lr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:c(this,xt)._signal}),e.focus())},0))),t._structTreeParentId=(s=c(this,pu))==null?void 0:s.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return c(this,xt).getId()}combinedSignal(t){return c(this,xt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=c(this,Me,Vs))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){c(this,xt).updateToolbar(t),await c(this,xt).updateMode(t);const{offsetX:s,offsetY:a}=T(this,Me,mA).call(this),l=this.getNextId(),o=T(this,Me,pA).call(this,{parent:this,id:l,x:s,y:a,uiManager:c(this,xt),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=c(vs,xl).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,c(this,xt)))||null}createAndAddNewEditor(t,e,s={}){const a=this.getNextId(),l=T(this,Me,pA).call(this,{parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:c(this,xt),isCentered:e,...s});return l&&this.add(l),l}addNewEditor(t={}){this.createAndAddNewEditor(T(this,Me,mA).call(this),!0,t)}setSelected(t){c(this,xt).setSelected(t)}toggleSelected(t){c(this,xt).toggleSelected(t)}unselect(t){c(this,xt).unselect(t)}pointerup(t){var a;const{isMac:e}=ki.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!c(this,_l)||(S(this,_l,!1),(a=c(this,Me,Vs))!=null&&a.isDrawer&&c(this,Me,Vs).supportMultipleDrawings))return;if(!c(this,Eh)){S(this,Eh,!0);return}const s=c(this,xt).getMode();if(s===Bt.STAMP||s===Bt.SIGNATURE){c(this,xt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var a;if(c(this,xt).getMode()===Bt.HIGHLIGHT&&this.enableTextSelection(),c(this,_l)){S(this,_l,!1);return}const{isMac:e}=ki.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(S(this,_l,!0),(a=c(this,Me,Vs))!=null&&a.isDrawer){this.startDrawingSession(t);return}const s=c(this,xt).getActive();S(this,Eh,!s||s.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),c(this,Ms)){c(this,Me,Vs).startDrawing(this,c(this,xt),!1,t);return}c(this,xt).setCurrentDrawingSession(this),S(this,Ms,new AbortController);const e=c(this,xt).combinedSignal(c(this,Ms));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(S(this,or,null),this.commitOrRemove())},{signal:e}),c(this,Me,Vs).startDrawing(this,c(this,xt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&S(this,or,e);return}c(this,or)&&setTimeout(()=>{var e;(e=c(this,or))==null||e.focus(),S(this,or,null)},0)}endDrawingSession(t=!1){return c(this,Ms)?(c(this,xt).setCurrentDrawingSession(null),c(this,Ms).abort(),S(this,Ms,null),S(this,or,null),c(this,Me,Vs).endDrawing(t)):null}findNewParent(t,e,s){const a=c(this,xt).findParent(e,s);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return c(this,Ms)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,Ms)&&c(this,Me,Vs).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=c(this,xt).getActive())==null?void 0:t.parent)===this&&(c(this,xt).commitOrRemove(),c(this,xt).setActiveEditor(null)),c(this,lr)&&(clearTimeout(c(this,lr)),S(this,lr,null));for(const s of c(this,ls).values())(e=c(this,pu))==null||e.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,c(this,ls).clear(),c(this,xt).removeLayer(this)}render({viewport:t}){this.viewport=t,bu(this.div,t);for(const e of c(this,xt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){c(this,xt).commitOrRemove(),T(this,Me,Hm).call(this);const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,bu(this.div,{rotation:s}),e!==s)for(const a of c(this,ls).values())a.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return c(this,xt).viewParameters.realScale}};pu=new WeakMap,Eh=new WeakMap,la=new WeakMap,El=new WeakMap,lr=new WeakMap,ls=new WeakMap,_l=new WeakMap,_h=new WeakMap,mu=new WeakMap,Ms=new WeakMap,or=new WeakMap,Gi=new WeakMap,ur=new WeakMap,xt=new WeakMap,xl=new WeakMap,Me=new WeakSet,jT=function(t){c(this,xt).unselectAll();const{target:e}=t;if(e===c(this,Gi).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&c(this,Gi).div.contains(e)){const{isMac:s}=ki.platform;if(t.button!==0||t.ctrlKey&&s)return;c(this,xt).showAllEditors("highlight",!0,!0),c(this,Gi).div.classList.add("free"),this.toggleDrawing(),Km.startHighlighting(this,c(this,xt).direction==="ltr",{target:c(this,Gi).div,x:t.x,y:t.y}),c(this,Gi).div.addEventListener("pointerup",()=>{c(this,Gi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,xt)._signal}),t.preventDefault()}},Vs=function(){return c(vs,xl).get(c(this,xt).getMode())},pA=function(t){const e=c(this,Me,Vs);return e?new e.prototype.constructor(t):null},mA=function(){const{x:t,y:e,width:s,height:a}=this.div.getBoundingClientRect(),l=Math.max(0,t),o=Math.max(0,e),d=Math.min(window.innerWidth,t+s),f=Math.min(window.innerHeight,e+a),g=(l+d)/2-t,m=(o+f)/2-e,[v,b]=this.viewport.rotation%180===0?[g,m]:[m,g];return{offsetX:v,offsetY:b}},Hm=function(){for(const t of c(this,ls).values())t.isEmpty()&&t.remove()},At(vs,"_initialized",!1),x(vs,xl,new Map([Y0,aA,dA,Km,hA].map(t=>[t._editorType,t])));let gA=vs;var Ds,Zi,yu,Tg,py,GT,ua,vA,qT,bA;const ai=class ai{constructor({pageIndex:t}){x(this,ua);x(this,Ds,null);x(this,Zi,new Map);x(this,yu,new Map);this.pageIndex=t}setParent(t){if(!c(this,Ds)){S(this,Ds,t);return}if(c(this,Ds)!==t){if(c(this,Zi).size>0)for(const e of c(this,Zi).values())e.remove(),t.append(e);S(this,Ds,t)}}static get _svgFactory(){return Zt(this,"_svgFactory",new Ym)}draw(t,e=!1,s=!1){const a=Xi(ai,Tg)._++,l=T(this,ua,vA).call(this),o=ai._svgFactory.createElement("defs");l.append(o);const d=ai._svgFactory.createElement("path");o.append(d);const f=`path_p${this.pageIndex}_${a}`;d.setAttribute("id",f),d.setAttribute("vector-effect","non-scaling-stroke"),e&&c(this,yu).set(a,d);const g=s?T(this,ua,qT).call(this,o,f):null,m=ai._svgFactory.createElement("use");return l.append(m),m.setAttribute("href",`#${f}`),this.updateProperties(l,t),c(this,Zi).set(a,l),{id:a,clipPathId:`url(#${g})`}}drawOutline(t,e){const s=Xi(ai,Tg)._++,a=T(this,ua,vA).call(this),l=ai._svgFactory.createElement("defs");a.append(l);const o=ai._svgFactory.createElement("path");l.append(o);const d=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",d),o.setAttribute("vector-effect","non-scaling-stroke");let f;if(e){const v=ai._svgFactory.createElement("mask");l.append(v),f=`mask_p${this.pageIndex}_${s}`,v.setAttribute("id",f),v.setAttribute("maskUnits","objectBoundingBox");const b=ai._svgFactory.createElement("rect");v.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=ai._svgFactory.createElement("use");v.append(A),A.setAttribute("href",`#${d}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const g=ai._svgFactory.createElement("use");a.append(g),g.setAttribute("href",`#${d}`),f&&g.setAttribute("mask",`url(#${f})`);const m=g.cloneNode();return a.append(m),g.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(a,t),c(this,Zi).set(s,a),s}finalizeDraw(t,e){c(this,yu).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var f;if(!e)return;const{root:s,bbox:a,rootClass:l,path:o}=e,d=typeof t=="number"?c(this,Zi).get(t):t;if(d){if(s&&T(this,ua,bA).call(this,d,s),a&&T(f=ai,py,GT).call(f,d,a),l){const{classList:g}=d;for(const[m,v]of Object.entries(l))g.toggle(m,v)}if(o){const m=d.firstChild.firstChild;T(this,ua,bA).call(this,m,o)}}}updateParent(t,e){if(e===this)return;const s=c(this,Zi).get(t);s&&(c(e,Ds).append(s),c(this,Zi).delete(t),c(e,Zi).set(t,s))}remove(t){c(this,yu).delete(t),c(this,Ds)!==null&&(c(this,Zi).get(t).remove(),c(this,Zi).delete(t))}destroy(){S(this,Ds,null);for(const t of c(this,Zi).values())t.remove();c(this,Zi).clear(),c(this,yu).clear()}};Ds=new WeakMap,Zi=new WeakMap,yu=new WeakMap,Tg=new WeakMap,py=new WeakSet,GT=function(t,[e,s,a,l]){const{style:o}=t;o.top=`${100*s}%`,o.left=`${100*e}%`,o.width=`${100*a}%`,o.height=`${100*l}%`},ua=new WeakSet,vA=function(){const t=ai._svgFactory.create(1,1,!0);return c(this,Ds).append(t),t.setAttribute("aria-hidden",!0),t},qT=function(t,e){const s=ai._svgFactory.createElement("clipPath");t.append(s);const a=`clip_${e}`;s.setAttribute("id",a),s.setAttribute("clipPathUnits","objectBoundingBox");const l=ai._svgFactory.createElement("use");return s.append(l),l.setAttribute("href",`#${e}`),l.classList.add("clip"),a},bA=function(t,e){for(const[s,a]of Object.entries(e))a===null?t.removeAttribute(s):t.setAttribute(s,a)},x(ai,py),x(ai,Tg,0);let yA=ai;globalThis.pdfjsTestingUtils={HighlightOutliner:$0};kt.AbortException;kt.AnnotationEditorLayer;kt.AnnotationEditorParamsType;kt.AnnotationEditorType;kt.AnnotationEditorUIManager;kt.AnnotationLayer;kt.AnnotationMode;kt.AnnotationType;kt.ColorPicker;kt.DOMSVGFactory;kt.DrawLayer;kt.FeatureTest;var VT=kt.GlobalWorkerOptions;kt.ImageKind;kt.InvalidPDFException;kt.MathClamp;kt.OPS;kt.OutputScale;kt.PDFDataRangeTransport;kt.PDFDateString;kt.PDFWorker;kt.PasswordResponses;kt.PermissionFlag;kt.PixelsPerInch;kt.RenderingCancelledException;kt.ResponseException;kt.SignatureExtractor;kt.SupportedImageMimeTypes;kt.TextLayer;kt.TouchManager;kt.Util;kt.VerbosityLevel;kt.XfaLayer;kt.build;kt.createValidAbsoluteUrl;kt.fetchData;kt.getDocument;kt.getFilenameFromUrl;kt.getPdfFilenameFromUrl;kt.getUuid;kt.getXfaPageViewport;kt.isDataScheme;kt.isPdfFile;kt.isValidExplicitDest;kt.noContextMenu;kt.normalizeUnicode;kt.setLayerDimensions;kt.shadow;kt.stopEvent;kt.version;VT.workerSrc=new URL("/Prabhanshukamal/assets/pdf.worker.min-B9SsWq0g.mjs",import.meta.url).toString();const oO=({onClose:h})=>{const[t,e]=q.useState(vu.get("userEmail")),[s,a]=q.useState(""),[l,o]=q.useState("Hello! How can I help you today?"),[d,f]=q.useState(""),[g,m]=q.useState(""),[v,b]=q.useState(""),[A,E]=q.useState("#d2e5f5"),[_,C]=q.useState("#000000"),R=async k=>{if(k.preventDefault(),!t){alert("User email is required!");return}const U={userEmail:t,chatbotName:s,greetingMessage:l,trainingData:d,trainingpdf:g,trainingpdfdata:v,chatbotMassagesBackgroundColor:_,userMassagesBackgroundColor:A};try{const G=await(await fetch("http://localhost:5000/api/chatbots",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)})).json();console.log(G.message),h()}catch($){console.error("Error saving chatbot:",$),alert("Failed to save chatbot!")}},[L,O]=q.useState(""),P=k=>{const U=k.target.files[0];console.log(U),U&&(U.type!=="application/pdf"?(O("Please upload a valid PDF file."),k.target.value=""):U.size>5*1024*1024?(O("File size should be less than 5MB."),k.target.value=""):(O(""),m(k.target.value),M(U)))},M=async k=>{const U=new FileReader;U.readAsArrayBuffer(k),U.onload=async()=>{const $=U.result,G=await pdfjsLib.getDocument({data:$}).promise;let Z="";for(let it=1;it<=G.numPages;it++){const ht=(await(await G.getPage(it)).getTextContent()).items.map(St=>St.str).join(" ");Z+=ht+`
`}b(Z)}};return J.jsx("div",{className:"chatbot-modal-overlay",children:J.jsxs("div",{className:"chatbot-modal",children:[J.jsx("h2",{className:"chatbot-modal-title",children:"Create New Chatbot"}),J.jsxs("form",{className:"chatbot-form",onSubmit:R,children:[J.jsx("label",{className:"chatbot-label",children:"Chatbot Name"}),J.jsx("input",{type:"text",className:"chatbot-input",value:s,onChange:k=>a(k.target.value),required:!0}),J.jsx("label",{className:"chatbot-label",children:"Greeting Message"}),J.jsx("input",{type:"text",className:"chatbot-input",value:l,onChange:k=>o(k.target.value)}),J.jsx("label",{className:"chatbot-label",children:"Upload PDF (Max: 5MB)-optional"}),L&&J.jsx("p",{className:"red",children:L}),J.jsx("input",{type:"file",accept:"application/pdf",value:g,onChange:P,className:"border p-2 rounded w-full"}),J.jsx("label",{className:"chatbot-label",children:"Data"}),J.jsx("textarea",{className:"chatbot-textarea",value:d,onChange:k=>f(k.target.value)}),J.jsx("label",{className:"chatbot-label",children:"Chatbot massages background color"}),J.jsx("input",{type:"color",style:{width:"90%",height:"20px"},value:_,onChange:k=>C(k.target.value),required:!0}),J.jsx("label",{className:"chatbot-label",children:"user massages background color"}),J.jsx("input",{type:"color",style:{width:"90%",height:"20px"},value:A,onChange:k=>E(k.target.value),required:!0}),J.jsx("button",{type:"submit",id:"chatbot-submit-btn",children:"Create Chatbot"})]}),J.jsx("button",{id:"chatbot-close-btn",onClick:h,children:"Close"})]})})};VT.workerSrc=new URL("/Prabhanshukamal/assets/pdf.worker.min-B9SsWq0g.mjs",import.meta.url).toString();const uO=({onClose:h,id:t="",name:e="",message:s="",data:a="",pdf:l="",pdfdata:o="",chatbotMassagesBackground:d="",userMassagesBackground:f=""})=>{const[g,m]=q.useState(vu.get("userEmail")||""),[v,b]=q.useState(e),[A,E]=q.useState(s),[_,C]=q.useState(a),[R,L]=q.useState(l),[O,P]=q.useState(o),[M,k]=q.useState(d),[U,$]=q.useState(f),G=async ht=>{if(console.log(R),!ht){alert("Invalid Chatbot ID");return}const St={chatbotName:v,greetingMessage:A,trainingData:_,trainingpdf:R,trainingpdfdata:O,chatbotMassagesBackgroundColor:M,userMassagesBackgroundColor:U};try{const Y=await fetch(`http://localhost:5000/api/chatbots/${g}/${ht}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(St)}),nt=await Y.json();Y.ok?(alert(nt.message||"Chatbot updated successfully!"),fetchChatbots()):alert(nt.message||"Failed to update chatbot!")}catch(Y){console.error("Error updating chatbot:",Y)}},[Z,it]=q.useState(""),Mt=ht=>{const St=ht.target.files[0];St&&(St.type!=="application/pdf"?(it("Please upload a valid PDF file."),ht.target.value=""):St.size>5*1024*1024?(it("File size should be less than 5MB."),ht.target.value=""):(it(""),L(ht.target.value),Rt(St)))},Rt=async ht=>{const St=new FileReader;St.readAsArrayBuffer(ht),St.onload=async()=>{const Y=St.result,nt=await pdfjsLib.getDocument({data:Y}).promise;let dt="";for(let Pt=1;Pt<=nt.numPages;Pt++){const lt=(await(await nt.getPage(Pt)).getTextContent()).items.map(rt=>rt.str).join(" ");dt+=lt+`
`}P(dt)}};return J.jsx("div",{className:"chatbot-modal-overlay",children:J.jsxs("div",{className:"chatbot-modal",children:[J.jsx("h2",{className:"chatbot-modal-title",children:"Create New Chatbot"}),J.jsxs("form",{className:"chatbot-form",onSubmit:()=>G(t),children:[J.jsx("label",{className:"chatbot-label",children:"Chatbot Name"}),J.jsx("input",{type:"text",className:"chatbot-input",value:v,onChange:ht=>b(ht.target.value),required:!0}),J.jsx("label",{className:"chatbot-label",children:"Greeting Message"}),J.jsx("input",{type:"text",className:"chatbot-input",value:A,onChange:ht=>E(ht.target.value)}),J.jsx("label",{className:"chatbot-label",children:"Upload PDF (Max: 5MB)-optional"}),Z&&J.jsx("p",{className:"red",children:Z}),J.jsx("input",{type:"file",accept:"application/pdf",onChange:Mt,className:"border p-2 rounded w-full"}),J.jsx("label",{className:"chatbot-label",children:"Data"}),J.jsx("textarea",{className:"chatbot-textarea",value:_,onChange:ht=>C(ht.target.value)}),J.jsx("label",{className:"chatbot-label",children:"Chatbot massages background color"}),J.jsx("input",{type:"color",style:{width:"90%",height:"20px"},value:M,onChange:ht=>k(ht.target.value)}),J.jsx("label",{className:"chatbot-label",children:"user massages background color"}),J.jsx("input",{type:"color",style:{width:"90%",height:"20px"},value:U,onChange:ht=>$(ht.target.value)}),J.jsx("button",{type:"submit",id:"chatbot-submit-btn",children:"Edit Chatbot"})]}),J.jsx("button",{id:"chatbot-close-btn",onClick:h,children:"Close"})]})})},cO=h=>{const t=vu.get("userEmail"),[e,s]=q.useState(!1),a=async l=>{if(!l){alert("Invalid Chatbot ID");return}if(confirm("delete chatbot"))try{const d=await(await fetch(`http://localhost:5000/api/chatbots/${t}/${l}`,{method:"DELETE"})).json()}catch(o){console.error("Error deleting chatbot:",o)}else return};return J.jsx("div",{className:"maincb",children:J.jsxs("div",{className:"cb",children:[J.jsx("h2",{className:"cbname",children:h.name}),J.jsx("p",{className:"cbmes",children:h.message}),J.jsx("h2",{className:"cbname",children:"website link-"}),J.jsxs("div",{className:"copy",children:[J.jsxs("p",{className:"web",children:["http://localhost:5174/",h.id]}),J.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`http://localhost:5174/${h.id}`)},className:"edit",id:"copy",children:"copy"})]}),J.jsxs("div",{className:"butcan",children:[J.jsx("button",{onClick:()=>s(!0),className:"edit",children:"Edit"}),e&&J.jsx(uO,{id:h.id,name:h.name,message:h.message,data:h.data,onClose:()=>s(!1),pdf:h.pdf,pdfdata:h.pdfdata,chatbotMassagesBackground:h.chatbotMassagesBackgroundColor,userMassagesBackground:h.userMassagesBackgroundColor}),J.jsx("button",{className:"delete",onClick:()=>a(h.id),children:"Delete"})]})]})})};function hO(){const[h,t]=q.useState(!1),e=Rg(),[s,a]=q.useState(vu.get("userEmail"));if(s==null)return J.jsx(MD,{to:"/login"});const[l,o]=q.useState([]),d=async()=>{try{const g=await fetch(`http://localhost:5000/api/chatbots/${s}`),m=await g.json();g.ok?o(m.chatbots||[]):alert("Error: "+m.message)}catch(g){console.error("Error fetching chatbots:",g)}};function f(){vu.remove("userEmail"),a(""),e("/login")}return q.useEffect(()=>{s&&d()}),J.jsxs(J.Fragment,{children:[J.jsxs("div",{className:"main",children:[J.jsxs("div",{children:[J.jsx("h2",{children:"Chatbot Creator"}),J.jsxs("p",{children:["Welcome ",s]})]}),J.jsxs("div",{className:"but",children:[J.jsx("button",{onClick:()=>{f()},children:"Logout"}),J.jsx("button",{onClick:()=>t(!0),children:"New Chatbot"}),h&&J.jsx(oO,{onClose:()=>t(!1)})]})]}),l.length>0?l.map(g=>J.jsx(cO,{id:g._id,name:g.chatbotName,message:g.greetingMessage,data:g.trainingData,pdf:g.trainingpdf,pdfdata:g.trainingpdfdata,chatbotMassagesBackgroundColor:g.chatbotMassagesBackgroundColor,userMassagesBackgroundColor:g.userMassagesBackgroundColor},g._id)):J.jsx("p",{children:"No chatbots found. Create a new one!"})]})}const dO=()=>{const h=ca();return q.useEffect(()=>{window.scrollTo(0,0)},[h.pathname]),null},fO=()=>{const h=ca();return q.useEffect(()=>{window.scrollTo(0,0)},[h.pathname]),J.jsxs(J.Fragment,{children:[J.jsx(dO,{}),J.jsx(DD,{})]})},gO=()=>{const[h,t]=q.useState(""),[e,s]=q.useState(""),a=Rg(),l=async o=>{o.preventDefault();try{const d=await fetch("http://localhost:5000/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h,password:e})}),f=await d.json();d.ok?(vu.set("userEmail",h),a("/")):alert(f.message)}catch(d){alert("Error:",d)}};return J.jsx("div",{children:J.jsxs("div",{className:"fram",children:[J.jsx("div",{id:"ffc",className:"fc",children:J.jsxs("div",{id:"ff",children:[J.jsx("h3",{children:"Welcome to chat bot creator"}),J.jsxs("div",{children:[J.jsx(xh,{to:"/login",children:J.jsx("button",{children:"Login"})}),J.jsx(xh,{to:"/register",children:J.jsx("button",{children:"Register"})})]}),J.jsx("div",{children:J.jsxs("form",{onSubmit:l,children:[J.jsx("input",{type:"email",placeholder:"Email",value:h,onChange:o=>t(o.target.value),required:!0}),J.jsx("input",{type:"password",placeholder:"Password",value:e,onChange:o=>s(o.target.value),required:!0}),J.jsx("button",{type:"submit",children:"Register"})]})})]})}),J.jsxs("div",{id:"sfc",className:"fc",children:[J.jsx("h1",{children:"Create Custom Chatbots"}),J.jsx("p",{children:"Build intlligent chatbot powered by OpenAi without writing any cood"})]})]})})},pO=()=>{const h=t2([{path:"/",element:J.jsx(fO,{}),children:[{path:"/login",element:J.jsx(p2,{})},{path:"/",element:J.jsx(hO,{})},{path:"/register",element:J.jsx(gO,{})}]}]);return J.jsx(J.Fragment,{children:J.jsx(f2,{router:h})})};function mO(){return J.jsx(J.Fragment,{children:J.jsx(pO,{})})}lM.createRoot(document.getElementById("root")).render(J.jsx(q.StrictMode,{children:J.jsx(mO,{})}));
